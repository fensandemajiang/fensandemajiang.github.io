var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&a(e,n,t[n]);return e},u=(e,r)=>t(e,n(r));import{R as c,r as l,g as f,h,j as d,k as p}from"./vendor.a0ba0fb2.js";import{u as v,q as y,a as b,b as m,T as g,D as w,e as _,i as E,F as x,C as k,c as S,r as A,t as O,f as P,d as I,v as T,g as j,h as N,j as L,s as C,k as D,l as U,m as R,n as M,W as F}from"./index.d04434d9.js";import{h as B}from"./index.fcc1357b.js";const z=({name:e,description:t,residenceCountry:n,age:r})=>c.createElement("div",{className:"lobbyview__lpanel p-4 br-2 text-white rounded-xl m-8"},c.createElement("h1",{className:"text-7xl font-bold p-4"},e),c.createElement("p",{className:"text-3xl p-4"},c.createElement("b",null,"Description:")," ",t),c.createElement("p",{className:"text-3xl p-4"},c.createElement("b",null,"Country:")," ",n),c.createElement("p",{className:"text-3xl p-4"},c.createElement("b",null,"Age:")," ",r)),H=e=>{const{updateBetState:t}=v(),n=l.exports.useRef(null),[r,i]=l.exports.useState(""),o=y.fromRandom(),[a,f]=l.exports.useState(0),[h,d]=l.exports.useState(null),{client:p,identity:_}=b((e=>e.connectionState));return l.exports.useEffect((()=>{var t,n;!async function(){var t,n;if(e.open&&0===a){i("loading..."),console.log(await p.getToken(_)),await p.newDB(o,"table"),await p.newCollection(o,{name:"playerId"}),await p.newCollection(o,{name:"connectDetail"}),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{threadId:o.toString()})})),i(o.toString());const e={playerId:null!=(n=null==(t=m.getState().userState.did)?void 0:t.id)?n:"playerx",ready:!1,_id:""};await p.create(o,"playerId",[e]),f(1);const r=[{collectionName:"playerId"},{actionTypes:["CREATE","DELETE"]}],a=p.listen(o,r,(async(e,t)=>{if(p){const e=(await p.find(o,"playerId",{})).map((e=>e.playerId));b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{signalIDs:e})})),console.log(e),f(e.length),4===e.length&&B.push("/play")}}));d(a)}}(),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{userID:null!=(n=null==(t=m.getState().userState.did)?void 0:t.id)?n:"",userConnectedCount:0})}))}),[e.open,a,p,_]),c.createElement(g.Root,{show:e.open,as:l.exports.Fragment},c.createElement(w,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",open:e.open,onClose:e.hitClose},c.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},c.createElement(g.Child,{as:l.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},c.createElement(w.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),c.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​"),c.createElement(g.Child,{as:l.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},c.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},c.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},c.createElement("div",{className:"sm:flex sm:items-start"},c.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},c.createElement(w.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900"},"Create Table"),c.createElement("div",{className:"mt-2"},c.createElement("p",{className:"text-sm text-gray-500"},"You have created a table with the following code:"),c.createElement("div",{className:"flex my-4 shadow rounded"},c.createElement("div",{className:"appearance-none border w-full py-2 px-3 break-all text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username"}," ",r," "),c.createElement("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4",onClick:function(){navigator.clipboard.writeText(r)}}," ","copy"," ")),c.createElement("p",{className:"text-sm text-gray-500"},"Send this to your friends for them to join. Currently"," ",a," ",1===a?"player has":"players have"," ","joined."),c.createElement("div",{className:"my-4 inline-flex align-items-center"},c.createElement("label",{className:"mx-4"},"Enable Betting"),c.createElement("input",{onChange:e=>{const{checked:n}=e.target;t({bettingEnabled:n,betAmount:0,betPaidOut:!1})},type:"checkbox",className:"form-checkbox vertical-align-middle"})))))),c.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},c.createElement("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:async function(){e.hitClose(),f(0);const t=await p.listCollections(o);h&&h.close();for(let e=0;e<t.length;e++)if("playerId"===t[e].name){console.log("delete playerId");const e=(await p.find(o,"playerId",{})).map((e=>e._id));await p.delete(o,"playerId",e),await p.deleteCollection(o,"playerId")}else"connectDetail"===t[e].name&&(console.log("delete connectDetail"),await p.deleteCollection(o,"connectDetail"));await p.deleteDB(o)},ref:n},"Cancel")))))))},G=e=>{const{updateBetState:t}=v(),n=l.exports.useRef(null),[r,i]=l.exports.useState(""),[o,a]=l.exports.useState(0),[f,h]=l.exports.useState(!1),[d,p]=l.exports.useState(null),{client:_,identity:E}=b((e=>e.connectionState));return l.exports.useEffect((()=>{var t,n;!async function(){e.open&&await _.getToken(E)}(),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{userID:null!=(n=null==(t=m.getState().userState.did)?void 0:t.id)?n:""})}))}),[e.open,_,E]),c.createElement(g.Root,{show:e.open,as:l.exports.Fragment},c.createElement(w,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:n,open:e.open,onClose:e.hitClose},c.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},c.createElement(g.Child,{as:l.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},c.createElement(w.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),c.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​"),c.createElement(g.Child,{as:l.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},c.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},c.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},c.createElement("div",{className:"sm:flex sm:items-start"},c.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},c.createElement(w.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900"},"Join Table"),c.createElement("div",{className:"mt-2"},c.createElement("p",{className:"text-sm text-gray-500"},"You are joining a game, please enter the join key:"),c.createElement("div",{className:"flex my-4 shadow rounded"},c.createElement("input",{className:"appearance-none border w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",placeholder:"Room Key",value:r,onChange:e=>i(e.target.value)})),f?c.createElement("p",{className:"text-sm text-gray-500"},"You have joined a table with ",o," players."):c.createElement("p",{className:"text-sm text-gray-500"},"Once your friends have created a table, they should get a room key, paste it above to join"),c.createElement("div",{className:"my-4 inline-flex align-items-center"},c.createElement("label",{className:"mx-4"},"Enable Betting"),c.createElement("input",{onChange:e=>{const{checked:n}=e.target;t({bettingEnabled:n,betAmount:0,betPaidOut:!1})},type:"checkbox",className:"form-checkbox vertical-align-middle"})))))),c.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},c.createElement("button",{type:"button",onClick:async function(){var e,t;let n=y.fromRandom();try{n=y.fromString(r),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{threadId:n.toString()})}))}catch(f){return void console.log("invalid threadId")}const o={playerId:null!=(t=null==(e=m.getState().userState.did)?void 0:e.id)?t:"playerx",ready:!1,_id:""};await _.create(n,"playerId",[o]);const c=(await _.find(n,"playerId",{})).map((e=>e.playerId));b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{signalIDs:c,userConnectedCount:0})})),a(c.length),4===c.length&&B.push("/play");const l=_.listen(n,[{collectionName:"playerId"},{actionTypes:["CREATE","DELETE"]}],((e,t)=>{!async function(){if(console.log("hi"),_)try{const e=(await _.find(n,"playerId",{})).map((e=>e.playerId));b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{signalIDs:e})})),console.log(e),a(e.length),console.log(e.length),0===e.length?(alert("Table was closed by owner"),h(!1),i("")):4===e.length&&(console.log("go"),B.push("/play"))}catch(e){h(!1),i("")}}()}));p(l),h(!0)},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},"Join"),c.createElement("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:async function(){if(e.hitClose(),i(""),a(0),f){let e=y.fromRandom();try{e=y.fromString(r),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{threadId:e.toString()})}))}catch(t){return void console.log("invalid threadId")}null==d||d.close(),await _.getToken(E);const n=await _.find(e,"playerId",{}),i=b.getState().connectionState.userID;console.log(n);const o=n.filter((e=>e.playerId===i)).map((e=>e._id))[0];console.log("deleting",o),await _.delete(e,"playerId",[o]),h(!1)}},ref:n},"Cancel")))))))},$="bj4s3dpzkutpt4jlodbj5xtnjhe",q="bmp7osuvgytrzpxqmf3j6zlm6u3re65bfs2krcyi",V=()=>{const[e,t]=l.exports.useState(!1),[n,r]=l.exports.useState(!1),{did:i}=m((e=>e.userState));l.exports.useEffect((()=>{!async function(){if(i)try{const e={sign:e=>i.createJWS(e).then((e=>Buffer.from(JSON.stringify(e)))),public:{verify:(e,t)=>i.verifyJWS(t.toString()).then((e=>void 0===e.didResolutionResult.didDocumentMetadata.error)),bytes:_(i.id)}};b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{identity:e})}))}catch(n){console.error(n),b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{identity:E.fromRandom()})}))}else b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{identity:E.fromRandom()})}));const e=await x($,q),t=k.withUserAuth(e);b.setState(u(s({},b.getState()),{connectionState:u(s({},b.getState().connectionState),{client:t})})),console.log("client init done")}()}),[i]);return c.createElement("div",{className:"lobbyview__rpanel p-4 br-2 text-white rounded-xl m-8"},c.createElement("div",{className:"w-100 m-4"},c.createElement("button",{className:"lobbyview__button text-2xl font-bold p-4 br-4 rounded-md",onClick:()=>{t(!0)}},"Create a Table")),c.createElement("div",{className:"w-100 m-4"},c.createElement("button",{className:"lobbyview__button text-2xl font-bold p-4 br-4 rounded-md",onClick:()=>{r(!0)}},"Join a Table")),c.createElement(H,{open:e,hitClose:()=>t(!e)}),c.createElement(G,{open:n,hitClose:()=>r(!n)}))};var K={},W={};Object.defineProperty(W,"__esModule",{value:!0});var J={},Y={},X={},Z={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});const ee={name:"chainId",regex:"[-:a-zA-Z0-9]{5,64}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,16}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,47}"}}}},te={name:"accountId",regex:"[-@:a-zA-Z0-9]{7,128}",parameters:{delimiter:"@",values:{0:{name:"address",regex:"[a-zA-Z0-9]{1,63}"},1:ee}}};Q.CAIP={2:ee,10:te};var ne={};function re(e,t){return e.split(t.parameters.delimiter)}Object.defineProperty(ne,"__esModule",{value:!0}),ne.splitParams=re,ne.getParams=function(e,t){const n=re(e,t),r={};return n.forEach(((e,n)=>{r[t.parameters.values[n].name]=e})),r},ne.joinParams=function e(t,n){return Object.values(n.parameters.values).map((n=>{const r=t[n.name];return"string"==typeof r?r:e(r,n)})).join(n.parameters.delimiter)},ne.isValidId=function(e,t){if(!new RegExp(t.regex).test(e))return!1;const n=re(e,t);return n.length===Object.keys(t.parameters.values).length&&n.map(((e,n)=>new RegExp(t.parameters.values[n].regex).test(e))).filter((e=>!!e)).length===n.length},Object.defineProperty(Z,"__esModule",{value:!0});const ie=Q,oe=ne;class ae{constructor(e){"string"==typeof e&&(e=ae.parse(e)),this.namespace=e.namespace,this.reference=e.reference}static parse(e){if(!oe.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new ae(oe.getParams(e,this.spec)).toJson()}static format(e){return oe.joinParams(e,this.spec)}toString(){return ae.format(this.toJson())}toJson(){return{namespace:this.namespace,reference:this.reference}}}Z.ChainID=ae,ae.spec=ie.CAIP[2],Object.defineProperty(X,"__esModule",{value:!0});const se=Z,ue=Q,ce=ne;class le{constructor(e){"string"==typeof e&&(e=le.parse(e)),this.chainId=new se.ChainID(e.chainId),this.address=e.address}static parse(e){if(!ce.isValidId(e,this.spec))throw new Error(`Invalid ${this.spec.name} provided: ${e}`);return new le(ce.getParams(e,this.spec)).toJson()}static format(e){return ce.joinParams(e,this.spec)}toString(){return le.format(this.toJson())}toJson(){return{chainId:this.chainId.toJson(),address:this.address}}}X.AccountID=le,le.spec=ue.CAIP[10],function(e){function t(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),t(X),t(Z)}(Y);var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.encodeRpcMessage=fe.getConsentMessage=void 0,fe.getConsentMessage=function(e,t=!0){const n={message:"Link this account to your identity\n\n"+e};return t&&(n.timestamp=Math.floor(Date.now()/1e3),n.message+=" \nTimestamp: "+n.timestamp),n},fe.encodeRpcMessage=function(e,t){return{jsonrpc:"2.0",id:1,method:e,params:t}};var he,de={},pe={},ve={};he=ve,Object.defineProperty(he,"__esModule",{value:!0}),he.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},he.add=function(e,t){return e+t|0},he.sub=function(e,t){return e-t|0},he.rotl=function(e,t){return e<<t|e>>>32-t},he.rotr=function(e,t){return e<<32-t|e>>>t},he.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},he.MAX_SAFE_INTEGER=9007199254740991,he.isSafeInteger=function(e){return he.isInteger(e)&&e>=-he.MAX_SAFE_INTEGER&&e<=he.MAX_SAFE_INTEGER},Object.defineProperty(pe,"__esModule",{value:!0});var ye=ve;function be(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function me(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function ge(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function we(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function _e(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function Ee(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function xe(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function ke(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function Se(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),xe(e/4294967296>>>0,t,n),xe(e>>>0,t,n+4),t}function Ae(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),ke(e>>>0,t,n),ke(e/4294967296>>>0,t,n+4),t}pe.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},pe.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},pe.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},pe.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},pe.writeUint16BE=be,pe.writeInt16BE=be,pe.writeUint16LE=me,pe.writeInt16LE=me,pe.readInt32BE=ge,pe.readUint32BE=we,pe.readInt32LE=_e,pe.readUint32LE=Ee,pe.writeUint32BE=xe,pe.writeInt32BE=xe,pe.writeUint32LE=ke,pe.writeInt32LE=ke,pe.readInt64BE=function(e,t){void 0===t&&(t=0);var n=ge(e,t),r=ge(e,t+4);return 4294967296*n+r-4294967296*(r>>31)},pe.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*we(e,t)+we(e,t+4)},pe.readInt64LE=function(e,t){void 0===t&&(t=0);var n=_e(e,t);return 4294967296*_e(e,t+4)+n-4294967296*(n>>31)},pe.readUint64LE=function(e,t){void 0===t&&(t=0);var n=Ee(e,t);return 4294967296*Ee(e,t+4)+n},pe.writeUint64BE=Se,pe.writeInt64BE=Se,pe.writeUint64LE=Ae,pe.writeInt64LE=Ae,pe.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,i=1,o=e/8+n-1;o>=n;o--)r+=t[o]*i,i*=256;return r},pe.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,i=1,o=n;o<n+e/8;o++)r+=t[o]*i,i*=256;return r},pe.writeUintBE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ye.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+r-1;o>=r;o--)n[o]=t/i&255,i*=256;return n},pe.writeUintLE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ye.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=r;o<r+e/8;o++)n[o]=t/i&255,i*=256;return n},pe.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},pe.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},pe.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},pe.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},pe.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},pe.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},pe.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},pe.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t};var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e},function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=pe,n=Oe;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=o(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,i=n/536870912|0,a=n<<3,s=n%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<s-8;u++)this._buffer[u]=0;t.writeUint32BE(i,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),o(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(u=0;u<this.digestLength/4;u++)t.writeUint32BE(this._state[u],e,4*u);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.state),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA256=r;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,n,r,o,a){for(;a>=64;){for(var s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],h=n[5],d=n[6],p=n[7],v=0;v<16;v++){var y=o+4*v;e[v]=t.readUint32BE(r,y)}for(v=16;v<64;v++){var b=e[v-2],m=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,g=((b=e[v-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3;e[v]=(m+e[v-7]|0)+(g+e[v-16]|0)}for(v=0;v<64;v++){m=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&h^~f&d)|0)+(p+(i[v]+e[v]|0)|0)|0,g=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&u^s&c^u&c)|0;p=d,d=h,h=f,f=l+m|0,l=c,c=u,u=s,s=m+g|0}n[0]+=s,n[1]+=u,n[2]+=c,n[3]+=l,n[4]+=f,n[5]+=h,n[6]+=d,n[7]+=p,o+=64,a-=64}return o}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}}(de);var Pe=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Ie=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Te=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Pe(t,e,n);return Ie(t,e),t};Object.defineProperty(J,"__esModule",{value:!0}),J.authenticate=J.createLink=J.normalizeAccountId=J.isERC1271=J.isEthAddress=J.EthereumAuthProvider=void 0;const je=Y,Ne=fe,Le=Te(S),Ce=Te(de),De="ethereum-eoa",Ue="erc1271";class Re{constructor(e,t,n={}){this.provider=e,this.address=t,this.opts=n,this.isAuthProvider=!0}async accountId(){const e=Ne.encodeRpcMessage("eth_chainId",[]),t=await Me(e,this.provider),n=parseInt(t,16);return new je.AccountID({address:this.address,chainId:`eip155:${n}`})}async authenticate(e){return qe(e,await this.accountId(),this.provider)}async createLink(e){return $e(e,await this.accountId(),this.provider,this.opts)}withAddress(e){return new Re(this.provider,e)}}async function Me(e,t){const n=(t.sendAsync?t.sendAsync:t.send).bind(t);return new Promise(((t,r)=>{n(e,(function(e,n){e?r(e):n.error?r(n.error):t(n.result)}))}))}async function Fe(e,t){const n=await async function(e,t){return Me(Ne.encodeRpcMessage("eth_getCode",[e,"latest"]),t)}(e.address,t).catch((()=>null));return Boolean(n&&"0x"!==n&&"0x0"!==n&&"0x00"!==n)}function Be(e){return e.address=e.address.toLowerCase(),e}function ze(e){const t=Le.fromString(e);return"0x"+Le.toString(t,"base16")}async function He(e,t,n,r={}){const{message:i,timestamp:o}=Ne.getConsentMessage(e,!r.skipTimestamp),a=ze(i),s=Ne.encodeRpcMessage("personal_sign",[a,t.address]),u=await Me(s,n),c={version:2,type:De,message:i,signature:u,account:t.toString()};return r.skipTimestamp||(c.timestamp=o),c}async function Ge(e,t,n,r){const i=(null==r?void 0:r.eoaSignAccount)||t,o=await He(e,i,n,r);return await async function(e,t){const n=Ne.encodeRpcMessage("eth_chainId",[]),r=await Me(n,t),i=parseInt(r,16);if(i!==parseInt(e.chainId.reference))throw new Error(`ChainId in provider (${i}) is different from AccountID (${e.chainId.reference})`)}(t,n),Object.assign(o,{type:Ue,account:t.toString()})}async function $e(e,t,n,r){return t=Be(t),await Fe(t,n)?Ge(e,t,n,r):He(e,t,n,r)}async function qe(e,t,n){if(t&&(t=Be(t)),n.isAuthereum)return n.signMessageWithSigningKey(e);const r=ze(e),i=Ne.encodeRpcMessage("personal_sign",[r,t.address]),o=await Me(i,n),a=Le.fromString(o.slice(2)),s=Ce.hash(a);return`0x${Le.toString(s,"base16")}`}J.EthereumAuthProvider=Re,J.isEthAddress=function(e){return/^0x[a-fA-F0-9]{40}$/.test(e)},J.isERC1271=Fe,J.normalizeAccountId=Be,J.createLink=$e,J.authenticate=qe;var Ve={},Ke=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),We=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Je=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Ke(t,e,n);return We(t,e),t};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.asTransaction=Ve.FilecoinAuthProvider=void 0;const Ye=Y,Xe=fe,Ze=Je(S);class Qe{constructor(e,t){this.provider=e,this.address=t,this.isAuthProvider=!0}async accountId(){const e=`fil:${this.address[0]}`;return new Ye.AccountID({address:this.address,chainId:e})}async authenticate(e){const t=et(this.address,JSON.stringify(e));return(await this.provider.sign(this.address,t)).Signature.Data}async createLink(e){const{message:t,timestamp:n}=Xe.getConsentMessage(e,!0),r=et(this.address,t),i=await this.provider.sign(this.address,r),o=await this.accountId();return{version:2,type:"eoa-tx",message:t,signature:i.Signature.Data,account:o.toString(),timestamp:n}}withAddress(e){return new Qe(this.provider,e)}}function et(e,t){return{From:e,To:e,Value:"0",Method:0,GasPrice:"1",GasLimit:1e3,Nonce:0,Params:Ze.toString(Ze.fromString(t),"base64"),GasFeeCap:"1",GasPremium:"1"}}Ve.FilecoinAuthProvider=Qe,Ve.asTransaction=et;var tt={},nt=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),rt=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),it=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&nt(t,e,n);return rt(t,e),t};Object.defineProperty(tt,"__esModule",{value:!0}),tt.PolkadotAuthProvider=void 0;const ot=Y,at=fe,st=it(S);class ut{constructor(e,t){this.provider=e,this.address=t,this.isAuthProvider=!0}async authenticate(e){throw new Error(`Not Implemented: PolkadotAuthProvider#authenticate, ${e}`)}async createLink(e){const{message:t,timestamp:n}=at.getConsentMessage(e),r=(i=t,`0x${st.toString(st.fromString(i),"base16")}`);var i;const o=await this.accountId();return{version:2,type:"eoa",message:r,signature:(await this.provider.signRaw({address:this.address,data:r,type:"bytes"})).signature,account:o.toString(),timestamp:n}}async accountId(){return new ot.AccountID({address:this.address,chainId:"polkadot:b0a8d493285c2df73290dfb7e61f870f"})}withAddress(e){return new ut(this.provider,e)}}tt.PolkadotAuthProvider=ut;var ct={},lt=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),ft=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ht=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&lt(t,e,n);return ft(t,e),t};Object.defineProperty(ct,"__esModule",{value:!0}),ct.toSignedPayload=ct.toPayload=ct.EosioAuthProvider=void 0;const dt=Y,pt=fe,vt=J,yt=ht(de),bt=ht(S);class mt{constructor(e,t){this.provider=e,this.address=t,this.isAuthProvider=!0}async accountId(){const e=gt(await this.provider.getChainId());return new dt.AccountID({address:this.address,chainId:`eosio:${e}`})}async authenticate(e){const t=await this.accountId(),n=await _t(e,t,this.provider),r=bt.fromString(n),i=yt.hash(r);return`0x${bt.toString(i,"base16")}`}async createLink(e){const t=pt.getConsentMessage(e),n=await this.accountId(),r=await _t(t.message,n,this.provider);return{version:1,type:"eosio",message:t.message,signature:r,account:n.toString(),timestamp:t.timestamp}}withAddress(e){return new mt(this.provider,e)}}function gt(e){return e.substr(0,32)}function wt(e,t){const{address:n,chainId:r}=t,i=`${e} [For: ${n} on chain: ${r}]`;return o=12,i.replace(/\s/g," ").replace(new RegExp(`(\\S{${o}})`,"g"),"$1 ");var o}async function _t(e,t,n){t=vt.normalizeAccountId(t);const{chainId:{reference:r},address:i}=t,o=await n.getAccountName(),a=gt(await n.getChainId());if(a!==r)throw new Error(`Provider returned a different chainId than requested [returned: ${a}, requested: ${r}]`);if(o!==i)throw new Error(`Provider returned a different account than requested [returned: ${o}, requested: ${i}]`);const s=wt(e,t),[u]=await n.getKeys();return n.signArbitrary(u,s)}ct.EosioAuthProvider=mt,ct.toPayload=wt,ct.toSignedPayload=_t;var Et={},xt=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),kt=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),St=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&xt(t,e,n);return kt(t,e),t};Object.defineProperty(Et,"__esModule",{value:!0}),Et.CosmosAuthProvider=Et.getMetaData=Et.asTransaction=void 0;const At=Y,Ot=fe,Pt=de,It=St(S),Tt=e=>It.toString(It.fromString(e),"base64pad");function jt(e,t){return{fee:{amount:[{amount:"0",denom:""}],gas:"0"},memo:t,msg:[{type:"cosmos-sdk/MsgSend",value:{from_address:e,to_address:e,amount:[{amount:"0",denom:"0"}]}}]}}function Nt(){return{account_number:"1",chain_id:"cosmos",sequence:"0"}}Et.asTransaction=jt,Et.getMetaData=Nt;class Lt{constructor(e,t,n){this.provider=e,this.address=t,this.chainRef=n,this.isAuthProvider=!0}async authenticate(e){const t=await this.accountId(),n=Tt(e),r=await this.provider.sign(jt(t.address,n),{account_number:"1",chain_id:"cosmos",sequence:"0"}),i=Pt.hash(It.fromString(JSON.stringify(r.signatures[0])));return`0x${It.toString(i,"base16")}`}async createLink(e){const{message:t,timestamp:n}=Ot.getConsentMessage(e),r=await this.accountId(),i=Tt(t),o=await this.provider.sign(jt(r.address,i),{account_number:"1",chain_id:"cosmos",sequence:"0"});return{version:1,message:t,signature:Tt(JSON.stringify(o.signatures[0])),account:r.toString(),timestamp:n}}async accountId(){return new At.AccountID({address:this.address,chainId:`cosmos:${this.chainRef}`})}withAddress(e){return new Lt(this.provider,e,this.chainRef)}}Et.CosmosAuthProvider=Lt;var Ct={},Dt=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Ut=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Rt=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Dt(t,e,n);return Ut(t,e),t};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.NearAuthProvider=void 0;const Mt=Y,Ft=fe,Bt=de,zt=Rt(S),Ht=e=>zt.toString(zt.fromString(e),"base64pad");class Gt{constructor(e,t,n){this.provider=e,this.address=t,this.chainRef=n,this.isAuthProvider=!0}async authenticate(e){const t=Ht(e),{signature:n}=await this.provider.sign(t),r=Bt.hash(n);return`0x${zt.toString(r,"base16")}`}async createLink(e){const{message:t,timestamp:n}=Ft.getConsentMessage(e),r=Ht(t),{signature:i,account:o}=await this.provider.sign(r);return{version:1,message:t,signature:i,account:new Mt.AccountID({address:o,chainId:`near:${this.chainRef}`}).toString(),timestamp:n}}async accountId(){return new Mt.AccountID({address:this.address,chainId:`near:${this.chainRef}`})}withAddress(e){return new Gt(this.provider,e,this.chainRef)}}Ct.NearAuthProvider=Gt,function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},i=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r};Object.defineProperty(e,"__esModule",{value:!0}),e.NearAuthProvider=e.CosmosAuthProvider=e.PolkadotAuthProvider=e.EosioAuthProvider=e.FilecoinAuthProvider=e.AvalancheAuthProvider=e.EthereumAuthProvider=e.cosmos=e.eosio=e.polkadot=e.filecoin=e.ethereum=void 0,r(W,e),e.ethereum=i(J),r(fe,e),e.filecoin=i(Ve),e.polkadot=i(tt),e.eosio=i(ct),e.cosmos=i(Et);var o=J;Object.defineProperty(e,"EthereumAuthProvider",{enumerable:!0,get:function(){return o.EthereumAuthProvider}});var a=J;Object.defineProperty(e,"AvalancheAuthProvider",{enumerable:!0,get:function(){return a.EthereumAuthProvider}});var s=Ve;Object.defineProperty(e,"FilecoinAuthProvider",{enumerable:!0,get:function(){return s.FilecoinAuthProvider}});var u=ct;Object.defineProperty(e,"EosioAuthProvider",{enumerable:!0,get:function(){return u.EosioAuthProvider}});var c=tt;Object.defineProperty(e,"PolkadotAuthProvider",{enumerable:!0,get:function(){return c.PolkadotAuthProvider}});var l=Et;Object.defineProperty(e,"CosmosAuthProvider",{enumerable:!0,get:function(){return l.CosmosAuthProvider}});var h=Ct;Object.defineProperty(e,"NearAuthProvider",{enumerable:!0,get:function(){return h.NearAuthProvider}})}(K);function $t(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$t(o,r,i,a,s,"next",e)}function s(e){$t(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Jt(e,t,n){return(Jt=Wt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Kt(i,n.prototype),i}).apply(null,arguments)}function Yt(e){var t="function"==typeof Map?new Map:void 0;return(Yt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Jt(e,arguments,Vt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Kt(r,e)})(e)}var Xt,Zt,Qt,en,tn=(function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}(Xt={exports:{}},Xt.exports),Xt.exports);(en=Qt||(Qt={}))[en.PARSE_ERROR=-32700]="PARSE_ERROR",en[en.INVALID_REQUEST=-32600]="INVALID_REQUEST",en[en.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",en[en.INVALID_PARAMS=-32602]="INVALID_PARAMS",en[en.INTERNAL_ERROR=-32603]="INTERNAL_ERROR";var nn=((Zt={})[Qt.PARSE_ERROR]="Parse error",Zt[Qt.INVALID_REQUEST]="Invalid request",Zt[Qt.METHOD_NOT_FOUND]="Method not found",Zt[Qt.INVALID_PARAMS]="Invalid params",Zt[Qt.INTERNAL_ERROR]="Internal error",Zt);function rn(e){return-32e3>=e&&e>=-32099}function on(e){var t;return null!=(t=nn[e.toString()])?t:rn(e)?"Server error":"Application error"}var an=function(e){var t,n;function r(t,n,i){var o;return o=e.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o),r.prototype),o.code=t,o.data=i,o.message=null!=n?n:on(t),o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.fromObject=function(e){return new r(e.code,e.message,e.data)},r.prototype.toObject=function(){return{code:this.code,data:this.data,message:this.message}},r}(Yt(Error));function sn(e){var t=nn[e];return function(n){return new an(e,t,n)}}var un=sn(Qt.PARSE_ERROR),cn=sn(Qt.INVALID_REQUEST),ln=sn(Qt.METHOD_NOT_FOUND),fn=sn(Qt.INVALID_PARAMS),hn=sn(Qt.INTERNAL_ERROR),dn=function(){function e(e){this.connection=e}var t=e.prototype;return t.createID=function(){return((e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t})()},t.request=function(){var e=qt(tn.mark((function e(t,n){var r;return tn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=void 0),e.next=3,this.connection.send({jsonrpc:"2.0",id:this.createID(),method:t,params:n});case 3:if(null!=(r=e.sent)){e.next=6;break}throw new Error("Missing response");case 6:if(null==r.error){e.next=8;break}throw an.fromObject(r.error);case 8:return e.abrupt("return",r.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}();function pn(e,t){return{jsonrpc:"2.0",id:e,error:{code:t,message:on(t)}}}function vn(e,t,n){console.warn("Unhandled handler error",t,n)}function yn(e,t){console.warn("Unhandled invalid message",t)}function bn(e,t){console.warn("Unhandled notification",t)}function mn(e,t){var n,r,i;void 0===t&&(t={});var o=null!=(n=t.onHandlerError)?n:vn,a=null!=(r=t.onInvalidMessage)?r:yn,s=null!=(i=t.onNotification)?i:bn;return function(){var t=qt(tn.mark((function t(n,r){var i,u,c,l,f,h,d;return tn.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.id,"2.0"===r.jsonrpc&&null!=r.method){t.next=6;break}if(null!=i){t.next=5;break}return a(n,r),t.abrupt("return",null);case 5:return t.abrupt("return",pn(i,Qt.INVALID_REQUEST));case 6:if(null!=i){t.next=9;break}return s(n,r),t.abrupt("return",null);case 9:if(null!=(u=e[r.method])){t.next=12;break}return t.abrupt("return",pn(i,Qt.METHOD_NOT_FOUND));case 12:if(t.prev=12,null!=(c=u(n,r.params))){t.next=18;break}t.t0=c,t.next=26;break;case 18:if("function"!=typeof c.then){t.next=24;break}return t.next=21,c;case 21:t.t1=t.sent,t.next=25;break;case 24:t.t1=c;case 25:t.t0=t.t1;case 26:return l=t.t0,t.abrupt("return",{jsonrpc:"2.0",id:i,result:l});case 30:return t.prev=30,t.t2=t.catch(12),t.t2 instanceof an?f=t.t2.toObject():(o(n,r,t.t2),d=null!=(h=t.t2.code)?h:-32e3,f={code:d,message:t.t2.message||on(d)}),t.abrupt("return",{jsonrpc:"2.0",id:i,error:f});case 34:case"end":return t.stop()}}),t,null,[[12,30]])})));return function(e,n){return t.apply(this,arguments)}}()}var gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get ERROR_CODE(){return Qt},ERROR_MESSAGE:nn,RPCClient:dn,RPCError:an,createErrorResponse:pn,createHandler:mn,createInternalError:hn,createInvalidParams:fn,createInvalidRequest:cn,createMethodNotFound:ln,createParseError:un,getErrorMessage:on,isServerError:rn,parseJSON:function(e){try{return JSON.parse(e)}catch(t){throw un()}}}),wn=function(e,t){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _n(e,t){function n(){this.constructor=e}wn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function En(e){return"function"==typeof e}var xn=!1,kn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;xn=e},get useDeprecatedSynchronousErrorHandling(){return xn}};function Sn(e){setTimeout((function(){throw e}),0)}var An={closed:!0,next:function(e){},error:function(e){if(kn.useDeprecatedSynchronousErrorHandling)throw e;Sn(e)},complete:function(){}},On=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function Pn(e){return null!==e&&"object"==typeof e}var In=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Tn=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(En(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(l){t=l instanceof In?jn(l.errors):[l]}}if(On(a)){s=-1;for(var u=a.length;++s<u;){var c=a[s];if(Pn(c))try{c.unsubscribe()}catch(l){t=t||[],l instanceof In?t=t.concat(jn(l.errors)):t.push(l)}}}if(t)throw new In(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function jn(e){return e.reduce((function(e,t){return e.concat(t instanceof In?t.errors:t)}),[])}var Nn=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ln=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=An;break;case 1:if(!n){o.destination=An;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Cn(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Cn(o,n,r,i)}return o}return _n(t,e),t.prototype[Nn]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Tn),Cn=function(e){function t(t,n,r,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return En(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==An&&(En((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return _n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;kn.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=kn.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Sn(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Sn(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};kn.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),kn.useDeprecatedSynchronousErrorHandling)throw n;Sn(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!kn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return kn.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Sn(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Ln);var Dn=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Un(e){return e}function Rn(e){return 0===e.length?Un:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Mn=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof Ln)return e;if(e[Nn])return e[Nn]()}return e||t||n?new Ln(e,t,n):new Ln(An)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||kn.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),kn.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){kn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Ln?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Fn(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Dn]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Rn(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Fn(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Fn(e){if(e||(e=kn.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var Bn=new Mn((function(e){return e.complete()}));function zn(e){return e?function(e){return new Mn((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Bn}function Hn(){}var Gn=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),$n=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}();function qn(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Vn(e,t))}}var Vn=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Kn(e,this.project,this.thisArg))},e}(),Kn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return _n(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Ln);function Wn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Jn=Wn(),Yn=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Xn(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Zn=function(e){if(e&&"function"==typeof e[Dn])return i=e,function(e){var t=i[Dn]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Yn(e))return r=e,function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()};if(Xn(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Sn),e};if(e&&"function"==typeof e[Jn])return t=e,function(e){for(var n=t[Jn]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i,o=Pn(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Qn(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Dn]}(e))return function(e,t){return new Mn((function(n){var r=new Tn;return r.add(t.schedule((function(){var i=e[Dn]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Xn(e))return function(e,t){return new Mn((function(n){var r=new Tn;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Yn(e))return function(e,t){return new Mn((function(n){var r=new Tn,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}(e,t);if(function(e){return e&&"function"==typeof e[Jn]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new Mn((function(n){var r,i=new Tn;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Jn](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var er=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return _n(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Ln),tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _n(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Ln);function nr(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(nr((function(n,r){return(i=e(n,r),o?Qn(i,o):i instanceof Mn?i:new Mn(Zn(i))).pipe(qn((function(e,i){return t(n,e,r,i)})));var i,o}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new rr(e,n))})}var rr=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new ir(e,this.project,this.concurrent))},e}(),ir=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new er(this),n=this.destination;n.add(t);var r=function(e,t){if(!t.closed){if(e instanceof Mn)return e.subscribe(t);var n;try{n=Zn(e)(t)}catch(r){t.error(r)}return n}}(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(tr);function or(e,t,n,r){return En(n)&&(r=n,n=void 0),r?or(e,t,n).pipe(qn((function(e){return On(e)?r.apply(void 0,e):r(e)}))):new Mn((function(r){ar(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function ar(e,t,n,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var a=e;e.addEventListener(t,n,i),o=function(){return a.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var s=e;e.on(t,n),o=function(){return s.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,n),o=function(){return u.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)ar(e[c],t,n,r,i)}r.add(o)}function sr(e,t){return function(n){return n.lift(new ur(e,t))}}var ur=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new cr(e,this.predicate,this.thisArg))},e}(),cr=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return _n(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(Ln);function lr(e){return void 0===e&&(e=null),function(t){return t.lift(new fr(e))}}var fr=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new hr(e,this.defaultValue))},e}(),hr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return _n(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Ln);function dr(e){return void 0===e&&(e=yr),function(t){return t.lift(new pr(e))}}var pr=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new vr(e,this.errorFactory))},e}(),vr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return _n(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(Ln);function yr(){return new $n}function br(e){return function(t){return 0===e?zn():t.lift(new mr(e))}}var mr=function(){function e(e){if(this.total=e,this.total<0)throw new Gn}return e.prototype.call=function(e,t){return t.subscribe(new gr(e,this.total))},e}(),gr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return _n(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(Ln);function wr(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?sr((function(t,n){return e(t,n,r)})):Un,br(1),n?lr(t):dr((function(){return new $n})))}}var _r=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Er(e,this.nextOrObserver,this.error,this.complete))},e}(),Er=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tapNext=Hn,o._tapError=Hn,o._tapComplete=Hn,o._tapError=r||Hn,o._tapComplete=i||Hn,En(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Hn,o._tapError=n.error||Hn,o._tapComplete=n.complete||Hn),o}return _n(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Ln);function xr(e,t){var n=or(e,"message");if(null==t)return n;var r,i="function"==typeof t?t:(r=t,Array.isArray(r)||(r=[r]),function(e){return r.includes(e.origin)});return n.pipe(sr(i))}function kr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Sr(e,t){return e(t={exports:{}},t.exports),t.exports}var Ar=Sr((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function Or(e,t,n){void 0===n&&(n={});var r=mn(e,n),i=function(e){return function(t){if(!0!==t.__tw)throw new Error("Input is not a wrapped message");if("string"!=typeof t.ns)throw new Error("Invalid namespace type for wrapped message: expected a string, got "+typeof t.ns);if(t.ns!==e)throw new Error("Invalid namespace for wrapped message: expected "+e+", got "+t.ns);return t.msg}}(t);return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rn(e)}(qn((function(e){try{var t=i(e.data);return t.method?{type:"request",message:e,request:t}:null}catch(n){return null}})),sr((function(e){return null!==e})),nr(function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){kr(o,r,i,a,s,"next",e)}function s(e){kr(o,r,i,a,s,"throw",e)}a(void 0)}))}}(Ar.mark((function e(t){return Ar.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.message,e.t1=t.request,e.next=4,r(t.message,t.request);case 4:return e.t2=e.sent,e.abrupt("return",{type:"handled",message:e.t0,request:e.t1,response:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function Pr(e){var t,n,r,i=e.filter,o=e.methods,a=e.namespace,s=e.target,u=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["filter","methods","namespace","target"]),c=function(e){return function(t){return{__tw:!0,ns:e,msg:t}}}(a);return xr(s,i).pipe(Or(o,a,u),(t=function(e){var t;null!=e.response&&(null!=(t=e.message.source)?t:window).postMessage(c(e.response),e.message.origin||"*")},function(e){return e.lift(new _r(t,n,r))}))}function Ir(e,t,n){return void 0===n&&(n=window),Pr({methods:t,namespace:e,target:n})}function Tr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function jr(e,t){return e(t={exports:{}},t.exports),t.exports}var Nr=jr((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}})),Lr="position: fixed; width:0; height:0; border:0; border:none !important";function Cr(e){var t=function(e){return function(t,n,r){void 0===t&&(t=!1),void 0===n&&(n="245px"),void 0===r&&(r="440px"),e.style="border:none; border:0; z-index: 99997; position: fixed; max-width: 100%; width: "+r+"; height: "+n+"; "+(t?"bottom: 0px; left: 0px;":"top: 10px; right: 10px")}}(e),n=function(e){return function(){return e.style=Lr}}(e);return Ir("3id-connect-iframedisplay",{hide:function(){n()},display:function(e,n){var r=n.mobile,i=n.height,o=n.width;t(r,i,o)}})}function Dr(e){var t,n;return Ir("3id-connect-managedisplay",{display:(n=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Tr(o,r,i,a,s,"next",e)}function s(e){Tr(o,r,i,a,s,"throw",e)}a(void 0)}))}}(Nr.mark((function n(r,i){var o,a,s;return Nr.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=i.accountId,t=Ur(e+"?accountId="+o),document.body.appendChild(t),n.next=5,new Promise((function(e){t.onload=e}));case 5:return a=xr(window),s=function(e){return"3id-connect-management"===e.data.ns},n.next=9,a.pipe(wr(s)).toPromise();case 9:t.remove();case 10:case"end":return n.stop()}}),n)}))),function(e,t){return n.apply(this,arguments)})})}var Ur=function(e){var t=document.createElement("iframe");return t.name="threeid-connect-manage",t.className="threeid-connect-manage",t.src=e,t.allowtransparency=!1,t.style="border:none; border:0; z-index: 99998; position: fixed; width: 100%; height: 100%; top: 0; left: 0;",t};function Rr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Mr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Rr(o,r,i,a,s,"next",e)}function s(e){Rr(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Fr(e,t){return e(t={exports:{}},t.exports),t.exports}var Br=Fr((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}));function zr(e,t){return void 0===t&&(t="3id-connect-authprovider"),Ir(t,{accountId:(i=Mr(Br.mark((function t(){return Br.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.accountId();case 2:return t.abrupt("return",t.sent.toString());case 3:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)}),authenticate:(r=Mr(Br.mark((function t(n,r){var i;return Br.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.message,t.next=3,e.authenticate(i);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(e,t){return r.apply(this,arguments)}),createLink:(n=Mr(Br.mark((function t(n,r){var i;return Br.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.did,t.next=3,e.createLink(i);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(e,t){return n.apply(this,arguments)})});var n,r,i}var Hr={},Gr={},$r={exports:{}},qr=1;var Vr,Kr,Wr,Jr={nextValue:function(){return(qr=(9301*qr+49297)%233280)/233280},seed:function(e){qr=e}},Yr="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function Xr(){Wr=!1}function Zr(e){if(e){if(e!==Vr){if(e.length!==Yr.length)throw new Error("Custom alphabet for shortid must be "+Yr.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+Yr.length+" unique characters. These characters were not unique: "+t.join(", "));Vr=e,Xr()}}else Vr!==Yr&&(Vr=Yr,Xr())}function Qr(){return Wr||(Wr=function(){Vr||Zr(Yr);for(var e,t=Vr.split(""),n=[],r=Jr.nextValue();t.length>0;)r=Jr.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}var ei,ti={get:function(){return Vr||Yr},characters:function(e){return Zr(e),Vr},seed:function(e){Jr.seed(e),Kr!==e&&(Xr(),Kr=e)},lookup:function(e){return Qr()[e]},shuffled:Qr},ni="object"==typeof window&&(window.crypto||window.msCrypto);ei=ni&&ni.getRandomValues?function(e){return ni.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t};var ri=ti,ii=ei,oi=function(e,t,n){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*n/t.length),o="";;)for(var a=e(i),s=i;s--;)if((o+=t[a[s]&r]||"").length===+n)return o};var ai,si,ui=function(e){for(var t,n=0,r="";!t;)r+=oi(ii,ri.get(),1),t=e<Math.pow(16,n+1),n++;return r};var ci=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===si?ai++:(ai=0,si=n),t+=ui(7),t+=ui(e),ai>0&&(t+=ui(ai)),t+=ui(n)},li=ti;var fi=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+li.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)};!function(e){var t=ti,n=ci,r=fi,i=0;function o(){return n(i)}e.exports=o,e.exports.generate=o,e.exports.seed=function(n){return t.seed(n),e.exports},e.exports.worker=function(t){return i=t,e.exports},e.exports.characters=function(e){return void 0!==e&&t.characters(e),t.shuffled()},e.exports.isValid=r}($r);var hi=$r.exports;Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.default=vi,Gr.call=function(e){return vi(e).apply(null,[].slice.call(arguments,1))};var di,pi=(di=hi)&&di.__esModule?di:{default:di};function vi(e,t){var n=(t=t||{}).addListener||window.addEventListener,r=t.removeListener||window.removeEventListener,i=t.postMessage||window.postMessage,o=t.targetOrigin||"*",a=t.getMessageData||function(e){return e.data};return function(){var t={sender:"postmsg-rpc/client",id:(0,pi.default)(),func:e,args:Array.from(arguments)},s=void 0,u=new Promise((function(u,c){var l=function n(){var i=a.apply(null,arguments);if(i&&"postmsg-rpc/server"===i.sender&&i.id===t.id){if(r("message",n),i.err){var o=new Error("Unexpected error calling "+e);return Object.assign(o,i.err),c(o)}u(i.res)}};s=function(){r("message",l);var t=new Error("Canceled call to "+e);t.isCanceled=!0,c(t)},n("message",l),i(t,o)}));return u.cancel=function(){return s()},u}}var yi={};function bi(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function mi(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bi(o,r,i,a,s,"next",e)}function s(e){bi(o,r,i,a,s,"throw",e)}a(void 0)}))}}function gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wi(e,t,n){return t&&gi(e.prototype,t),n&&gi(e,n),e}function _i(e,t){return e(t={exports:{}},t.exports),t.exports}Object.defineProperty(yi,"__esModule",{value:!0}),yi.default=function(e,t,n){var r=(n=n||{}).addListener||window.addEventListener,i=n.removeListener||window.removeEventListener,o=n.postMessage||window.postMessage,a=n.targetOrigin||"*",s=n.getMessageData||function(e){return e.data},u=n.isCallback||!1,c=function(){var n=s.apply(null,arguments);if(n&&"postmsg-rpc/client"===n.sender&&n.func===e){var r={sender:"postmsg-rpc/server",id:n.id},i=function(e){r.res=e,o(r,a)},c=function(e){r.err=Object.assign({message:e.message},e.output&&e.output.payload),o(r,a)};if(u)t.apply(null,n.args.concat((function(e,t){if(e)return c(e);i(t)})));else{var l=t.apply(null,n.args);Promise.resolve(l).then(i).catch(c)}}};return r("message",c),{close:function(){return i("message",c)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Gr;Object.defineProperty(e,"caller",{enumerable:!0,get:function(){return r(t).default}}),Object.defineProperty(e,"call",{enumerable:!0,get:function(){return t.call}});var n=yi;function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"expose",{enumerable:!0,get:function(){return r(n).default}})}(Hr);var Ei,xi=_i((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}})),ki=function(){function e(e,t){this.provider=e,this.accountId=t}return e.prototype.send=function(){var e=mi(xi.mark((function e(t,n){return xi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params=Object.assign({},t.params,{accountId:this.accountId}),e.next=3,this.provider.send(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),wi(e,[{key:"isDidProvider",get:function(){return!0}}]),e}(),Si="https://app-clay.3idconnect.org",Ai=function(e){return{connect_iframe:e,manage_iframe:e+"/management/index.html"}},Oi={"dev-unstable":Ai("https://app-dev.3idconnect.org"),"testnet-clay":Ai(Si),mainnet:Ai("https://app.3idconnect.org"),local:Ai("http://localhost:30001")},Pi=function(e){var t,n=Hr.caller("send",{postMessage:e});return{send:(t=mi(xi.mark((function e(t){return xi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,n(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}},Ii=function(){function e(e,t){var n,r=this;this._authProviderSubscription=null,this._connected=!1,function(){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("ThreeIdConnect not supported in this enviroment")}(),e&&Object.keys(Oi).includes(e)?(n=Oi[e].connect_iframe,t=Oi[e].manage_iframe):n=e,this.iframe=function(e){var t=document.createElement("iframe");return t.name="threeid-connect",t.className="threeid-connect",t.src=e,t.style=Lr,t.allowTransparency=!0,t.frameBorder=0,t}(n||"https://app-clay.3idconnect.org"),this.manageUrl=t||"https://app-clay.3idconnect.org/management/index.html",this.iframeLoadedPromise=new Promise((function(e){r.iframe.onload=function(){e()}})),document.body.appendChild(this.iframe)}var t=e.prototype;return t.connect=function(){var e=mi(xi.mark((function e(t){return xi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.setAuthProvider(t);case 3:return e.next=5,this.iframeLoadedPromise;case 5:this.postMessage=this.iframe.contentWindow.postMessage.bind(this.iframe.contentWindow),zr(t).subscribe(),Cr(this.iframe).subscribe(),Dr(this.manageUrl).subscribe(),this.RPCProvider=Pi(this.postMessage),this.RPCClient=new dn(this.RPCProvider),this._connected=!0;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setAuthProvider=function(){var e=mi(xi.mark((function e(t){return xi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.authProvider=t,e.next=3,this.authProvider.accountId();case 3:this.accountId=e.sent.toString();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getDidProvider=function(){if(!this.authProvider)throw new Error("setAuthProvider required");return new ki(this.RPCProvider,this.accountId)},wi(e,[{key:"connected",get:function(){return this._connected}}]),e}(),Ti={},ji={},Ni={},Li={},Ci={},Di=f&&f.__extends||(Ei=function(e,t){return(Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ei(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(Ci,"__esModule",{value:!0});var Ui=Object.prototype.hasOwnProperty;function Ri(e,t){return Ui.call(e,t)}function Mi(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)Ri(e,r)&&t.push(r);return t}function Fi(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Bi(e,t){var n;for(var r in e)if(Ri(e,r)){if(e[r]===t)return Fi(r)+"/";if("object"==typeof e[r]&&""!=(n=Bi(e[r],t)))return Fi(r)+"/"+n}return""}function zi(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}Ci.hasOwnProperty=Ri,Ci._objectKeys=Mi,Ci._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},Ci.isInteger=function(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},Ci.escapePathComponent=Fi,Ci.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},Ci._getPathRecursive=Bi,Ci.getPath=function(e,t){if(e===t)return"/";var n=Bi(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},Ci.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){var i=Mi(t),o=i.length;for(n=0;n<o;n++)if(e(t[i[n]]))return!0}return!1};var Hi=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,zi(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=zi(t,{name:n,index:r,operation:i,tree:o}),s}return Di(t,e),t}(Error);Ci.PatchError=Hi;var Gi={},$i=Array.isArray,qi=Object.keys,Vi=Object.prototype.hasOwnProperty,Ki=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,o,a=$i(t),s=$i(n);if(a&&s){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var u=t instanceof Date,c=n instanceof Date;if(u!=c)return!1;if(u&&c)return t.getTime()==n.getTime();var l=t instanceof RegExp,f=n instanceof RegExp;if(l!=f)return!1;if(l&&f)return t.toString()==n.toString();var h=qi(t);if((i=h.length)!==qi(n).length)return!1;for(r=i;0!=r--;)if(!Vi.call(n,h[r]))return!1;for(r=i;0!=r--;)if(!e(t[o=h[r]],n[o]))return!1;return!0}return t!=t&&n!=n};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ki,n=Ci;e.JsonPatchError=n.PatchError,e.deepClone=n._deepClone;var r={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,r){var i=o(r,this.path);i&&(i=n._deepClone(i));var s=a(r,{op:"remove",path:this.from}).removed;return a(r,{op:"add",path:this.path,value:s}),{newDocument:r,removed:i}},copy:function(e,t,r){var i=o(r,this.from);return a(r,{op:"add",path:this.path,value:n._deepClone(i)}),{newDocument:r}},test:function(e,n,r){return{newDocument:r,test:t(e[n],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},i={add:function(e,t,r){return n.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:r.move,copy:r.copy,test:r.test,_get:r._get};function o(e,t){if(""==t)return e;var n={op:"_get",path:t};return a(e,n),n.value}function a(a,s,u,l,f,h){if(void 0===u&&(u=!1),void 0===l&&(l=!0),void 0===f&&(f=!0),void 0===h&&(h=0),u&&("function"==typeof u?u(s,0,a,s.path):c(s,0)),""===s.path){var d={newDocument:a};if("add"===s.op)return d.newDocument=s.value,d;if("replace"===s.op)return d.newDocument=s.value,d.removed=a,d;if("move"===s.op||"copy"===s.op)return d.newDocument=o(a,s.from),"move"===s.op&&(d.removed=a),d;if("test"===s.op){if(d.test=t(a,s.value),!1===d.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return d.newDocument=a,d}if("remove"===s.op)return d.removed=a,d.newDocument=null,d;if("_get"===s.op)return s.value=a,d;if(u)throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",h,s,a);return d}l||(a=n._deepClone(a));var p=(s.path||"").split("/"),v=a,y=1,b=p.length,m=void 0,g=void 0,w=void 0;for(w="function"==typeof u?u:c;;){if(g=p[y],f&&"__proto__"==g)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(u&&void 0===m&&(void 0===v[g]?m=p.slice(0,y).join("/"):y==b-1&&(m=s.path),void 0!==m&&w(s,0,a,m)),y++,Array.isArray(v)){if("-"===g)g=v.length;else{if(u&&!n.isInteger(g))throw new e.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",h,s,a);n.isInteger(g)&&(g=~~g)}if(y>=b){if(u&&"add"===s.op&&g>v.length)throw new e.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",h,s,a);if(!1===(d=i[s.op].call(s,v,g,a)).test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return d}}else if(g&&-1!=g.indexOf("~")&&(g=n.unescapePathComponent(g)),y>=b){if(!1===(d=r[s.op].call(s,v,g,a)).test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return d}v=v[g]}}function s(t,r,i,o,s){if(void 0===o&&(o=!0),void 0===s&&(s=!0),i&&!Array.isArray(r))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(t=n._deepClone(t));for(var u=new Array(r.length),c=0,l=r.length;c<l;c++)u[c]=a(t,r[c],i,!0,s,c),t=u[c].newDocument;return u.newDocument=t,u}function u(t,n,r){var i=a(t,n);if(!1===i.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",r,n,t);return i.newDocument}function c(t,i,o,a){if("object"!=typeof t||null===t||Array.isArray(t))throw new e.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",i,t,o);if(!r[t.op])throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,o);if("string"!=typeof t.path)throw new e.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",i,t,o);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new e.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",i,t,o);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new e.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",i,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",i,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&n.hasUndefined(t.value))throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",i,t,o);if(o)if("add"==t.op){var s=t.path.split("/").length,u=a.split("/").length;if(s!==u+1&&s!==u)throw new e.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",i,t,o)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==a)throw new e.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",i,t,o)}else if("move"===t.op||"copy"===t.op){var c=l([{op:"_get",path:t.from,value:void 0}],o);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new e.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",i,t,o)}}function l(t,r,i){try{if(!Array.isArray(t))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)s(n._deepClone(r),n._deepClone(t),i||!0);else{i=i||c;for(var o=0;o<t.length;o++)i(t[o],o,r,void 0)}}catch(a){if(a instanceof e.JsonPatchError)return a;throw a}}e.getValueByPointer=o,e.applyOperation=a,e.applyPatch=s,e.applyReducer=u,e.validator=c,e.validate=l,e.default={JsonPatchError:e.JsonPatchError,deepClone:e.deepClone,getValueByPointer:o,applyOperation:a,applyPatch:s,applyReducer:u,validator:c,validate:l}}(Gi);var Wi=f&&f.__assign||function(){return(Wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(Li,"__esModule",{value:!0});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var Ji=Ci,Yi=Gi,Xi=Gi;Li.applyOperation=Xi.applyOperation,Li.applyPatch=Xi.applyPatch,Li.applyReducer=Xi.applyReducer,Li.getValueByPointer=Xi.getValueByPointer,Li.validate=Xi.validate,Li.validator=Xi.validator;var Zi=Ci;Li.JsonPatchError=Zi.PatchError,Li.deepClone=Zi._deepClone,Li.escapePathComponent=Zi.escapePathComponent,Li.unescapePathComponent=Zi.unescapePathComponent;var Qi=new WeakMap,eo=function(e){this.observers=new Map,this.obj=e},to=function(e,t){this.callback=e,this.observer=t};function no(e,t){t.unobserve()}function ro(e,t){var n,r=function(e){return Qi.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new eo(e),Qi.set(e,r);if(n)return n;if(n={},r.value=Ji._deepClone(e),t){n.callback=t,n.next=null;var o=function(){io(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){io(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new to(t,n)),n}function io(e,t){void 0===t&&(t=!1);var n=Qi.get(e.object);oo(n.value,e.object,e.patches,"",t),e.patches.length&&Yi.applyPatch(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function oo(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=Ji._objectKeys(t),a=Ji._objectKeys(e),s=!1,u=a.length-1;u>=0;u--){var c=e[f=a[u]];if(!Ji.hasOwnProperty(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ji.escapePathComponent(f),value:Ji._deepClone(c)}),n.push({op:"remove",path:r+"/"+Ji.escapePathComponent(f)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var l=t[f];"object"==typeof c&&null!=c&&"object"==typeof l&&null!=l?oo(c,l,n,r+"/"+Ji.escapePathComponent(f),i):c!==l&&(i&&n.push({op:"test",path:r+"/"+Ji.escapePathComponent(f),value:Ji._deepClone(c)}),n.push({op:"replace",path:r+"/"+Ji.escapePathComponent(f),value:Ji._deepClone(l)}))}}if(s||o.length!=a.length)for(u=0;u<o.length;u++){var f=o[u];Ji.hasOwnProperty(e,f)||void 0===t[f]||n.push({op:"add",path:r+"/"+Ji.escapePathComponent(f),value:Ji._deepClone(t[f])})}}}function ao(e,t,n){void 0===n&&(n=!1);var r=[];return oo(e,t,r,"",n),r}Li.unobserve=no,Li.observe=ro,Li.generate=io,Li.compare=ao;var so=Gi,uo=Ci;Li.default=Wi({},so,{unobserve:no,observe:ro,generate:io,compare:ao,JsonPatchError:uo.PatchError,deepClone:Ji._deepClone,escapePathComponent:Ji.escapePathComponent,unescapePathComponent:uo.unescapePathComponent});var co={},lo={},fo={};Object.defineProperty(fo,"__esModule",{value:!0});var ho=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t},e}();fo.BrowserRandomSource=ho;var po={};Object.defineProperty(po,"__esModule",{value:!0});var vo=Oe,yo=function(){function e(){if(this.isAvailable=!1,this.isInstantiated=!1,void 0!==h){var e=A;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var n=new Uint8Array(e),r=0;r<n.length;r++)n[r]=t[r];return vo.wipe(t),n},e}();po.NodeRandomSource=yo,Object.defineProperty(lo,"__esModule",{value:!0});var bo=fo,mo=po,go=function(){function e(){return this.isAvailable=!1,this.name="",this._source=new bo.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new mo.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},e}();lo.SystemRandomSource=go,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=lo,n=pe,r=Oe;function i(t,n){return void 0===n&&(n=e.defaultRandomSource),n.randomBytes(t)}e.defaultRandomSource=new t.SystemRandomSource,e.randomBytes=i,e.randomUint32=function(t){void 0===t&&(t=e.defaultRandomSource);var o=i(4,t),a=n.readUint32LE(o);return r.wipe(o),a};var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(t,n,a){if(void 0===n&&(n=o),void 0===a&&(a=e.defaultRandomSource),n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");for(var s="",u=n.length,c=256-256%u;t>0;){for(var l=i(Math.ceil(256*t/c),a),f=0;f<l.length&&t>0;f++){var h=l[f];h<c&&(s+=n.charAt(h%u),t--)}r.wipe(l)}return s}e.randomString=a,e.randomStringForEntropy=function(t,n,r){return void 0===n&&(n=o),void 0===r&&(r=e.defaultRandomSource),a(Math.ceil(t/(Math.log(n.length)/Math.LN2)),n,r)}}(co);var wo={},_o={};Object.defineProperty(_o,"__esModule",{value:!0});var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});var xo={};Object.defineProperty(xo,"__esModule",{value:!0});var ko={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SyncOptions=void 0,(t=e.SyncOptions||(e.SyncOptions={}))[t.PREFER_CACHE=0]="PREFER_CACHE",t[t.SYNC_ALWAYS=1]="SYNC_ALWAYS",t[t.NEVER_SYNC=2]="NEVER_SYNC"}(ko);var So={},Ao={exports:{}};!function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Boolean]",a="[object Date]",s="[object Function]",u="[object GeneratorFunction]",c="[object Map]",l="[object Number]",h="[object Object]",d="[object Promise]",p="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",m="[object WeakMap]",g="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",I="[object Uint32Array]",T=/\w*$/,j=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,L={};L[i]=L["[object Array]"]=L[g]=L[w]=L[o]=L[a]=L[_]=L[E]=L[x]=L[k]=L[S]=L[c]=L[l]=L[h]=L[p]=L[v]=L[y]=L[b]=L[A]=L[O]=L[P]=L[I]=!0,L["[object Error]"]=L[s]=L[m]=!1;var C="object"==typeof f&&f&&f.Object===Object&&f,D="object"==typeof self&&self&&self.Object===Object&&self,U=C||D||Function("return this")(),R=t&&!t.nodeType&&t,M=R&&e&&!e.nodeType&&e,F=M&&M.exports===R;function B(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function H(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function G(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function $(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function q(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var K,W=Array.prototype,J=Function.prototype,Y=Object.prototype,X=U["__core-js_shared__"],Z=(K=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",Q=J.toString,ee=Y.hasOwnProperty,te=Y.toString,ne=RegExp("^"+Q.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=F?U.Buffer:void 0,ie=U.Symbol,oe=U.Uint8Array,ae=q(Object.getPrototypeOf,Object),se=Object.create,ue=Y.propertyIsEnumerable,ce=W.splice,le=Object.getOwnPropertySymbols,fe=re?re.isBuffer:void 0,he=q(Object.keys,Object),de=Me(U,"DataView"),pe=Me(U,"Map"),ve=Me(U,"Promise"),ye=Me(U,"Set"),be=Me(U,"WeakMap"),me=Me(Object,"create"),ge=Ge(de),we=Ge(pe),_e=Ge(ve),Ee=Ge(ye),xe=Ge(be),ke=ie?ie.prototype:void 0,Se=ke?ke.valueOf:void 0;function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){this.__data__=new Oe(e)}function Te(e,t){var n=qe(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!ee.call(e,a)||o&&("length"==a||ze(a,r))||n.push(a);return n}function je(e,t,n){var r=e[t];ee.call(e,t)&&$e(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Ne(e,t){for(var n=e.length;n--;)if($e(e[n][0],t))return n;return-1}function Le(e,t,n,r,f,d,m){var j;if(r&&(j=d?r(e,f,d,m):r(e)),void 0!==j)return j;if(!Je(e))return e;var N=qe(e);if(N){if(j=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,j)}else{var C=Be(e),D=C==s||C==u;if(Ke(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(C==h||C==i||D&&!d){if(G(e))return d?e:{};if(j=function(e){return"function"!=typeof e.constructor||He(e)?{}:(t=ae(e),Je(t)?se(t):{});var t}(D?{}:e),!t)return function(e,t){return Ue(e,Fe(e),t)}(e,function(e,t){return e&&Ue(t,Ye(t),e)}(j,e))}else{if(!L[C])return d?e:{};j=function(e,t,n,r){var i=e.constructor;switch(t){case g:return De(e);case o:case a:return new i(+e);case w:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case _:case E:case x:case k:case S:case A:case O:case P:case I:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case c:return function(e,t,n){return H(t?n($(e),!0):$(e),B,new e.constructor)}(e,r,n);case l:case y:return new i(e);case p:return function(e){var t=new e.constructor(e.source,T.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return function(e,t,n){return H(t?n(V(e),!0):V(e),z,new e.constructor)}(e,r,n);case b:return s=e,Se?Object(Se.call(s)):{}}var s}(e,C,Le,t)}}m||(m=new Ie);var U=m.get(e);if(U)return U;if(m.set(e,j),!N)var R=n?function(e){return function(e,t,n){var r=t(e);return qe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ye,Fe)}(e):Ye(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(R||e,(function(i,o){R&&(i=e[o=i]),je(j,o,Le(i,t,n,r,o,e,m))})),j}function Ce(e){return!(!Je(e)||(t=e,Z&&Z in t))&&(We(e)||G(e)?ne:j).test(Ge(e));var t}function De(e){var t=new e.constructor(e.byteLength);return new oe(t).set(new oe(e)),t}function Ue(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;je(n,a,void 0===s?e[a]:s)}return n}function Re(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(n)?n:void 0}Ae.prototype.clear=function(){this.__data__=me?me(null):{}},Ae.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ae.prototype.get=function(e){var t=this.__data__;if(me){var r=t[e];return r===n?void 0:r}return ee.call(t,e)?t[e]:void 0},Ae.prototype.has=function(e){var t=this.__data__;return me?void 0!==t[e]:ee.call(t,e)},Ae.prototype.set=function(e,t){return this.__data__[e]=me&&void 0===t?n:t,this},Oe.prototype.clear=function(){this.__data__=[]},Oe.prototype.delete=function(e){var t=this.__data__,n=Ne(t,e);return!(n<0)&&(n==t.length-1?t.pop():ce.call(t,n,1),!0)},Oe.prototype.get=function(e){var t=this.__data__,n=Ne(t,e);return n<0?void 0:t[n][1]},Oe.prototype.has=function(e){return Ne(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var n=this.__data__,r=Ne(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new Ae,map:new(pe||Oe),string:new Ae}},Pe.prototype.delete=function(e){return Re(this,e).delete(e)},Pe.prototype.get=function(e){return Re(this,e).get(e)},Pe.prototype.has=function(e){return Re(this,e).has(e)},Pe.prototype.set=function(e,t){return Re(this,e).set(e,t),this},Ie.prototype.clear=function(){this.__data__=new Oe},Ie.prototype.delete=function(e){return this.__data__.delete(e)},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Oe){var r=n.__data__;if(!pe||r.length<199)return r.push([e,t]),this;n=this.__data__=new Pe(r)}return n.set(e,t),this};var Fe=le?q(le,Object):function(){return[]},Be=function(e){return te.call(e)};function ze(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function He(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Y)}function Ge(e){if(null!=e){try{return Q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function $e(e,t){return e===t||e!=e&&t!=t}(de&&Be(new de(new ArrayBuffer(1)))!=w||pe&&Be(new pe)!=c||ve&&Be(ve.resolve())!=d||ye&&Be(new ye)!=v||be&&Be(new be)!=m)&&(Be=function(e){var t=te.call(e),n=t==h?e.constructor:void 0,r=n?Ge(n):void 0;if(r)switch(r){case ge:return w;case we:return c;case _e:return d;case Ee:return v;case xe:return m}return t});var qe=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!We(e)}var Ke=fe||function(){return!1};function We(e){var t=Je(e)?te.call(e):"";return t==s||t==u}function Je(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ye(e){return Ve(e)?Te(e):function(e){if(!He(e))return he(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return Le(e,!0,!0)}}(Ao,Ao.exports);var Oo={},Po={},Io={exports:{}};var To=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=r}var a=e.length,s=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var n=0;if(" "!==e[n]){for(var r=0,i=0;e[n]===s;)r++,n++;for(var o=(e.length-n)*u+1>>>0,c=new Uint8Array(o);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var f=0,h=o-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=a*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,n++}if(" "!==e[n]){for(var d=o-i;d!==o&&0===c[d];)d++;for(var p=new Uint8Array(r+(o-d)),v=r;d!==o;)p[v++]=c[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var f=t[i],h=0,d=u-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,i++}for(var p=u-r;p!==u&&0===l[p];)p++;for(var v=s.repeat(n);p<u;++p)v+=e.charAt(l[p]);return v},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}};const jo=new TextDecoder,No=new TextEncoder;var Lo={decodeText:e=>jo.decode(e),encodeText:e=>No.encode(e),concat:function(e,t){const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}};const{encodeText:Co}=Lo;var Do={rfc4648:e=>t=>({encode:n=>((e,t,n)=>{const r="="===t[t.length-1],i=(1<<n)-1;let o="",a=0,s=0;for(let u=0;u<e.length;++u)for(s=s<<8|e[u],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o})(n,t,e),decode:n=>((e,t,n)=>{const r={};for(let c=0;c<t.length;++c)r[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,s=0,u=0;for(let c=0;c<i;++c){const t=r[e[c]];if(void 0===t)throw new SyntaxError("Invalid character "+e[c]);s=s<<n|t,a+=n,a>=8&&(a-=8,o[u++]=255&s>>a)}if(a>=n||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return o})(n,t,e)})};const Uo=To,Ro=class{constructor(e,t,n,r){this.name=e,this.code=t,this.codeBuf=Co(this.code),this.alphabet=r,this.codec=n(r)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}},{rfc4648:Mo}=Do,{decodeText:Fo,encodeText:Bo}=Lo,zo=[["identity","\0",()=>({encode:Fo,decode:Bo}),""],["base2","0",Mo(1),"01"],["base8","7",Mo(3),"01234567"],["base10","9",Uo,"0123456789"],["base16","f",Mo(4),"0123456789abcdef"],["base16upper","F",Mo(4),"0123456789ABCDEF"],["base32hex","v",Mo(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Mo(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Mo(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Mo(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Mo(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Mo(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Mo(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Mo(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Mo(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Uo,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Uo,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Uo,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Uo,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Mo(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Mo(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Mo(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Mo(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ho=zo.reduce(((e,t)=>(e[t[0]]=new Ro(t[0],t[1],t[2],t[3]),e)),{}),Go=zo.reduce(((e,t)=>(e[t[1]]=Ho[t[0]],e)),{});var $o={names:Ho,codes:Go};!function(e,t){const n=$o,{encodeText:r,decodeText:i,concat:o}=Lo;function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:n,codeBuf:r}=a(e);return function(e,t){a(e).decode(i(t))}(n,t),o([r,t],r.length+t.length)}).encode=function(e,t){const n=a(e),i=r(n.encode(t));return o([n.codeBuf,i],n.codeBuf.length+i.length)},t.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(t){return!1}},t.encoding=a,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const s=Object.freeze(n.names),u=Object.freeze(n.codes);t.names=s,t.codes=u}(Io,Io.exports);var qo=function e(t,n,r){n=n||[];var i=r=r||0;for(;t>=Vo;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-i+1,n},Vo=Math.pow(2,31);var Ko=function e(t,n){var r,i=0,o=0,a=n=n||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=a-n,i};var Wo=Math.pow(2,7),Jo=Math.pow(2,14),Yo=Math.pow(2,21),Xo=Math.pow(2,28),Zo=Math.pow(2,35),Qo=Math.pow(2,42),ea=Math.pow(2,49),ta=Math.pow(2,56),na=Math.pow(2,63),ra={encode:qo,decode:Ko,encodingLength:function(e){return e<Wo?1:e<Jo?2:e<Yo?3:e<Xo?4:e<Zo?5:e<Qo?6:e<ea?7:e<ta?8:e<na?9:10}};var ia={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})};const oa=Io.exports,aa=ra,{names:sa}=ia,ua=O,ca=P,la=I,fa={};for(const lA in sa){const e=lA;fa[sa[e]]=e}function ha(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(e.length<2)throw new Error("multihash too short. must be > 2 bytes.");const t=aa.decode(e);if(!va(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);e=e.slice(aa.decode.bytes);const n=aa.decode(e);if(n<0)throw new Error(`multihash invalid length: ${n}`);if((e=e.slice(aa.decode.bytes)).length!==n)throw new Error(`multihash length inconsistent: 0x${ua(e,"base16")}`);return{code:t,name:fa[t],length:n,digest:e}}function da(e){let t=e;if("string"==typeof e){if(void 0===sa[e])throw new Error(`Unrecognized hash function named: ${e}`);t=sa[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(void 0===fa[t]&&!pa(t))throw new Error(`Unrecognized function code: ${t}`);return t}function pa(e){return e>0&&e<16}function va(e){return!!pa(e)||!!fa[e]}function ya(e){ha(e)}Object.freeze(fa);var ba={names:sa,codes:fa,toHexString:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return ua(e,"base16")},fromHexString:function(e){return ca(e,"base16")},toB58String:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return ua(oa.encode("base58btc",e)).slice(1)},fromB58String:function(e){const t=e instanceof Uint8Array?ua(e):e;return oa.decode("z"+t)},decode:ha,encode:function(e,t,n){if(!e||void 0===t)throw new Error("multihash encode requires at least two args: digest, code");const r=da(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==n&&(n=e.length),n&&e.length!==n)throw new Error("digest length should be equal to specified length.");const i=aa.encode(r),o=aa.encode(n);return la([i,o,e],i.length+o.length+e.length)},coerceCode:da,isAppCode:pa,validate:ya,prefix:function(e){return ya(e),e.subarray(0,2)},isValidCode:va},ma={exports:{}};const ga=new TextDecoder,wa=new TextEncoder;var _a={decodeText:e=>ga.decode(e),encodeText:e=>wa.encode(e),concat:function(e,t){const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}};const{encodeText:Ea}=_a;var xa={rfc4648:e=>t=>({encode:n=>((e,t,n)=>{const r="="===t[t.length-1],i=(1<<n)-1;let o="",a=0,s=0;for(let u=0;u<e.length;++u)for(s=s<<8|e[u],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o})(n,t,e),decode:n=>((e,t,n)=>{const r={};for(let c=0;c<t.length;++c)r[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,s=0,u=0;for(let c=0;c<i;++c){const t=r[e[c]];if(void 0===t)throw new SyntaxError("Invalid character "+e[c]);s=s<<n|t,a+=n,a>=8&&(a-=8,o[u++]=255&s>>a)}if(a>=n||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return o})(n,t,e)})};const ka=To,Sa=class{constructor(e,t,n,r){this.name=e,this.code=t,this.codeBuf=Ea(this.code),this.alphabet=r,this.codec=n(r)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}},{rfc4648:Aa}=xa,{decodeText:Oa,encodeText:Pa}=_a,Ia=[["identity","\0",()=>({encode:Oa,decode:Pa}),""],["base2","0",Aa(1),"01"],["base8","7",Aa(3),"01234567"],["base10","9",ka,"0123456789"],["base16","f",Aa(4),"0123456789abcdef"],["base16upper","F",Aa(4),"0123456789ABCDEF"],["base32hex","v",Aa(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Aa(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Aa(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Aa(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Aa(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Aa(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Aa(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Aa(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Aa(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",ka,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",ka,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",ka,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",ka,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Aa(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Aa(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Aa(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Aa(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ta=Ia.reduce(((e,t)=>(e[t[0]]=new Sa(t[0],t[1],t[2],t[3]),e)),{}),ja=Ia.reduce(((e,t)=>(e[t[1]]=Ta[t[0]],e)),{});var Na={names:Ta,codes:ja};!function(e,t){const n=Na,{encodeText:r,decodeText:i,concat:o}=_a;function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:n,codeBuf:r}=a(e);return function(e,t){a(e).decode(i(t))}(n,t),o([r,t],r.length+t.length)}).encode=function(e,t){const n=a(e),i=r(n.encode(t));return o([n.codeBuf,i],n.codeBuf.length+i.length)},t.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(t){return!1}},t.encoding=a,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const s=Object.freeze(n.names),u=Object.freeze(n.codes);t.names=s,t.codes=u}(ma,ma.exports);const La=T,Ca=O,Da=P;var Ua={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return Da(t,"base16")},uint8ArrayToNumber:Ra,varintUint8ArrayEncode:function(e){return Uint8Array.from(La.encode(Ra(e)))},varintEncode:function(e){return Uint8Array.from(La.encode(e))}};function Ra(e){return parseInt(Ca(e,"base16"),16)}var Ma={baseTable:Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056})};const{baseTable:Fa}=Ma,Ba=Ua.varintEncode,za={},Ha={},Ga={};for(const lA in Fa){const e=lA,t=Fa[e];za[e]=Ba(t);Ha[e.toUpperCase().replace(/-/g,"_")]=t,Ga[t]||(Ga[t]=e)}Object.freeze(za),Object.freeze(Ha),Object.freeze(Ga);var $a={nameToVarint:za,constantToCode:Ha,nameToCode:Object.freeze(Fa),codeToName:Ga};const qa=T,Va=I,Ka=Ua,{nameToVarint:Wa,constantToCode:Ja,nameToCode:Ya,codeToName:Xa}=$a;function Za(e){const t=qa.decode(e),n=Xa[t];if(void 0===n)throw new Error(`Code "${t}" not found`);return n}function Qa(e){return Xa[e]}function es(e){const t=Ya[e];if(void 0===t)throw new Error(`Codec "${e}" not found`);return t}function ts(e){return qa.decode(e)}function ns(e){const t=Wa[e];if(void 0===t)throw new Error(`Codec "${e}" not found`);return t}function rs(e){return Ka.varintEncode(e)}var is=u(s({addPrefix:function(e,t){let n;if(e instanceof Uint8Array)n=Ka.varintUint8ArrayEncode(e);else{if(!Wa[e])throw new Error("multicodec not recognized");n=Wa[e]}return Va([n,t],n.length+t.length)},rmPrefix:function(e){return qa.decode(e),e.slice(qa.decode.bytes)},getNameFromData:Za,getNameFromCode:Qa,getCodeFromName:es,getCodeFromData:ts,getVarintFromName:ns,getVarintFromCode:rs,getCodec:function(e){return Za(e)},getName:function(e){return Qa(e)},getNumber:function(e){return es(e)},getCode:function(e){return ts(e)},getCodeVarint:function(e){return ns(e)},getVarint:function(e){return Array.from(rs(e))}},Ja),{nameToVarint:Wa,nameToCode:Ya,codeToName:Xa});const os=ba;const as=ba,ss=ma.exports,us=is,cs={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!(e.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{os.validate(e.multihash)}catch(t){let e=t.message;return e||(e="Multihash validation failed"),e}}},ls=I,fs=O,hs=j,ds=us.nameToCode,ps=Object.keys(ds).reduce(((e,t)=>(e[ds[t]]=t,e)),{}),vs=Symbol.for("@ipld/js-cid/CID");class ys{constructor(e,t,n,r){if(this.version,this.codec,this.multihash,Object.defineProperty(this,vs,{value:!0}),ys.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=t.multihash,void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=ss.isEncoded(e);if(t){const n=ss.decode(e);this.version=parseInt(n[0].toString(),16),this.codec=us.getCodec(n.slice(1)),this.multihash=us.rmPrefix(n.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=as.fromB58String(e),this.multibaseName="base58btc";return ys.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(1===t){const n=e;this.version=t,this.codec=us.getCodec(n.slice(1)),this.multihash=us.rmPrefix(n.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";ys.validateCID(this)}else this.version=e,"number"==typeof t&&(t=ps[t]),this.codec=t,this.multihash=n,this.multibaseName=r||(0===e?"base58btc":"base32"),ys.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const t=us.getCodeVarint(this.codec);e=ls([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=us.getCodeVarint(this.codec),t=as.prefix(this.multihash);return ls([[this.version],e,t],1+e.byteLength+t.byteLength)}get code(){return ds[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=as.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new ys(0,this.codec,this.multihash)}toV1(){return new ys(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&0!==this.string.length&&e===this.multibaseName)return this.string;let t;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=as.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=fs(ss.encode(e,this.bytes))}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&hs(this.multihash,e.multihash)}static validateCID(e){const t=cs.checkCIDComponents(e);if(t)throw new Error(t)}static isCID(e){return e instanceof ys||Boolean(e&&e[vs])}}ys.codecs=ds;var bs=ys,ms={exports:{}};const gs=new TextDecoder,ws=new TextEncoder;var _s={decodeText:e=>gs.decode(e),encodeText:e=>ws.encode(e),concat:function(e,t){const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}};const{encodeText:Es}=_s;var xs={rfc4648:e=>t=>({encode:n=>((e,t,n)=>{const r="="===t[t.length-1],i=(1<<n)-1;let o="",a=0,s=0;for(let u=0;u<e.length;++u)for(s=s<<8|e[u],a+=8;a>n;)a-=n,o+=t[i&s>>a];if(a&&(o+=t[i&s<<n-a]),r)for(;o.length*n&7;)o+="=";return o})(n,t,e),decode:n=>((e,t,n)=>{const r={};for(let c=0;c<t.length;++c)r[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,s=0,u=0;for(let c=0;c<i;++c){const t=r[e[c]];if(void 0===t)throw new SyntaxError("Invalid character "+e[c]);s=s<<n|t,a+=n,a>=8&&(a-=8,o[u++]=255&s>>a)}if(a>=n||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return o})(n,t,e)})};const ks=To,Ss=class{constructor(e,t,n,r){this.name=e,this.code=t,this.codeBuf=Es(this.code),this.alphabet=r,this.codec=n(r)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}},{rfc4648:As}=xs,{decodeText:Os,encodeText:Ps}=_s,Is=[["identity","\0",()=>({encode:Os,decode:Ps}),""],["base2","0",As(1),"01"],["base8","7",As(3),"01234567"],["base10","9",ks,"0123456789"],["base16","f",As(4),"0123456789abcdef"],["base16upper","F",As(4),"0123456789ABCDEF"],["base32hex","v",As(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",As(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",As(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",As(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",As(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",As(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",As(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",As(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",As(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",ks,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",ks,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",ks,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",ks,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",As(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",As(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",As(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",As(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ts=Is.reduce(((e,t)=>(e[t[0]]=new Ss(t[0],t[1],t[2],t[3]),e)),{}),js=Is.reduce(((e,t)=>(e[t[1]]=Ts[t[0]],e)),{});var Ns={names:Ts,codes:js};!function(e,t){const n=Ns,{encodeText:r,decodeText:i,concat:o}=_s;function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:n,codeBuf:r}=a(e);return function(e,t){a(e).decode(i(t))}(n,t),o([r,t],r.length+t.length)}).encode=function(e,t){const n=a(e),i=r(n.encode(t));return o([n.codeBuf,i],n.codeBuf.length+i.length)},t.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(t){return!1}},t.encoding=a,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const s=Object.freeze(n.names),u=Object.freeze(n.codes);t.names=s,t.codes=u}(ms,ms.exports);var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.DEFAULT_BASE=Ls.STREAMID_CODEC=void 0,Ls.STREAMID_CODEC=206,Ls.DEFAULT_BASE="base36";var Cs={},Ds=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.readCid=Cs.readVarint=void 0;const Us=Ds(bs),Rs=Ds(T);function Ms(e){const t=Rs.default.decode(e),n=Rs.default.decode.bytes;return[t,e.slice(n),n]}Cs.readVarint=Ms,Cs.readCid=function(e){const[t,n]=Ms(e);if(0!==(r=t)&&1!==r)throw new Error(`Unknown CID version ${t}`);var r;const[i,o]=Ms(n),[,a,s]=Ms(o),[u,,c]=Ms(a),l=o.slice(0,s+c+u),f=o.slice(s+c+u);return[new Us.default(t,i,l),f]};let Fs=0;function Bs(e,t,n=0){const r=++Fs;return function(...i){const o=`__memoized_value_${r}`,a=`__memoized_map_${r}`;let s;if(t||i.length>0||n>0){this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let r,o=this[a];r=!0===t?i.map((e=>e.toString())).join("!"):t?t.apply(this,i):i[0];const u=`${r}__timestamp`;let c=!1;if(n>0)if(o.has(u)){let e=o.get(u);c=Date.now()-e>n}else c=!0;o.has(r)&&!c?s=o.get(r):(s=e.apply(this,i),o.set(r,s),n>0&&o.set(u,Date.now()))}else this.hasOwnProperty(o)?s=this[o]:(s=e.apply(this,i),Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s}));return s}}var zs=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Memoize:function(e){return(t,n,r)=>{if(null!=r.value)r.value=Bs(r.value,e);else{if(null==r.get)throw"Only put a Memoize() decorator on a method or get accessor.";r.get=Bs(r.get,e)}}},MemoizeExpiring:function(e,t){return(n,r,i)=>{if(null!=i.value)i.value=Bs(i.value,t,e);else{if(null==i.get)throw"Only put a Memoize() decorator on a method or get accessor.";i.get=Bs(i.get,t,e)}}}})),Hs={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.StreamType=void 0;const $s={tile:0,"caip10-link":1};class qs{}Gs.StreamType=qs,qs.nameByCode=function(e){const t=Object.entries($s).find((([,t])=>t===e));if(t)return t[0];throw new Error(`No stream type registered for index ${e}`)},qs.codeByName=function(e){const t=$s[e];if(void 0!==t)return t;throw new Error(`No stream type registered for name ${e}`)};var Vs,Ks,Ws,Js=f&&f.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ys=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Xs=f&&f.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Zs=f&&f.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},Qs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.CommitID=void 0;const eu=Qs(bs),tu=Qs(ms.exports),nu=Gs,ru=Qs(T),iu=Qs(I),ou=Qs(O),au=zs,su=Ls,uu=Cs,cu=Po;function lu(e){const[t,n]=uu.readVarint(e);if(t!==su.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[r,i]=uu.readVarint(n),[o,a]=uu.readCid(i);if(0===a.length)throw new Error("No commit information provided");if(1===a.length)return new du(r,o,a[0]);{const[e]=uu.readCid(a);return new du(r,o,e)}}function fu(e,t=null){if(!t)return null;const n=function(e){try{return new eu.default(e)}catch(t){return}}(t);if(n)return e.equals(n)?null:n;if("0"===String(t))return null;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}const hu=Symbol.for("@ceramicnetwork/streamid/CommitID");class du{constructor(e,t,n=null){if(this._tag=hu,Vs.set(this,void 0),Ks.set(this,void 0),Ws.set(this,void 0),!e&&0!==e)throw new Error("constructor: type required");if(!t)throw new Error("constructor: cid required");Xs(this,Vs,"string"==typeof e?nu.StreamType.codeByName(e):e),Xs(this,Ks,"string"==typeof t?new eu.default(t):t),Xs(this,Ws,fu(Zs(this,Ks),n))}static isInstance(e){return"object"==typeof e&&"_tag"in e&&e._tag===hu}get baseID(){return new cu.StreamID(Zs(this,Vs),Zs(this,Ks))}get type(){return Zs(this,Vs)}get typeName(){return nu.StreamType.nameByCode(Zs(this,Vs))}get cid(){return Zs(this,Ks)}get commit(){return Zs(this,Ws)||Zs(this,Ks)}get bytes(){var e;const t=ru.default.encode(su.STREAMID_CODEC),n=ru.default.encode(this.type),r=(null===(e=Zs(this,Ws))||void 0===e?void 0:e.bytes)||new Uint8Array([0]);return iu.default([t,n,this.cid.bytes,r])}atCommit(e){return new du(Zs(this,Vs),Zs(this,Ks),e)}equals(e){return this.type===e.type&&this.cid.equals(e.cid)&&this.commit.equals(e.commit)}toString(){return ou.default(tu.default.encode(su.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(Vs=new WeakMap,Ks=new WeakMap,Ws=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}du.fromBytes=lu,du.fromString=function(e){const t=e.replace("ceramic://","").replace("/ceramic/","");if(t.includes("commit")){const e=t.split("?")[1].split("=")[1],n=t.split("?")[0];return cu.StreamID.fromString(n).atCommit(e)}return lu(tu.default.decode(t))},Js([au.Memoize(),Ys("design:type",cu.StreamID),Ys("design:paramtypes",[])],du.prototype,"baseID",null),Js([au.Memoize(),Ys("design:type",String),Ys("design:paramtypes",[])],du.prototype,"typeName",null),Js([au.Memoize(),Ys("design:type",eu.default),Ys("design:paramtypes",[])],du.prototype,"commit",null),Js([au.Memoize(),Ys("design:type",Uint8Array),Ys("design:paramtypes",[])],du.prototype,"bytes",null),Js([au.Memoize(),Ys("design:type",Function),Ys("design:paramtypes",[]),Ys("design:returntype",String)],du.prototype,"toString",null),Js([au.Memoize(),Ys("design:type",Function),Ys("design:paramtypes",[]),Ys("design:returntype",String)],du.prototype,"toUrl",null),Hs.CommitID=du;var pu,vu,yu=f&&f.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bu=f&&f.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},mu=f&&f.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},gu=f&&f.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},wu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Po,"__esModule",{value:!0}),Po.StreamID=void 0;const _u=wu(bs),Eu=wu(ms.exports),xu=wu(T),ku=wu(I),Su=wu(O),Au=Ls,Ou=Cs,Pu=zs,Iu=Hs,Tu=Gs;function ju(e){const[t,n]=Ou.readVarint(e);if(t!==Au.STREAMID_CODEC)throw new Error("fromBytes: invalid streamid, does not include streamid codec");const[r,i]=Ou.readVarint(n),[o,a]=Ou.readCid(i);if(a.length>0)throw new Error("Invalid StreamID: contains commit");return new Lu(r,o)}const Nu=Symbol.for("@ceramicnetwork/streamid/StreamID");class Lu{constructor(e,t){if(this._tag=Nu,pu.set(this,void 0),vu.set(this,void 0),!e&&0!==e)throw new Error("constructor: type required");if(!t)throw new Error("constructor: cid required");mu(this,pu,"string"==typeof e?Tu.StreamType.codeByName(e):e),mu(this,vu,"string"==typeof t?new _u.default(t):t)}static isInstance(e){return"object"==typeof e&&"_tag"in e&&e._tag===Nu}get type(){return gu(this,pu)}get typeName(){return Tu.StreamType.nameByCode(gu(this,pu))}get cid(){return gu(this,vu)}get bytes(){const e=xu.default.encode(Au.STREAMID_CODEC),t=xu.default.encode(this.type);return ku.default([e,t,this.cid.bytes])}get baseID(){return new Lu(gu(this,pu),gu(this,vu))}atCommit(e){return new Iu.CommitID(gu(this,pu),gu(this,vu),e)}equals(e){return!!Lu.isInstance(e)&&(this.type===e.type&&this.cid.equals(e.cid))}toString(){return Su.default(Eu.default.encode(Au.DEFAULT_BASE,this.bytes))}toUrl(){return`ceramic://${this.toString()}`}[(pu=new WeakMap,vu=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}Lu.fromBytes=ju,Lu.fromString=function(e){const t=e.replace("ceramic://","").replace("/ceramic/",""),n=t.includes("commit")?t.split("?")[0]:t;return ju(Eu.default.decode(n))},yu([Pu.Memoize(),bu("design:type",String),bu("design:paramtypes",[])],Lu.prototype,"typeName",null),yu([Pu.Memoize(),bu("design:type",Uint8Array),bu("design:paramtypes",[])],Lu.prototype,"bytes",null),yu([Pu.Memoize(),bu("design:type",Lu),bu("design:paramtypes",[])],Lu.prototype,"baseID",null),yu([Pu.Memoize(),bu("design:type",Function),bu("design:paramtypes",[]),bu("design:returntype",String)],Lu.prototype,"toString",null),yu([Pu.Memoize(),bu("design:type",Function),bu("design:paramtypes",[]),bu("design:returntype",String)],Lu.prototype,"toUrl",null),Po.StreamID=Lu;var Cu={};!function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r};Object.defineProperty(e,"__esModule",{value:!0}),e.StreamRef=void 0;const i=Po,o=Hs,a=r(S);function s(e){try{return e()}catch(t){return null}}function u(e){throw new Error(e)}(e.StreamRef||(e.StreamRef={})).from=function(e){if(i.StreamID.isInstance(e))return e;if(o.CommitID.isInstance(e))return e;if(e instanceof Uint8Array)return s((()=>o.CommitID.fromBytes(e)))||s((()=>i.StreamID.fromBytes(e)))||u(`Can not build CommitID or StreamID from bytes ${a.toString(e,"base36")}`);if("string"==typeof e)return s((()=>o.CommitID.fromString(e)))||s((()=>i.StreamID.fromString(e)))||u(`Can not build CommitID or StreamID from string ${e}`);throw new Error("Can not build CommitID or StreamID")}}(Cu),function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.StreamRef=e.StreamID=e.CommitID=void 0;const r=Po;var i=Hs;Object.defineProperty(e,"CommitID",{enumerable:!0,get:function(){return i.CommitID}});var o=Po;Object.defineProperty(e,"StreamID",{enumerable:!0,get:function(){return o.StreamID}});var a=Cu;Object.defineProperty(e,"StreamRef",{enumerable:!0,get:function(){return a.StreamRef}}),n(Gs,e),e.default=r.StreamID}(Oo);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Du=function(e,t){return(Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Uu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Du(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ru(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Mu(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Fu(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bu(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function zu(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function Hu(e){return this instanceof Hu?(this.v=e,this):new Hu(e)}function Gu(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Hu?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function $u(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Fu(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function qu(e){return"function"==typeof e}function Vu(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ku=Vu((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Wu(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ju=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Fu(o),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(qu(u))try{u()}catch(p){i=p instanceof Ku?p.errors:[p]}var c=this._teardowns;if(c){this._teardowns=null;try{for(var l=Fu(c),f=l.next();!f.done;f=l.next()){var h=f.value;try{Zu(h)}catch(v){i=null!=i?i:[],v instanceof Ku?i=zu(zu([],Bu(i)),Bu(v.errors)):i.push(v)}}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new Ku(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Zu(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Wu(t,e)},e.prototype.remove=function(t){var n=this._teardowns;n&&Wu(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Yu=Ju.EMPTY;function Xu(e){return e instanceof Ju||e&&"closed"in e&&qu(e.remove)&&qu(e.add)&&qu(e.unsubscribe)}function Zu(e){qu(e)?e():e.unsubscribe()}var Qu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ec={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ec.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,zu([],Bu(e)))},clearTimeout:function(e){var t=ec.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function tc(e){ec.setTimeout((function(){var t=Qu.onUnhandledError;if(!t)throw e;t(e)}))}function nc(){}var rc=ic("C",void 0,void 0);function ic(e,t,n){return{kind:e,value:t,error:n}}var oc=null;function ac(e){if(Qu.useDeprecatedSynchronousErrorHandling){var t=!oc;if(t&&(oc={errorThrown:!1,error:null}),e(),t){var n=oc,r=n.errorThrown,i=n.error;if(oc=null,r)throw i}}else e()}function sc(e){Qu.useDeprecatedSynchronousErrorHandling&&oc&&(oc.errorThrown=!0,oc.error=e)}var uc=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Xu(t)&&t.add(n)):n.destination=dc,n}return Uu(t,e),t.create=function(e,t,n){return new cc(e,t,n)},t.prototype.next=function(e){this.isStopped?hc(function(e){return ic("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?hc(ic("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?hc(rc,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ju),cc=function(e){function t(t,n,r){var i,o=e.call(this)||this;if(qu(t))i=t;else if(t){var a;i=t.next,n=t.error,r=t.complete,o&&Qu.useDeprecatedNextContext?(a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()}:a=t,i=null==i?void 0:i.bind(a),n=null==n?void 0:n.bind(a),r=null==r?void 0:r.bind(a)}return o.destination={next:i?lc(i):nc,error:lc(null!=n?n:fc),complete:r?lc(r):nc},o}return Uu(t,e),t}(uc);function lc(e,t){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{e.apply(void 0,zu([],Bu(t)))}catch(r){Qu.useDeprecatedSynchronousErrorHandling?sc(r):tc(r)}}}function fc(e){throw e}function hc(e,t){var n=Qu.onStoppedNotification;n&&ec.setTimeout((function(){return n(e,t)}))}var dc={closed:!0,next:nc,error:fc,complete:nc},pc="function"==typeof Symbol&&Symbol.observable||"@@observable";function vc(e){return e}function yc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bc(e)}function bc(e){return 0===e.length?vc:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var mc=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof uc||function(e){return e&&qu(e.next)&&qu(e.error)&&qu(e.complete)}(r)&&Xu(r)?e:new cc(e,t,n);return ac((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=gc(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),null==i||i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[pc]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bc(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=gc(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function gc(e){var t;return null!==(t=null!=e?e:Qu.Promise)&&void 0!==t?t:Promise}function wc(e){return qu(null==e?void 0:e.lift)}function _c(e){return function(t){if(wc(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Ec=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.onFinalize=o,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(n){t.error(n)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Uu(t,e),t.prototype.unsubscribe=function(){var t,n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},t}(uc);function xc(){return _c((function(e,t){var n=null;e._refCount++;var r=new Ec(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));e.subscribe(r),r.closed||(n=e.connect())}))}var kc=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,wc(t)&&(r.lift=t.lift),r}return Uu(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new Ju;var n=this.getSubject();t.add(this.source.subscribe(new Ec(n,void 0,(function(){e._teardown(),n.complete()}),(function(t){e._teardown(),n.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=Ju.EMPTY)}return t},t.prototype.refCount=function(){return xc()(this)},t}(mc),Sc={now:function(){return(Sc.delegate||performance).now()},delegate:void 0},Ac={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=Ac.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new Ju((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ac.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,zu([],Bu(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ac.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,zu([],Bu(e)))},delegate:void 0};function Oc(e){var t=Ac.schedule;return new mc((function(n){var r=new Ju,i=e||Sc,o=i.now(),a=function(s){var u=i.now();n.next({timestamp:e?u:s,elapsed:u-o}),n.closed||r.add(t(a))};return r.add(t(a)),r}))}var Pc,Ic=Oc(),Tc=Vu((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),jc=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Uu(t,e),t.prototype.lift=function(e){var t=new Nc(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Tc},t.prototype.next=function(e){var t=this;ac((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){var i=t.observers.slice();try{for(var o=Fu(i),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;ac((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;ac((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=t.hasError,r=t.isStopped,i=t.observers;return n||r?Yu:(i.push(e),new Ju((function(){return Wu(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new mc;return e.source=this,e},t.create=function(e,t){return new Nc(e,t)},t}(mc),Nc=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Uu(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Yu},t}(jc),Lc=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return Uu(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(jc),Cc={now:function(){return(Cc.delegate||Date).now()},delegate:void 0},Dc=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=Cc);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return Uu(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,s=n._windowTime;r||(i.push(t),!o&&i.push(a.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var a=n.now(),s=0,u=1;u<r.length&&r[u]<=a;u+=2)s=u;s&&r.splice(0,s+1)}},t}(jc),Uc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return Uu(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t._hasValue,i=t._value,o=t.thrownError,a=t.isStopped,s=t._isComplete;n?e.error(o):(a||s)&&(r&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,n=t._hasValue,r=t._value;t._isComplete||(this._isComplete=!0,n&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(jc),Rc=function(e){function t(t,n){return e.call(this)||this}return Uu(t,e),t.prototype.schedule=function(e,t){return this},t}(Ju),Mc={setInterval:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mc.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,zu([],Bu(e)))},clearInterval:function(e){var t=Mc.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Fc=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Uu(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Mc.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;Mc.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Wu(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Rc),Bc=1,zc={};function Hc(e){return e in zc&&(delete zc[e],!0)}var Gc=function(e){var t=Bc++;return zc[t]=!0,Pc||(Pc=Promise.resolve()),Pc.then((function(){return Hc(t)&&e()})),t},$c=function(e){Hc(e)},qc={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qc.delegate;return((null==n?void 0:n.setImmediate)||Gc).apply(void 0,zu([],Bu(e)))},clearImmediate:function(e){var t=qc.delegate;return((null==t?void 0:t.clearImmediate)||$c)(e)},delegate:void 0},Vc=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Uu(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=qc.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(qc.clearImmediate(n),t._scheduled=void 0)},t}(Fc),Kc=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Cc.now,e}(),Wc=function(e){function t(t,n){void 0===n&&(n=Kc.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return Uu(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Kc),Jc=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uu(t,e),t.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var t,n=this.actions,r=-1;e=e||n.shift();var i=n.length;do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this._active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Wc))(Vc),Yc=Jc,Xc=new Wc(Fc),Zc=Xc,Qc=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Uu(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Fc),el=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uu(t,e),t}(Wc))(Qc),tl=el,nl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Uu(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Ac.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Ac.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Fc),rl=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uu(t,e),t.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var t,n=this.actions,r=-1;e=e||n.shift();var i=n.length;do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this._active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Wc))(nl),il=rl,ol=function(e){function t(t,n){void 0===t&&(t=al),void 0===n&&(n=1/0);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return Uu(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Wc),al=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return Uu(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}return Ju.EMPTY},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Fc),sl=new mc((function(e){return e.complete()}));function ul(e,t){return new mc((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}var cl=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ll(e){return qu(null==e?void 0:e.then)}var fl,hl,dl="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function pl(e,t,n,r){void 0===r&&(r=0);var i=t.schedule((function(){try{n.call(this)}catch(t){e.error(t)}}),r);return e.add(i),i}function vl(e,t){return new mc((function(n){var r;return n.add(t.schedule((function(){r=e[dl](),pl(n,t,(function(){var e=r.next(),t=e.value;e.done?n.complete():(n.next(t),this.schedule())}))}))),function(){return qu(null==r?void 0:r.return)&&r.return()}}))}function yl(e,t){if(!e)throw new Error("Iterable cannot be null");return new mc((function(n){var r=new Ju;return r.add(t.schedule((function(){var i=e[Symbol.asyncIterator]();r.add(t.schedule((function(){var e=this;i.next().then((function(t){t.done?n.complete():(n.next(t.value),e.schedule())}))})))}))),r}))}function bl(e){return qu(e[pc])}function ml(e){return qu(null==e?void 0:e[dl])}function gl(e){return Symbol.asyncIterator&&qu(null==e?void 0:e[Symbol.asyncIterator])}function wl(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function _l(e){return Gu(this,arguments,(function(){var t,n,r;return Mu(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Hu(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Hu(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Hu(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function El(e){return qu(null==e?void 0:e.getReader)}function xl(e,t){if(null!=e){if(bl(e))return function(e,t){return new mc((function(n){var r=new Ju;return r.add(t.schedule((function(){var i=e[pc]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(cl(e))return ul(e,t);if(ll(e))return function(e,t){return new mc((function(n){return t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){n.next(e),n.add(t.schedule((function(){return n.complete()})))})))}),(function(e){n.add(t.schedule((function(){return n.error(e)})))}))}))}))}(e,t);if(gl(e))return yl(e,t);if(ml(e))return vl(e,t);if(El(e))return function(e,t){return yl(_l(e),t)}(e,t)}throw wl(e)}function kl(e,t){return t?xl(e,t):Sl(e)}function Sl(e){if(e instanceof mc)return e;if(null!=e){if(bl(e))return function(e){return new mc((function(t){var n=e[pc]();if(qu(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(cl(e))return Al(e);if(ll(e))return n=e,new mc((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,tc)}));if(gl(e))return Ol(e);if(ml(e))return t=e,new mc((function(e){var n,r;try{for(var i=Fu(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(El(e))return Ol(_l(e))}var t,n;throw wl(e)}function Al(e){return new mc((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}function Ol(e){return new mc((function(t){(function(e,t){var n,r,i,o;return Ru(this,void 0,void 0,(function(){var a,s;return Mu(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=$u(e),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Pl(e,t){return t?ul(e,t):Al(e)}function Il(e){return e&&qu(e.schedule)}function Tl(e){return e[e.length-1]}function jl(e){return qu(Tl(e))?e.pop():void 0}function Nl(e){return Il(Tl(e))?e.pop():void 0}function Ll(e,t){return"number"==typeof Tl(e)?e.pop():t}function Cl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e);return n?ul(e,n):Pl(e)}function Dl(e,t){var n=qu(e)?e:function(){return e},r=function(e){return e.error(n())};return new mc(t?function(e){return t.schedule(r,0,e)}:r)}(hl=fl||(fl={})).NEXT="N",hl.ERROR="E",hl.COMPLETE="C";var Ul=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){return Rl(this,e)},e.prototype.do=function(e,t,n){var r=this,i=r.kind,o=r.value,a=r.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(a):null==n?void 0:n()},e.prototype.accept=function(e,t,n){var r;return qu(null===(r=e)||void 0===r?void 0:r.next)?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this,t=e.kind,n=e.value,r=e.error,i="N"===t?Cl(n):"E"===t?Dl((function(){return r})):"C"===t?sl:0;if(!i)throw new TypeError("Unexpected notification kind "+t);return i},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function Rl(e,t){var n,r,i,o=e,a=o.kind,s=o.value,u=o.error;if("string"!=typeof a)throw new TypeError('Invalid notification, missing "kind"');"N"===a?null===(n=t.next)||void 0===n||n.call(t,s):"E"===a?null===(r=t.error)||void 0===r||r.call(t,u):null===(i=t.complete)||void 0===i||i.call(t)}var Ml=Vu((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));var Fl=Vu((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})),Bl=Vu((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})),zl=Vu((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}));function Hl(e){return e instanceof Date&&!isNaN(e)}var Gl=Vu((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function $l(e,t){var n=Hl(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,a=void 0===o?ql:o,s=n.scheduler,u=void 0===s?null!=t?t:Xc:s,c=n.meta,l=void 0===c?null:c;if(null==r&&null==i)throw new TypeError("No timeout provided.");return _c((function(e,t){var n,o,s=null,c=0,f=function(e){o=pl(t,u,(function(){n.unsubscribe(),Sl(a({meta:l,lastValue:s,seen:c})).subscribe(t)}),e)};n=e.subscribe(new Ec(t,(function(e){null==o||o.unsubscribe(),c++,t.next(s=e),i>0&&f(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),s=null}))),f(null!=r?"number"==typeof r?r:+r-u.now():i)}))}function ql(e){throw new Gl(e)}function Vl(e,t){return void 0===t&&(t=0),_c((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Kl(e,t){return _c((function(n,r){var i=0;n.subscribe(new Ec(r,(function(n){r.next(e.call(t,n,i++))})))}))}var Wl=Array.isArray;function Jl(e){return Kl((function(t){return function(e,t){return Wl(t)?e.apply(void 0,zu([],Bu(t))):e(t)}(e,t)}))}function Yl(e,t){return void 0===t&&(t=0),_c((function(n,r){n.subscribe(new Ec(r,(function(n){return r.add(e.schedule((function(){return r.next(n)}),t))}),(function(){return r.add(e.schedule((function(){return r.complete()}),t))}),(function(n){return r.add(e.schedule((function(){return r.error(n)}),t))})))}))}function Xl(e,t,n,r){if(n){if(!Il(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Xl(e,t,r).apply(this,i).pipe(Jl(n))};r=n}return r?function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Xl(e,t).apply(this,n).pipe(Vl(r),Yl(r))}:function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new Uc,a=!0;return new mc((function(i){var s=o.subscribe(i);if(a){a=!1;var u=!1,c=!1;t.apply(n,zu(zu([],Bu(r)),[function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=t.shift();if(null!=r)return void o.error(r)}o.next(1<t.length?t:t[0]),c=!0,u&&o.complete()}])),c&&o.complete(),u=!0}return s}))}}var Zl=Array.isArray,Ql=Object.getPrototypeOf,ef=Object.prototype,tf=Object.keys;function nf(e){if(1===e.length){var t=e[0];if(Zl(t))return{args:t,keys:null};if(function(e){return e&&"object"==typeof e&&Ql(e)===ef}(t)){var n=tf(t);return{args:n.map((function(e){return t[e]})),keys:n}}}return{args:e,keys:null}}function rf(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e),r=jl(e),i=nf(e),o=i.args,a=i.keys;if(0===o.length)return kl([],n);var s=new mc(af(o,n,a?function(e){return rf(a,e)}:vc));return r?s.pipe(Jl(r)):s}function af(e,t,n){return void 0===n&&(n=vc),function(r){sf(t,(function(){for(var i=e.length,o=new Array(i),a=i,s=i,u=function(i){sf(t,(function(){var u=kl(e[i],t),c=!1;u.subscribe(new Ec(r,(function(e){o[i]=e,c||(c=!0,s--),s||r.next(n(o.slice()))}),(function(){--a||r.complete()})))}),r)},c=0;c<i;c++)u(c)}),r)}}function sf(e,t,n){e?n.add(e.schedule(t)):t()}function uf(e,t,n,r,i,o,a,s){var u=[],c=0,l=0,f=!1,h=function(){!f||u.length||c||t.complete()},d=function(e){return c<r?p(e):u.push(e)},p=function(e){o&&t.next(e),c++;var s=!1;Sl(n(e,l++)).subscribe(new Ec(t,(function(e){null==i||i(e),o?d(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{c--;for(var e=function(){var e=u.shift();a?t.add(a.schedule((function(){return p(e)}))):p(e)};u.length&&c<r;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(new Ec(t,d,(function(){f=!0,h()}))),function(){null==s||s()}}function cf(e,t,n){return void 0===n&&(n=1/0),qu(t)?cf((function(n,r){return Kl((function(e,i){return t(n,e,r,i)}))(Sl(e(n,r)))}),n):("number"==typeof t&&(n=t),_c((function(t,r){return uf(t,r,e,n)})))}function lf(e){return void 0===e&&(e=1/0),cf(vc,e)}function ff(){return lf(1)}function hf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ff()(Pl(e,Nl(e)))}function df(e){return new mc((function(t){Sl(e()).subscribe(t)}))}var pf={connector:function(){return new jc},resetOnDisconnect:!0};var vf=["addListener","removeListener"],yf=["addEventListener","removeEventListener"],bf=["on","off"];function mf(e,t){return function(n){return function(r){return e[n](t,r)}}}function gf(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Zc);var r=-1;return null!=t&&(Il(t)?n=t:r=t),new mc((function(t){var i=Hl(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule((function(){t.closed||(t.next(o++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}function wf(e,t){return void 0===e&&(e=0),void 0===t&&(t=Xc),e<0&&(e=0),gf(e,e,t)}var _f=new mc(nc);var Ef=Array.isArray;function xf(e){return 1===e.length&&Ef(e[0])?e[0]:e}function kf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=xf(e);return _c((function(e,t){var r=zu([e],Bu(n)),i=function(){if(!t.closed)if(r.length>0){var e=void 0;try{e=Sl(r.shift())}catch(o){return void i()}var n=new Ec(t,void 0,nc,nc);t.add(e.subscribe(n)),n.add(i)}else t.complete()};i()}))}function Sf(e,t){return function(n,r){return!e.call(t,n,r)}}function Af(e,t){return _c((function(n,r){var i=0;n.subscribe(new Ec(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}function Of(e){return function(t){for(var n=[],r=function(r){n.push(Sl(e[r]).subscribe(new Ec(t,(function(e){if(n){for(var i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(e)}))))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}function Pf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=jl(e),r=xf(e);return r.length?new mc((function(e){var t=r.map((function(){return[]})),i=r.map((function(){return!1}));e.add((function(){t=i=null}));for(var o=function(o){Sl(r[o]).subscribe(new Ec(e,(function(r){if(t[o].push(r),t.every((function(e){return e.length}))){var a=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,zu([],Bu(a))):a),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[o]=!0,!t[o].length&&e.complete()})))},a=0;!e.closed&&a<r.length;a++)o(a);return function(){t=i=null}})):sl}function If(e){return _c((function(t,n){var r=!1,i=null,o=null,a=!1,s=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}a&&n.complete()},u=function(){o=null,a&&n.complete()};t.subscribe(new Ec(n,(function(t){r=!0,i=t,o||Sl(e(t)).subscribe(o=new Ec(n,s,u))}),(function(){a=!0,(!r||!o||o.closed)&&n.complete()})))}))}function Tf(e,t){return void 0===t&&(t=Zc),If((function(){return gf(e,t)}))}function jf(e){return _c((function(t,n){var r=[];return t.subscribe(new Ec(n,(function(e){return r.push(e)}),(function(){n.next(r),n.complete()}))),e.subscribe(new Ec(n,(function(){var e=r;r=[],n.next(e)}),nc)),function(){r=null}}))}function Nf(e,t){return void 0===t&&(t=null),t=null!=t?t:e,_c((function(n,r){var i=[],o=0;n.subscribe(new Ec(r,(function(n){var a,s,u,c,l=null;o++%t==0&&i.push([]);try{for(var f=Fu(i),h=f.next();!h.done;h=f.next()){(v=h.value).push(n),e<=v.length&&(l=null!=l?l:[]).push(v)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}if(l)try{for(var d=Fu(l),p=d.next();!p.done;p=d.next()){var v=p.value;Wu(i,v),r.next(v)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}}),(function(){var e,t;try{for(var n=Fu(i),o=n.next();!o.done;o=n.next()){var a=o.value;r.next(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}r.complete()}),void 0,(function(){i=null})))}))}function Lf(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=Nl(r))&&void 0!==t?t:Xc,a=null!==(n=r[0])&&void 0!==n?n:null,s=r[1]||1/0;return _c((function(t,n){var r=[],i=!1,u=function(e){var t=e.buffer;e.subs.unsubscribe(),Wu(r,e),n.next(t),i&&c()},c=function(){if(r){var t=new Ju;n.add(t);var i={buffer:[],subs:t};r.push(i),t.add(o.schedule((function(){return u(i)}),e))}};null!==a&&a>=0?n.add(o.schedule((function(){c(),!this.closed&&n.add(this.schedule(null,a))}),a)):i=!0,c();var l=new Ec(n,(function(e){var t,n,i=r.slice();try{for(var o=Fu(i),a=o.next();!a.done;a=o.next()){var c=a.value,l=c.buffer;l.push(e),s<=l.length&&u(c)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;null==r?void 0:r.length;)n.next(r.shift().buffer);null==l||l.unsubscribe(),n.complete(),n.unsubscribe()}),void 0,(function(){return r=null}));t.subscribe(l)}))}function Cf(e,t){return _c((function(n,r){var i=[];Sl(e).subscribe(new Ec(r,(function(e){var n=[];i.push(n);var o=new Ju;o.add(Sl(t(e)).subscribe(new Ec(r,(function(){Wu(i,n),r.next(n),o.unsubscribe()}),nc)))}),nc)),n.subscribe(new Ec(r,(function(e){var t,n;try{for(var r=Fu(i),o=r.next();!o.done;o=r.next()){o.value.push(e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}),(function(){for(;i.length>0;)r.next(i.shift());r.complete()})))}))}function Df(e){return _c((function(t,n){var r=null,i=null,o=function(){null==i||i.unsubscribe();var t=r;r=[],t&&n.next(t),Sl(e()).subscribe(i=new Ec(n,o,nc))};o(),t.subscribe(new Ec(n,(function(e){return null==r?void 0:r.push(e)}),(function(){r&&n.next(r),n.complete()}),void 0,(function(){return r=i=null})))}))}function Uf(e){return _c((function(t,n){var r,i=null,o=!1;i=t.subscribe(new Ec(n,void 0,void 0,(function(a){r=Sl(e(a,Uf(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):o=!0}))),o&&(i.unsubscribe(),i=null,r.subscribe(n))}))}function Rf(e,t,n,r,i){return function(o,a){var s=n,u=t,c=0;o.subscribe(new Ec(a,(function(t){var n=c++;u=s?e(u,t,n):(s=!0,t),r&&a.next(u)}),i&&function(){s&&a.next(u),a.complete()}))}}function Mf(e,t){return _c(Rf(e,t,arguments.length>=2,!1,!0))}var Ff=function(e,t){return e.push(t),e};function Bf(){return _c((function(e,t){Mf(Ff,[])(e).subscribe(t)}))}function zf(e,t){return yc(Bf(),cf((function(t){return e(t)})),t?Jl(t):vc)}function Hf(e){return zf(of,e)}var Gf=Hf;function $f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=jl(e);return n?yc($f.apply(void 0,zu([],Bu(e))),Jl(n)):_c((function(t,n){af(zu([t],Bu(xf(e))))(n)}))}function qf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $f.apply(void 0,zu([],Bu(e)))}function Vf(e,t){return qu(t)?cf(e,t,1):cf(e,1)}function Kf(e,t){return qu(t)?Vf((function(){return e}),t):Vf((function(){return e}))}function Wf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e);return _c((function(t,r){ff()(Pl(zu([t],Bu(e)),n)).subscribe(r)}))}function Jf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Wf.apply(void 0,zu([],Bu(e)))}var Yf={connector:function(){return new jc}};function Xf(e,t){void 0===t&&(t=Yf);var n=t.connector;return _c((function(t,r){var i,o=n();kl(e((i=o,new mc((function(e){return i.subscribe(e)}))))).subscribe(r),r.add(t.subscribe(o))}))}function Zf(e){return Mf((function(t,n,r){return!e||e(n,r)?t+1:t}),0)}function Qf(e){return _c((function(t,n){var r=!1,i=null,o=null,a=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}};t.subscribe(new Ec(n,(function(t){null==o||o.unsubscribe(),r=!0,i=t,o=new Ec(n,a,nc),Sl(e(t)).subscribe(o)}),(function(){a(),n.complete()}),void 0,(function(){i=o=null})))}))}function eh(e,t){return void 0===t&&(t=Xc),_c((function(n,r){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,r.next(e)}};function u(){var n=a+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);s()}n.subscribe(new Ec(r,(function(n){o=n,a=t.now(),i||(i=t.schedule(u,e),r.add(i))}),(function(){s(),r.complete()}),void 0,(function(){o=i=null})))}))}function th(e){return _c((function(t,n){var r=!1;t.subscribe(new Ec(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}function nh(e){return e<=0?function(){return sl}:_c((function(t,n){var r=0;t.subscribe(new Ec(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function rh(){return _c((function(e,t){e.subscribe(new Ec(t,nc))}))}function ih(e){return Kl((function(){return e}))}function oh(e,t){return t?function(n){return hf(t.pipe(nh(1),rh()),n.pipe(oh(e)))}:cf((function(t,n){return e(t,n).pipe(nh(1),ih(t))}))}function ah(e,t){void 0===t&&(t=Xc);var n=gf(e,t);return oh((function(){return n}))}function sh(){return _c((function(e,t){e.subscribe(new Ec(t,(function(e){return Rl(e,t)})))}))}function uh(e,t){return _c((function(n,r){var i=new Set;n.subscribe(new Ec(r,(function(t){var n=e?e(t):t;i.has(n)||(i.add(n),r.next(t))}))),null==t||t.subscribe(new Ec(r,(function(){return i.clear()}),nc))}))}function ch(e,t){return void 0===t&&(t=vc),e=null!=e?e:lh,_c((function(n,r){var i,o=!0;n.subscribe(new Ec(r,(function(n){var a=t(n);!o&&e(i,a)||(o=!1,i=a,r.next(n))})))}))}function lh(e,t){return e===t}function fh(e,t){return ch((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}function hh(e){return void 0===e&&(e=dh),_c((function(t,n){var r=!1;t.subscribe(new Ec(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function dh(){return new Ml}function ph(e,t){if(e<0)throw new Fl;var n=arguments.length>=2;return function(r){return r.pipe(Af((function(t,n){return n===e})),nh(1),n?th(t):hh((function(){return new Fl})))}}function vh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return hf(t,Cl.apply(void 0,zu([],Bu(e))))}}function yh(e,t){return _c((function(n,r){var i=0;n.subscribe(new Ec(r,(function(o){e.call(t,o,i++,n)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}function bh(){return _c((function(e,t){var n=!1,r=null;e.subscribe(new Ec(t,(function(e){r||(r=Sl(e).subscribe(new Ec(t,void 0,(function(){r=null,n&&t.complete()}))))}),(function(){n=!0,!r&&t.complete()})))}))}var mh=bh;function gh(e,t){return t?function(n){return n.pipe(gh((function(n,r){return Sl(e(n,r)).pipe(Kl((function(e,i){return t(n,e,r,i)})))})))}:_c((function(t,n){var r=0,i=null,o=!1;t.subscribe(new Ec(n,(function(t){i||(i=new Ec(n,void 0,(function(){i=null,o&&n.complete()})),Sl(e(t,r++)).subscribe(i))}),(function(){o=!0,!i&&n.complete()})))}))}function wh(e,t,n){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,_c((function(r,i){return uf(r,i,e,t,void 0,!0,n)}))}function _h(e){return _c((function(t,n){try{t.subscribe(n)}finally{n.add(e)}}))}function Eh(e,t){return _c(xh(e,t,"value"))}function xh(e,t,n){var r="index"===n;return function(n,i){var o=0;n.subscribe(new Ec(i,(function(a){var s=o++;e.call(t,a,s,n)&&(i.next(r?s:a),i.complete())}),(function(){i.next(r?-1:void 0),i.complete()})))}}function kh(e,t){return _c(xh(e,t,"index"))}function Sh(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Af((function(t,n){return e(t,n,r)})):vc,nh(1),n?th(t):hh((function(){return new Ml})))}}function Ah(e,t,n,r){return _c((function(i,o){var a;t&&"function"!=typeof t?(n=t.duration,a=t.element,r=t.connector):a=t;var s=new Map,u=function(e){s.forEach(e),e(o)},c=function(e){return u((function(t){return t.error(e)}))},l=new Oh(o,(function(t){try{var i=e(t),u=s.get(i);if(!u){s.set(i,u=r?r():new jc);var f=(d=i,p=u,(v=new mc((function(e){l.activeGroups++;var t=p.subscribe(e);return function(){t.unsubscribe(),0==--l.activeGroups&&l.teardownAttempted&&l.unsubscribe()}}))).key=d,v);if(o.next(f),n){var h=new Ec(u,(function(){u.complete(),null==h||h.unsubscribe()}),void 0,void 0,(function(){return s.delete(i)}));l.add(Sl(n(f)).subscribe(h))}}u.next(a?a(t):t)}catch(y){c(y)}var d,p,v}),(function(){return u((function(e){return e.complete()}))}),c,(function(){return s.clear()}));i.subscribe(l)}))}var Oh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeGroups=0,t.teardownAttempted=!1,t}return Uu(t,e),t.prototype.unsubscribe=function(){this.teardownAttempted=!0,0===this.activeGroups&&e.prototype.unsubscribe.call(this)},t}(Ec);function Ph(){return _c((function(e,t){e.subscribe(new Ec(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}function Ih(e){return e<=0?function(){return sl}:_c((function(t,n){var r=[];t.subscribe(new Ec(n,(function(t){r.push(t),e<r.length&&r.shift()}),(function(){var e,t;try{for(var i=Fu(r),o=i.next();!o.done;o=i.next()){var a=o.value;n.next(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){r=null})))}))}function Th(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Af((function(t,n){return e(t,n,r)})):vc,Ih(1),n?th(t):hh((function(){return new Ml})))}}function jh(){return _c((function(e,t){e.subscribe(new Ec(t,(function(e){t.next(Ul.createNext(e))}),(function(){t.next(Ul.createComplete()),t.complete()}),(function(e){t.next(Ul.createError(e)),t.complete()})))}))}function Nh(e){return Mf(qu(e)?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}var Lh=cf;function Ch(e,t,n){return void 0===n&&(n=1/0),qu(t)?cf((function(){return e}),t,n):("number"==typeof t&&(n=t),cf((function(){return e}),n))}function Dh(e,t,n){return void 0===n&&(n=1/0),_c((function(r,i){var o=t;return uf(r,i,(function(t,n){return e(o,t,n)}),n,(function(e){o=e}),!1,void 0,(function(){return o=null}))}))}function Uh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e),r=Ll(e,1/0);return e=xf(e),_c((function(t,i){lf(r)(Pl(zu([t],Bu(e)),n)).subscribe(i)}))}function Rh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uh.apply(void 0,zu([],Bu(e)))}function Mh(e){return Mf(qu(e)?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}function Fh(e,t){var n=qu(e)?e:function(){return e};return qu(t)?Xf(t,{connector:n}):function(e){return new kc(e,n)}}function Bh(){return _c((function(e,t){var n,r=!1;e.subscribe(new Ec(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))}function zh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return Kl((function(t){for(var r=t,i=0;i<n;i++){var o=null==r?void 0:r[e[i]];if(void 0===o)return;r=o}return r}))}function Hh(e){return e?function(t){return Xf(e)(t)}:function(e){return Fh(new jc)(e)}}function Gh(e){return function(t){var n=new Lc(e);return new kc(t,(function(){return n}))}}function $h(){return function(e){var t=new Uc;return new kc(e,(function(){return t}))}}function qh(e,t,n,r){n&&!qu(n)&&(r=n);var i=qu(n)?n:void 0;return function(n){return Fh(new Dc(e,t,r),i)(n)}}function Vh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?_c((function(t,n){Of(zu([t],Bu(e)))(n)})):vc}function Kh(e){return void 0===e&&(e=1/0),e<=0?function(){return sl}:_c((function(t,n){var r,i=0,o=function(){var a=!1;r=t.subscribe(new Ec(n,void 0,(function(){++i<e?r?(r.unsubscribe(),r=null,o()):a=!0:n.complete()}))),a&&(r.unsubscribe(),r=null,o())};o()}))}function Wh(e){return _c((function(t,n){var r,i,o=!1,a=!1,s=!1,u=function(){return s&&a&&(n.complete(),!0)},c=function(){s=!1,r=t.subscribe(new Ec(n,void 0,(function(){s=!0,!u()&&(i||(i=new jc,e(i).subscribe(new Ec(n,(function(){r?c():o=!0}),(function(){a=!0,u()})))),i).next()}))),o&&(r.unsubscribe(),r=null,o=!1,c())};c()}))}function Jh(e){var t;void 0===e&&(e=1/0);var n=(t=e&&"object"==typeof e?e:{count:e}).count,r=void 0===n?1/0:n,i=t.delay,o=t.resetOnSuccess,a=void 0!==o&&o;return r<=0?vc:_c((function(e,t){var n,o=0,s=function(){var u=!1;n=e.subscribe(new Ec(t,(function(e){a&&(o=0),t.next(e)}),void 0,(function(e){if(o++<r){var a=function(){n?(n.unsubscribe(),n=null,s()):u=!0};if(null!=i){var c="number"==typeof i?gf(i):Sl(i(e,o)),l=new Ec(t,(function(){l.unsubscribe(),a()}),(function(){t.complete()}));c.subscribe(l)}else a()}else t.error(e)}))),u&&(n.unsubscribe(),n=null,s())};s()}))}function Yh(e){return _c((function(t,n){var r,i,o=!1,a=function(){r=t.subscribe(new Ec(n,void 0,void 0,(function(t){i||(i=new jc,e(i).subscribe(new Ec(n,(function(){return r?a():o=!0})))),i&&i.next(t)}))),o&&(r.unsubscribe(),r=null,o=!1,a())};a()}))}function Xh(e){return _c((function(t,n){var r=!1,i=null;t.subscribe(new Ec(n,(function(e){r=!0,i=e})));e.subscribe(new Ec(n,(function(){if(r){r=!1;var e=i;i=null,n.next(e)}}),nc))}))}function Zh(e,t){return void 0===t&&(t=Xc),Xh(wf(e,t))}function Qh(e,t){return _c(Rf(e,t,arguments.length>=2,!0))}function ed(e,t){return void 0===t&&(t=function(e,t){return e===t}),_c((function(n,r){var i={buffer:[],complete:!1},o={buffer:[],complete:!1},a=function(e){r.next(e),r.complete()},s=function(e,n){var i=new Ec(r,(function(r){var i=n.buffer,o=n.complete;0===i.length?o?a(!1):e.buffer.push(r):!t(r,i.shift())&&a(!1)}),(function(){e.complete=!0;var t=n.complete,r=n.buffer;t&&a(0===r.length),null==i||i.unsubscribe()}));return i};n.subscribe(s(i,o)),e.subscribe(s(o,i))}))}function td(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new jc}:t,r=e.resetOnError,i=void 0===r||r,o=e.resetOnComplete,a=void 0===o||o,s=e.resetOnRefCountZero,u=void 0===s||s;return function(e){var t=null,r=null,o=null,s=0,c=!1,l=!1,f=function(){null==r||r.unsubscribe(),r=null},h=function(){f(),t=o=null,c=l=!1},d=function(){var e=t;h(),null==e||e.unsubscribe()};return _c((function(e,p){s++,l||c||f();var v=o=null!=o?o:n();p.add((function(){0!==--s||l||c||(r=nd(d,u))})),v.subscribe(p),t||(t=new cc({next:function(e){return v.next(e)},error:function(e){l=!0,f(),r=nd(h,i,e),v.error(e)},complete:function(){c=!0,f(),r=nd(h,a),v.complete()}}),kl(e).subscribe(t))}))(e)}}function nd(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return!0===t?(e(),null):!1===t?null:t.apply(void 0,zu([],Bu(n))).pipe(nh(1)).subscribe((function(){return e()}))}function rd(e,t,n){var r,i,o,a=!1;return e&&"object"==typeof e?(o=null!==(r=e.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=e.windowTime)&&void 0!==i?i:1/0,a=!!e.refCount,n=e.scheduler):o=null!=e?e:1/0,td({connector:function(){return new Dc(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function id(e){return _c((function(t,n){var r,i=!1,o=!1,a=0;t.subscribe(new Ec(n,(function(s){o=!0,e&&!e(s,a++,t)||(i&&n.error(new zl("Too many matching values")),i=!0,r=s)}),(function(){i?(n.next(r),n.complete()):n.error(o?new Bl("No matching values"):new Ml)})))}))}function od(e){return Af((function(t,n){return e<=n}))}function ad(e){return e<=0?vc:_c((function(t,n){var r=new Array(e),i=0;return t.subscribe(new Ec(n,(function(t){var o=i++;if(o<e)r[o]=t;else{var a=o%e,s=r[a];r[a]=t,n.next(s)}}))),function(){r=null}}))}function sd(e){return _c((function(t,n){var r=!1,i=new Ec(n,(function(){null==i||i.unsubscribe(),r=!0}),nc);Sl(e).subscribe(i),t.subscribe(new Ec(n,(function(e){return r&&n.next(e)})))}))}function ud(e){return _c((function(t,n){var r=!1,i=0;t.subscribe(new Ec(n,(function(t){return(r||(r=!e(t,i++)))&&n.next(t)})))}))}function cd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e);return _c((function(t,r){(n?hf(e,t,n):hf(e,t)).subscribe(r)}))}function ld(e,t){return _c((function(n,r){var i=null,o=0,a=!1,s=function(){return a&&!i&&r.complete()};n.subscribe(new Ec(r,(function(n){null==i||i.unsubscribe();var a=0,u=o++;Sl(e(n,u)).subscribe(i=new Ec(r,(function(e){return r.next(t?t(n,e,u,a++):e)}),(function(){i=null,s()})))}),(function(){a=!0,s()})))}))}function fd(){return ld(vc)}function hd(e,t){return qu(t)?ld((function(){return e}),t):ld((function(){return e}))}function dd(e,t){return _c((function(n,r){var i=t;return ld((function(t,n){return e(i,t,n)}),(function(e,t){return i=t,t}))(n).subscribe(r),function(){i=null}}))}function pd(e){return _c((function(t,n){Sl(e).subscribe(new Ec(n,(function(){return n.complete()}),nc)),!n.closed&&t.subscribe(n)}))}function vd(e,t){return void 0===t&&(t=!1),_c((function(n,r){var i=0;n.subscribe(new Ec(r,(function(n){var o=e(n,i++);(o||t)&&r.next(n),!o&&r.complete()})))}))}function yd(e,t,n){var r=qu(e)||t||n?{next:e,error:t,complete:n}:e;return r?_c((function(e,t){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var i=!0;e.subscribe(new Ec(t,(function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)}),(function(){var e;i=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()}),(function(e){var n;i=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)}),(function(){var e,t;i&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):vc}var bd={leading:!0,trailing:!1};function md(e,t){var n=void 0===t?bd:t,r=n.leading,i=n.trailing;return _c((function(t,n){var o=!1,a=null,s=null,u=!1,c=function(){null==s||s.unsubscribe(),s=null,i&&(h(),u&&n.complete())},l=function(){s=null,u&&n.complete()},f=function(t){return s=Sl(e(t)).subscribe(new Ec(n,c,l))},h=function(){if(o){o=!1;var e=a;a=null,n.next(e),!u&&f(e)}};t.subscribe(new Ec(n,(function(e){o=!0,a=e,(!s||s.closed)&&(r?h():f(e))}),(function(){u=!0,(!(i&&o&&s)||s.closed)&&n.complete()})))}))}function gd(e,t,n){void 0===t&&(t=Xc),void 0===n&&(n=bd);var r=gf(e,t);return md((function(){return r}),n)}function wd(e){return void 0===e&&(e=Zc),function(t){return df((function(){return t.pipe(Qh((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Kl((function(e){var t=e.current,n=e.last,r=e.value;return new _d(r,t-n)})))}))}}var _d=function(e,t){this.value=e,this.interval=t};function Ed(e,t,n){var r,i,o;if(n=null!=n?n:Zc,Hl(e)?r=e:"number"==typeof e&&(i=e),!t)throw new TypeError("No observable provided to switch to");if(o=function(){return t},null==r&&null==i)throw new TypeError("No timeout provided.");return $l({first:r,each:i,scheduler:n,with:o})}function xd(e){return void 0===e&&(e=Cc),Kl((function(t){return{value:t,timestamp:e.now()}}))}function kd(e){return _c((function(t,n){var r=new jc;n.next(r.asObservable());var i=function(e){r.error(e),n.error(e)};return t.subscribe(new Ec(n,(function(e){return null==r?void 0:r.next(e)}),(function(){r.complete(),n.complete()}),i)),e.subscribe(new Ec(n,(function(){r.complete(),n.next(r=new jc)}),nc,i)),function(){null==r||r.unsubscribe(),r=null}}))}function Sd(e,t){void 0===t&&(t=0);var n=t>0?t:e;return _c((function(t,r){var i=[new jc],o=0;r.next(i[0].asObservable()),t.subscribe(new Ec(r,(function(t){var a,s;try{for(var u=Fu(i),c=u.next();!c.done;c=u.next()){c.value.next(t)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}var l=o-e+1;if(l>=0&&l%n==0&&i.shift().complete(),++o%n==0){var f=new jc;i.push(f),r.next(f.asObservable())}}),(function(){for(;i.length>0;)i.shift().complete();r.complete()}),(function(e){for(;i.length>0;)i.shift().error(e);r.error(e)}),(function(){null,i=null})))}))}function Ad(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=Nl(r))&&void 0!==t?t:Xc,a=null!==(n=r[0])&&void 0!==n?n:null,s=r[1]||1/0;return _c((function(t,n){var r=[],i=!1,u=function(e){var t=e.window,n=e.subs;t.complete(),n.unsubscribe(),Wu(r,e),i&&c()},c=function(){if(r){var t=new Ju;n.add(t);var i=new jc,a={window:i,subs:t,seen:0};r.push(a),n.next(i.asObservable()),t.add(o.schedule((function(){return u(a)}),e))}};null!==a&&a>=0?n.add(o.schedule((function(){c(),!this.closed&&n.add(this.schedule(null,a))}),a)):i=!0,c();var l=function(e){return r.slice().forEach(e)},f=function(e){l((function(t){var n=t.window;return e(n)})),e(n),n.unsubscribe()};return t.subscribe(new Ec(n,(function(e){l((function(t){t.window.next(e),s<=++t.seen&&u(t)}))}),(function(){return f((function(e){return e.complete()}))}),(function(e){return f((function(t){return t.error(e)}))}))),function(){r=null}}))}function Od(e,t){return _c((function(n,r){var i=[],o=function(e){for(;0<i.length;)i.shift().error(e);r.error(e)};Sl(e).subscribe(new Ec(r,(function(e){var n=new jc;i.push(n);var a,s=new Ju;try{a=Sl(t(e))}catch(u){return void o(u)}r.next(n.asObservable()),s.add(a.subscribe(new Ec(r,(function(){Wu(i,n),n.complete(),s.unsubscribe()}),nc,o)))}),nc)),n.subscribe(new Ec(r,(function(e){var t,n,r=i.slice();try{for(var o=Fu(r),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<i.length;)i.shift().complete();r.complete()}),o,(function(){for(;0<i.length;)i.shift().unsubscribe()})))}))}function Pd(e){return _c((function(t,n){var r,i,o=function(e){r.error(e),n.error(e)},a=function(){var t;null==i||i.unsubscribe(),null==r||r.complete(),r=new jc,n.next(r.asObservable());try{t=Sl(e())}catch(s){return void o(s)}t.subscribe(i=new Ec(n,a,a,o))};a(),t.subscribe(new Ec(n,(function(e){return r.next(e)}),(function(){r.complete(),n.complete()}),o,(function(){null==i||i.unsubscribe(),r=null})))}))}function Id(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=jl(e);return _c((function(t,r){for(var i=e.length,o=new Array(i),a=e.map((function(){return!1})),s=!1,u=function(t){Sl(e[t]).subscribe(new Ec(r,(function(e){o[t]=e,s||a[t]||(a[t]=!0,(s=a.every(vc))&&(a=null))}),nc))},c=0;c<i;c++)u(c);t.subscribe(new Ec(r,(function(e){if(s){var t=zu([e],Bu(o));r.next(n?n.apply(void 0,zu([],Bu(t))):t)}})))}))}function Td(e){return zf(Pf,e)}function jd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _c((function(t,n){Pf.apply(void 0,zu([t],Bu(e))).subscribe(n)}))}function Nd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return jd.apply(void 0,zu([],Bu(e)))}var Ld=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable:mc,ConnectableObservable:kc,observable:pc,animationFrames:function(e){return e?Oc(e):Ic},Subject:jc,BehaviorSubject:Lc,ReplaySubject:Dc,AsyncSubject:Uc,asap:Yc,asapScheduler:Jc,async:Zc,asyncScheduler:Xc,queue:tl,queueScheduler:el,animationFrame:il,animationFrameScheduler:rl,VirtualTimeScheduler:ol,VirtualAction:al,Scheduler:Kc,Subscription:Ju,Subscriber:uc,Notification:Ul,get NotificationKind(){return fl},pipe:yc,noop:nc,identity:vc,isObservable:function(e){return!!e&&(e instanceof mc||qu(e.lift)&&qu(e.subscribe))},lastValueFrom:function(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o,a=!1;e.subscribe({next:function(e){o=e,a=!0},error:i,complete:function(){a?r(o):n?r(t.defaultValue):i(new Ml)}})}))},firstValueFrom:function(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o=new cc({next:function(e){r(e),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new Ml)}});e.subscribe(o)}))},ArgumentOutOfRangeError:Fl,EmptyError:Ml,NotFoundError:Bl,ObjectUnsubscribedError:Tc,SequenceError:zl,TimeoutError:Gl,UnsubscriptionError:Ku,bindCallback:function(e,t,n){return Xl(!1,e,t,n)},bindNodeCallback:function(e,t,n){return Xl(!0,e,t,n)},combineLatest:of,concat:hf,connectable:function(e,t){void 0===t&&(t=pf);var n=null,r=t.connector,i=t.resetOnDisconnect,o=void 0===i||i,a=r(),s=new mc((function(e){return a.subscribe(e)}));return s.connect=function(){return n&&!n.closed||(n=df((function(){return e})).subscribe(a),o&&n.add((function(){return a=r()}))),n},s},defer:df,empty:function(e){return e?function(e){return new mc((function(t){return e.schedule((function(){return t.complete()}))}))}(e):sl},forkJoin:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=jl(e),r=nf(e),i=r.args,o=r.keys,a=new mc((function(e){var t=i.length;if(t)for(var n=new Array(t),r=t,a=t,s=function(t){var s=!1;Sl(i[t]).subscribe(new Ec(e,(function(e){s||(s=!0,a--),n[t]=e}),(function(){--r&&s||(a||e.next(o?rf(o,n):n),e.complete())})))},u=0;u<t;u++)s(u);else e.complete()}));return n?a.pipe(Jl(n)):a},from:kl,fromEvent:function e(t,n,r,i){if(qu(r)&&(i=r,r=void 0),i)return e(t,n,r).pipe(Jl(i));var o=Bu(function(e){return qu(e.addEventListener)&&qu(e.removeEventListener)}(t)?yf.map((function(e){return function(i){return t[e](n,i,r)}})):function(e){return qu(e.addListener)&&qu(e.removeListener)}(t)?vf.map(mf(t,n)):function(e){return qu(e.on)&&qu(e.off)}(t)?bf.map(mf(t,n)):[],2),a=o[0],s=o[1];if(!a&&cl(t))return cf((function(t){return e(t,n,r)}))(Pl(t));if(!a)throw new TypeError("Invalid event target");return new mc((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return s(t)}}))},fromEventPattern:function e(t,n,r){return r?e(t,n).pipe(Jl(r)):new mc((function(e){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1===t.length?t[0]:t)},i=t(r);return qu(n)?function(){return n(r,i)}:void 0}))},generate:function(e,t,n,r,i){var o,a,s,u;function c(){var e;return Mu(this,(function(r){switch(r.label){case 0:e=u,r.label=1;case 1:return t&&!t(e)?[3,4]:[4,s(e)];case 2:r.sent(),r.label=3;case 3:return e=n(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(u=(o=e).initialState,t=o.condition,n=o.iterate,a=o.resultSelector,s=void 0===a?vc:a,i=o.scheduler):(u=e,!r||Il(r)?(s=vc,i=r):s=r),df(i?function(){return vl(c(),i)}:c)},iif:function(e,t,n){return df((function(){return e()?t:n}))},interval:wf,merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Nl(e),r=Ll(e,1/0),i=e;return i.length?1===i.length?Sl(i[0]):lf(r)(Pl(i,n)):sl},never:function(){return _f},of:Cl,onErrorResumeNext:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return kf(xf(e))(sl)},pairs:function(e,t){return kl(Object.entries(e),t)},partition:function(e,t,n){return[Af(t,n)(Sl(e)),Af(Sf(t,n))(Sl(e))]},race:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=xf(e)).length?Sl(e[0]):new mc(Of(e))},range:function(e,t,n){if(null==t&&(t=e,e=0),t<=0)return sl;var r=t+e;return new mc(n?function(t){var i=e;return n.schedule((function(){i<r?(t.next(i++),this.schedule()):t.complete()}))}:function(t){for(var n=e;n<r&&!t.closed;)t.next(n++);t.complete()})},throwError:Dl,timer:gf,using:function(e,t){return new mc((function(n){var r=e(),i=t(r);return(i?Sl(i):sl).subscribe(n),function(){r&&r.unsubscribe()}}))},zip:Pf,scheduled:xl,EMPTY:sl,NEVER:_f,config:Qu,audit:If,auditTime:Tf,buffer:jf,bufferCount:Nf,bufferTime:Lf,bufferToggle:Cf,bufferWhen:Df,catchError:Uf,combineAll:Gf,combineLatestAll:Hf,combineLatestWith:qf,concatAll:ff,concatMap:Vf,concatMapTo:Kf,concatWith:Jf,connect:Xf,count:Zf,debounce:Qf,debounceTime:eh,defaultIfEmpty:th,delay:ah,delayWhen:oh,dematerialize:sh,distinct:uh,distinctUntilChanged:ch,distinctUntilKeyChanged:fh,elementAt:ph,endWith:vh,every:yh,exhaust:mh,exhaustAll:bh,exhaustMap:gh,expand:wh,filter:Af,finalize:_h,find:Eh,findIndex:kh,first:Sh,groupBy:Ah,ignoreElements:rh,isEmpty:Ph,last:Th,map:Kl,mapTo:ih,materialize:jh,max:Nh,mergeAll:lf,flatMap:Lh,mergeMap:cf,mergeMapTo:Ch,mergeScan:Dh,mergeWith:Rh,min:Mh,multicast:Fh,observeOn:Yl,pairwise:Bh,pluck:zh,publish:Hh,publishBehavior:Gh,publishLast:$h,publishReplay:qh,raceWith:Vh,reduce:Mf,repeat:Kh,repeatWhen:Wh,retry:Jh,retryWhen:Yh,refCount:xc,sample:Xh,sampleTime:Zh,scan:Qh,sequenceEqual:ed,share:td,shareReplay:rd,single:id,skip:od,skipLast:ad,skipUntil:sd,skipWhile:ud,startWith:cd,subscribeOn:Vl,switchAll:fd,switchMap:ld,switchMapTo:hd,switchScan:dd,take:nh,takeLast:Ih,takeUntil:pd,takeWhile:vd,tap:yd,throttle:md,throttleTime:gd,throwIfEmpty:hh,timeInterval:wd,timeout:$l,timeoutWith:Ed,timestamp:xd,toArray:Bf,window:kd,windowCount:Sd,windowTime:Ad,windowToggle:Od,windowWhen:Pd,withLatestFrom:Id,zipAll:Td,zipWith:Nd}));!function(e){var t=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.StreamStatic=e.Stream=e.CommitType=e.AnchorStatus=e.SignatureStatus=void 0;const n=t(Ao.exports),r=Oo,i=Ld,o=ko;var a,u,c,l;(a=e.SignatureStatus||(e.SignatureStatus={}))[a.GENESIS=0]="GENESIS",a[a.PARTIAL=1]="PARTIAL",a[a.SIGNED=2]="SIGNED",(u=e.AnchorStatus||(e.AnchorStatus={}))[u.NOT_REQUESTED=0]="NOT_REQUESTED",u[u.PENDING=1]="PENDING",u[u.PROCESSING=2]="PROCESSING",u[u.ANCHORED=3]="ANCHORED",u[u.FAILED=4]="FAILED",(l=c=e.CommitType||(e.CommitType={}))[l.GENESIS=0]="GENESIS",l[l.SIGNED=1]="SIGNED",l[l.ANCHOR=2]="ANCHOR";class h extends i.Observable{constructor(e,t){super((t=>{e.subscribe(t)})),this.state$=e,this._context=t}get id(){return new r.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get metadata(){var e;const{next:t,metadata:r}=this.state$.value;return n.default(null!==(e=null==t?void 0:t.metadata)&&void 0!==e?e:r)}get controllers(){return this.metadata.controllers}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return this.id.atCommit(this.tip)}get allCommitIds(){return this.state$.value.log.map((({cid:e})=>this.id.atCommit(e)))}get anchorCommitIds(){return this.state$.value.log.filter((({type:e})=>e===c.ANCHOR)).map((({cid:e})=>this.id.atCommit(e)))}get state(){return n.default(this.state$.value)}async sync(e={}){e=s({sync:o.SyncOptions.PREFER_CACHE},e);const t=await this.api.loadStream(this.id,e);this.state$.next(t.state)}_getContent(){var e;const{next:t,content:r}=this.state$.value;return n.default(null!==(e=null==t?void 0:t.content)&&void 0!==e?e:r)}}e.Stream=h,e.StreamStatic=function(){return e=>{}}}(So);var Cd={},Dd={exports:{}};!function(e,t){var n,r="undefined"!=typeof self?self:f,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=i,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,i="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in n,a="ArrayBuffer"in n;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=p(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=l(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var n,r,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},b.call(g.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(k){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function x(t,n){return new Promise((function(r,o){var a=new g(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new _(i,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}x.polyfill=!0,n.fetch||(n.fetch=x,n.Headers=h,n.Request=g,n.Response=_),e.Headers=h,e.Request=g,e.Response=_,e.fetch=x,Object.defineProperty(e,"__esModule",{value:!0})}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(Dd,Dd.exports);var Ud=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.fetchJson=void 0;const Rd=Ud(Dd.exports);Cd.fetchJson=async function(e,t={}){t.body&&Object.assign(t,{body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}});const n=await Rd.default(e,t);if(!n.ok){const t=await n.text();throw new Error(`HTTP request to '${e}' failed with status '${n.statusText}': ${t}`)}return n.json()};var Md={},Fd=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Bd=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zd=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Fd(t,e,n);return Bd(t,e),t},Hd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Md,"__esModule",{value:!0}),Md.StreamUtils=void 0;const Gd=Hd(bs),$d=Hd(Ao.exports),qd=zd(S),Vd=So,Kd=Oo;class Wd{static serializeCommit(e){const t=$d.default(e);return Wd.isSignedCommitContainer(t)?(t.jws.link=t.jws.link.toString(),t.linkedBlock=qd.toString(t.linkedBlock,"base64"),t):(Wd.isSignedCommit(e)&&(t.link=t.link.toString()),Wd.isAnchorCommit(e)&&(t.proof=t.proof.toString()),t.id&&(t.id=t.id.toString()),t.prev&&(t.prev=t.prev.toString()),t)}static deserializeCommit(e){const t=$d.default(e);return Wd.isSignedCommitContainer(t)?(t.jws.link=new Gd.default(t.jws.link),t.linkedBlock=qd.fromString(t.linkedBlock,"base64"),t):(Wd.isSignedCommit(t)&&(t.link=new Gd.default(t.link)),Wd.isAnchorCommit(t)&&(t.proof=new Gd.default(t.proof)),t.id&&(t.id=new Gd.default(t.id)),t.prev&&(t.prev=new Gd.default(t.prev)),t)}static serializeState(e){const t=$d.default(e);return t.log=t.log.map((e=>u(s({},e),{cid:e.cid.toString()}))),null!=t.anchorStatus&&(t.anchorStatus=Vd.AnchorStatus[t.anchorStatus]),null!=t.anchorScheduledFor&&(t.anchorScheduledFor=new Date(t.anchorScheduledFor).toISOString()),null!=t.anchorProof&&(t.anchorProof.txHash=t.anchorProof.txHash.toString(),t.anchorProof.root=t.anchorProof.root.toString()),null!=t.lastAnchored&&(t.lastAnchored=t.lastAnchored.toString()),t.doctype=Kd.StreamType.nameByCode(t.type),t}static deserializeState(e){const t=$d.default(e);t.doctype&&(t.type=Kd.StreamType.codeByName(t.doctype),delete t.doctype),t.log=t.log.map((e=>u(s({},e),{cid:new Gd.default(e.cid)}))),t.anchorProof&&(t.anchorProof.txHash=new Gd.default(t.anchorProof.txHash),t.anchorProof.root=new Gd.default(t.anchorProof.root));let n=!0;return t.anchorStatus&&(t.anchorStatus=Vd.AnchorStatus[t.anchorStatus],n=t.anchorStatus!==Vd.AnchorStatus.FAILED&&t.anchorStatus!==Vd.AnchorStatus.ANCHORED),t.anchorScheduledFor&&(n?t.anchorScheduledFor=Date.parse(t.anchorScheduledFor):delete t.anchorScheduledFor),t.lastAnchored&&(t.lastAnchored=new Gd.default(t.lastAnchored)),t}static statesEqual(e,t){return JSON.stringify(Wd.serializeState(e))===JSON.stringify(Wd.serializeState(t))}static isStateSupersetOf(e,t){if(e.log.length<t.log.length)return!1;for(const n in t.log)if(!e.log[n].cid.equals(t.log[n].cid))return!1;return!0}static async convertCommitToSignedCommitContainer(e,t){if(Wd.isSignedCommit(e)){return{jws:e,linkedBlock:(await t.block.get(e.link)).data}}return e}static isSignedCommitContainer(e){return e&&void 0!==e.jws}static isSignedCommit(e){return e&&void 0!==e.link}static isAnchorCommit(e){return e&&void 0!==e.proof}}Md.StreamUtils=Wd;var Jd={};var Yd=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit:If,auditTime:Tf,buffer:jf,bufferCount:Nf,bufferTime:Lf,bufferToggle:Cf,bufferWhen:Df,catchError:Uf,combineAll:Gf,combineLatestAll:Hf,combineLatest:$f,combineLatestWith:qf,concat:Wf,concatAll:ff,concatMap:Vf,concatMapTo:Kf,concatWith:Jf,connect:Xf,count:Zf,debounce:Qf,debounceTime:eh,defaultIfEmpty:th,delay:ah,delayWhen:oh,dematerialize:sh,distinct:uh,distinctUntilChanged:ch,distinctUntilKeyChanged:fh,elementAt:ph,endWith:vh,every:yh,exhaust:mh,exhaustAll:bh,exhaustMap:gh,expand:wh,filter:Af,finalize:_h,find:Eh,findIndex:kh,first:Sh,groupBy:Ah,ignoreElements:rh,isEmpty:Ph,last:Th,map:Kl,mapTo:ih,materialize:jh,max:Nh,merge:Uh,mergeAll:lf,flatMap:Lh,mergeMap:cf,mergeMapTo:Ch,mergeScan:Dh,mergeWith:Rh,min:Mh,multicast:Fh,observeOn:Yl,onErrorResumeNext:kf,pairwise:Bh,partition:function(e,t){return function(n){return[Af(e,t)(n),Af(Sf(e,t))(n)]}},pluck:zh,publish:Hh,publishBehavior:Gh,publishLast:$h,publishReplay:qh,race:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Vh.apply(void 0,zu([],Bu(xf(e))))},raceWith:Vh,reduce:Mf,repeat:Kh,repeatWhen:Wh,retry:Jh,retryWhen:Yh,refCount:xc,sample:Xh,sampleTime:Zh,scan:Qh,sequenceEqual:ed,share:td,shareReplay:rd,single:id,skip:od,skipLast:ad,skipUntil:sd,skipWhile:ud,startWith:cd,subscribeOn:Vl,switchAll:fd,switchMap:ld,switchMapTo:hd,switchScan:dd,take:nh,takeLast:Ih,takeUntil:pd,takeWhile:vd,tap:yd,throttle:md,throttleTime:gd,throwIfEmpty:hh,timeInterval:wd,timeout:$l,timeoutWith:Ed,timestamp:xd,toArray:Bf,window:kd,windowCount:Sd,windowTime:Ad,windowToggle:Od,windowWhen:Pd,withLatestFrom:Id,zip:jd,zipAll:Td,zipWith:Nd}));Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.TestUtils=void 0;const Xd=Yd,Zd=Ld,Qd=Oo;class ep extends Zd.BehaviorSubject{constructor(e){super(e),this.state=this.value,this.id=new Qd.StreamID(this.state.type,this.state.log[0].cid)}}Jd.TestUtils=class{static registerChangeListener(e){return e.pipe(Xd.take(1)).toPromise()}static async waitForState(e,t,n,r){if(n(e.state))return;const i=new Promise((e=>setTimeout(e,t))),o=e.pipe(Xd.filter((e=>n(e)))).toPromise();await Promise.race([i,o]),n(e.state)||r()}static runningState(e){return new ep(e)}};var tp={},np={},rp={};!function(e){var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerProviderBase=e.ServiceLoggerBase=e.DiagnosticsLoggerBase=e.LogLevel=e.LogStyle=void 0,(n=t=e.LogStyle||(e.LogStyle={})).verbose="info",n.info="info",n.imp="imp",n.warn="warn",n.err="err",(i=r=e.LogLevel||(e.LogLevel={}))[i.verbose=0]="verbose",i[i.debug=1]="debug",i[i.important=2]="important",i[i.warn=3]="warn";e.DiagnosticsLoggerBase=class{constructor(e,t,n){this.logLevel=e,this.includeStackTrace=this.logLevel<=r.debug,this.logToFiles=t,this.fileLogger=n}write(e){this.debug(e)}verbose(e){this.logLevel>r.verbose||this.log(t.verbose,e)}debug(e){this.logLevel>r.debug||this.log(t.info,e)}imp(e){this.logLevel>r.important||this.log(t.imp,e)}warn(e){this.log(t.warn,e)}err(e){this.log(t.err,e)}log(e,t){throw new Error("Not implmented in base class")}};e.ServiceLoggerBase=class{constructor(e,t,n,i){this.service=e,this.logLevel=t,this.logToFiles=n,this.stream=i,this.logToConsole=this.logLevel<=r.debug}log(e){this.write(this.format(e))}write(e){e=`[${(new Date).toUTCString()}] service=${this.service} ${e}`,this.logToConsole&&console.log(e)}format(e){throw new Error("Not implmented in base class")}};const o={logLevel:r.important,logToFiles:!1};e.LoggerProviderBase=class{constructor(e={},t){if(this.config={logLevel:void 0!==e.logLevel?e.logLevel:o.logLevel,logToFiles:void 0!==e.logToFiles?e.logToFiles:o.logToFiles,logDirectory:e.logDirectory},this._fileLoggerFactory=t,this.config.logToFiles&&!this._fileLoggerFactory)throw new Error("Must provide a FileLoggerFactory in order to log to files");this._diagnosticLogger=this._makeDiagnosticLogger()}_makeDiagnosticLogger(){throw new Error("Not implmented in base class")}getDiagnosticsLogger(){return this._diagnosticLogger}makeServiceLogger(e){throw new Error("Not implmented in base class")}}}(rp);var ip=sp;function op(e){return e&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ap(e){return e}function sp(e,t){const n=(t=t||{}).delimiter||".",r=t.maxDepth,i=t.transformKey||ap,o={};return function e(a,s,u){u=u||1,Object.keys(a).forEach((function(c){const l=a[c],f=t.safe&&Array.isArray(l),h=Object.prototype.toString.call(l),d=op(l),p="[object Object]"===h||"[object Array]"===h,v=s?s+n+i(c):i(c);if(!f&&!d&&p&&Object.keys(l).length&&(!t.maxDepth||u<r))return e(l,v,u+1);o[v]=l}))}(e),o}sp.flatten=sp,sp.unflatten=function e(t,n){const r=(n=n||{}).delimiter||".",i=n.overwrite||!1,o=n.transformKey||ap,a={};if(op(t)||"[object Object]"!==Object.prototype.toString.call(t))return t;function s(e){const t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||n.object?e:t}return t=Object.keys(t).reduce((function(e,i){const o=Object.prototype.toString.call(t[i]);return!("[object Object]"===o||"[object Array]"===o)||function(e){const t=Object.prototype.toString.call(e),n="[object Array]"===t,r="[object Object]"===t;if(!e)return!0;if(n)return!e.length;if(r)return!Object.keys(e).length}(t[i])?(e[i]=t[i],e):(a=i,s=e,u=sp(t[i],n),Object.keys(u).reduce((function(e,t){return e[a+r+t]=u[t],e}),s));var a,s,u}),{}),Object.keys(t).forEach((function(u){const c=u.split(r).map(o);let l=s(c.shift()),f=s(c[0]),h=a;for(;void 0!==f;){if("__proto__"===l)return;const e=Object.prototype.toString.call(h[l]),t="[object Object]"===e||"[object Array]"===e;if(!i&&!t&&void 0!==h[l])return;(i&&!t||!i&&null==h[l])&&(h[l]="number"!=typeof f||n.object?{}:[]),h=h[l],c.length>0&&(l=s(c.shift()),f=s(c[0]))}h[l]=e(t[u],n)})),a};var up=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(np,"__esModule",{value:!0}),np.ServiceLogger=np.DiagnosticsLogger=void 0;const cp=rp,lp=up(ip),fp={info:console.log,imp:console.log,warn:console.warn,err:console.error};np.DiagnosticsLogger=class extends cp.DiagnosticsLoggerBase{constructor(e){super(e,!1),this.logger=fp}log(e,t){this.logger[e](t)}};np.ServiceLogger=class extends cp.ServiceLoggerBase{constructor(e,t){super(e,t,!1)}format(e){return JSON.stringify(lp.default(e))}},Object.defineProperty(tp,"__esModule",{value:!0}),tp.LoggerProvider=void 0;const hp=np,dp=rp;tp.LoggerProvider=class extends dp.LoggerProviderBase{_makeDiagnosticLogger(){return new hp.DiagnosticsLogger(this.config.logLevel)}makeServiceLogger(e){return new hp.ServiceLogger(e,this.config.logLevel)}};var pp={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.Networks=void 0,(t=e.Networks||(e.Networks={})).MAINNET="mainnet",t.ELP="elp",t.TESTNET_CLAY="testnet-clay",t.DEV_UNSTABLE="dev-unstable",t.LOCAL="local",t.INMEMORY="inmemory"}(pp);var vp={};Object.defineProperty(vp,"__esModule",{value:!0});var yp={};Object.defineProperty(yp,"__esModule",{value:!0}),yp.UnreachableCaseError=void 0;class bp extends Error{constructor(e,t){super(`Unhandled ${JSON.stringify(e)}: ${t}`)}}yp.UnreachableCaseError=bp;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});var gp={};Object.defineProperty(gp,"__esModule",{value:!0}),gp.StreamStateSubject=void 0;const wp=Ld,_p=Md;class Ep extends wp.BehaviorSubject{next(e){const t=this.value;_p.StreamUtils.statesEqual(t,e)||super.next(e)}}gp.StreamStateSubject=Ep;var xp={};Object.defineProperty(xp,"__esModule",{value:!0}),xp.SubscriptionSet=void 0;xp.SubscriptionSet=class{constructor(e=new Set){this.subscriptions=e}add(e){e.add((()=>{this.subscriptions.delete(e)})),this.subscriptions.add(e)}unsubscribe(){this.subscriptions.forEach((e=>e.unsubscribe()))}},function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(_o,e),n(Eo,e),n(xo,e),n(ko,e),n(So,e),n(Cd,e),n(Md,e),n(Jd,e),n(tp,e),n(np,e),n(pp,e),n(rp,e),n(vp,e),n(yp,e),n(mp,e),n(gp,e),n(xp,e)}(wo);var kp,Sp=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Ap=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Op=f&&f.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Pp=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Sp(t,e,n);return Ap(t,e),t},Ip=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.TileDocument=void 0;const Tp=Ip(Li),jp=Pp(S),Np=co,Lp=wo,Cp=Oo,Dp={anchor:!0,publish:!0,sync:Lp.SyncOptions.PREFER_CACHE},Up={sync:Lp.SyncOptions.PREFER_CACHE},Rp={anchor:!0,publish:!0};function Mp(e){var t;if("string"==typeof(null==e?void 0:e.schema))try{Cp.CommitID.fromString(e.schema)}catch(r){throw new Error("Schema must be a CommitID")}const n={controllers:null==e?void 0:e.controllers,family:null==e?void 0:e.family,schema:null===(t=null==e?void 0:e.schema)||void 0===t?void 0:t.toString(),tags:null==e?void 0:e.tags};return Object.keys(n).forEach((e=>void 0===n[e]&&delete n[e])),n}async function Fp(e){if(null==e.did)throw new Error("No DID provided");e.did.authenticated||(await e.did.authenticate(),e.loggerProvider&&e.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${e.did.id}`))}async function Bp(e,t,n){return await Fp(e),e.did.createDagJWS(t,{did:n})}async function zp(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let Hp=kp=class extends Lp.Stream{get content(){return this._getContent()}static async create(e,t,n,r={}){r=s(s({},Dp),r),(null==n?void 0:n.deterministic)||null!=r.syncTimeoutSeconds||(r.syncTimeoutSeconds=0);const i=await kp.makeGenesis(e,t,n);return e.createStreamFromGenesis(kp.STREAM_TYPE_ID,i,r)}static async createFromGenesis(e,t,n={}){var r;n=s(s({},Dp),n),(null===(r=t.header)||void 0===r?void 0:r.unique)&&null==n.syncTimeoutSeconds&&(n.syncTimeoutSeconds=0);const i=t.data?await Bp(e,t,t.header.controllers[0]):t;return e.createStreamFromGenesis(kp.STREAM_TYPE_ID,i,n)}static async load(e,t,n={}){n=s(s({},Up),n);const r=Cp.StreamRef.from(t);if(r.type!=kp.STREAM_TYPE_ID)throw new Error(`StreamID ${r.toString()} does not refer to a '${kp.STREAM_TYPE_NAME}' stream, but to a ${r.typeName}`);return e.loadStream(r,n)}async update(e,t,n={}){n=s(s({},Rp),n);const r=await this.makeCommit(this.api,e,t),i=await this.api.applyCommit(this.id,r,n);this.state$.next(i.state)}async patch(e,t={}){t=s(s({},Rp),t);const n={header:Mp(this.metadata),data:e,prev:this.tip,id:this.state$.id.cid},r=await Bp(this.api,n,this.controllers[0]),i=await this.api.applyCommit(this.id,r,t);this.state$.next(i.state)}makeReadOnly(){this.update=zp,this.patch=zp}async makeCommit(e,t,n){var r;const i=Mp(n);if(null==t&&(t=this.content),i.controllers&&1!==(null===(r=i.controllers)||void 0===r?void 0:r.length))throw new Error("Exactly one controller must be specified");return Bp(e,{header:i,data:Tp.default.compare(this.content,t),prev:this.tip,id:this.state.log[0].cid},this.controllers[0])}static async makeGenesis(e,t,n){var r;if(n||(n={}),!n.controllers||0===n.controllers.length){if(!e.did)throw new Error("No controllers specified");await Fp(e),n.controllers=[e.did.id]}if(1!==(null===(r=n.controllers)||void 0===r?void 0:r.length))throw new Error("Exactly one controller must be specified");const i=Mp(n);if(null==n?void 0:n.deterministic){if(t)throw new Error("Initial content must be null when creating a deterministic Tile document")}else i.unique=jp.toString(Np.randomBytes(12),"base64");if(null==t)return{header:i};const o={data:t,header:i};return await Bp(e,o,n.controllers[0])}};Hp.STREAM_TYPE_NAME="tile",Hp.STREAM_TYPE_ID=0,Hp=kp=Op([Lp.StreamStatic()],Hp),Ni.TileDocument=Hp,function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ni,e)}(ji);var Gp={},$p={exports:{}};!function(e){const t=Symbol("newer"),n=Symbol("older");class r{constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let r,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let a=e[Symbol.iterator]();for(let s=a.next();!s.done;s=a.next()){let e=new i(s.value[0],s.value[1]);if(this._keymap.set(e.key,e),r?(r[t]=e,e[n]=r):this.oldest=e,r=e,0==o--)throw new Error("overflow")}this.newest=r,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,r){var o=this._keymap.get(e);return o?(o.value=r,this._markEntryAsUsed(o),this):(this._keymap.set(e,o=new i(e,r)),this.newest?(this.newest[t]=o,o[n]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var r=this._keymap.get(e);return r?(this._keymap.delete(r.key),r[t]&&r[n]?(r[n][t]=r[t],r[t][n]=r[n]):r[t]?(r[t][n]=void 0,this.oldest=r[t]):r[n]?(r[n][t]=void 0,this.newest=r[n]):this.oldest=this.newest=void 0,this.size--,r.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new a(this.oldest)}values(){return new s(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(e,n){"object"!=typeof n&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[t]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[t];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}function i(e,r){this.key=e,this.value=r,this[t]=void 0,this[n]=void 0}function o(e){this.entry=e}function a(e){this.entry=e}function s(e){this.entry=e}e.LRUMap=r,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}($p.exports);var qp=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Vp=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Kp=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&qp(t,e,n);return Vp(t,e),t},Wp=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gp,"__esModule",{value:!0});const Jp=Wp(Dd.exports),Yp=Kp(S),Xp=new $p.exports.LRUMap(100),Zp={dag:{get:async e=>(async e=>{const t=Xp.get(e);if(t)return t;const n=await Jp.default(e);if(n.ok){const t=await n.json();return Xp.set(e,t),t}throw new Error("Not a valid 3ID")})((e=>`https://ipfs.3box.io/did-doc?cid=${encodeURIComponent(e)}`)(e))}},Qp=(e,t)=>{const n=new Uint8Array(e.length+2);return n[0]=t?236:231,n[1]=1,n.set(e,2),`z${Yp.toString(n,"base58btc")}`};Gp.default=async(e,t=Zp)=>{const n=(await t.dag.get(e)).value;let r,i;try{const e=n.publicKey.findIndex((e=>e.id.endsWith("signingKey"))),t=n.publicKey.findIndex((e=>e.id.endsWith("encryptionKey")));r=n.publicKey[e].publicKeyHex,i=n.publicKey[t].publicKeyBase64}catch(u){throw new Error("Not a valid 3ID")}const o=(e=>{const t=e.slice(2,66);return`${0==(1&e.slice(66,130))?"02":"03"}${t}`})(r),a=Qp(Yp.fromString(o,"base16")),s=Qp(Yp.fromString(i,"base64pad"),!0);return{keyDid:`did:key:${a}`,publicKeys:{[a.slice(-15)]:a,[s.slice(-15)]:s}}};var ev=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),tv=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nv=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&ev(t,e,n);return tv(t,e),t},rv=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.wrapDocument=void 0;const iv=ji,ov=rv(Gp),av=nv(S),sv=Oo,uv=rv(bs),cv="application/did+json",lv=e=>new Date(1e3*e).toISOString().split(".")[0]+"Z";function fv(e,t){if(!e||!e.publicKeys)return null;const n={id:t,verificationMethod:[],authentication:[],keyAgreement:[]};return Object.entries(e.publicKeys).reduce(((e,[n,r])=>{const i=av.fromString(r.slice(1),"base58btc"),o={id:`${t}#${n}`,type:"",controller:t,publicKeyBase58:av.toString(i.slice(2),"base58btc")};return 231===i[0]?(o.type="EcdsaSecp256k1Signature2019",e.verificationMethod.push(o),e.authentication.push(o)):236===i[0]&&(o.type="X25519KeyAgreementKey2019",e.verificationMethod.push(o),e.keyAgreement.push(o)),e}),n)}Ti.wrapDocument=fv;const hv=async(e,t,n,r)=>{var i;const o=sv.StreamID.fromString(t);let a;const s=[{streamId:o}];n.commit?(a=o.atCommit(n.commit),s.push({streamId:a})):n.timestamp&&s.push({streamId:o,atTime:n.timestamp});const u=await e.multiQuery(s),c=u[t].state,l=(null==a?void 0:a.toString())||Object.keys(u).find((e=>e!==t)),f=function(e,t){var n;const r={},{timestamp:i,cid:o}=e.log.pop()||{},{timestamp:a,cid:s}=t.log.find((({timestamp:e})=>e>i||!i&&e))||{},u=null===(n=t.log.find((({timestamp:e})=>Boolean(e))))||void 0===n?void 0:n.timestamp;return u&&(r.created=lv(u)),i&&(r.updated=lv(i)),a&&(r.nextUpdate=lv(a)),o&&(r.versionId=0===e.log.length?"0":null==o?void 0:o.toString()),s&&(r.nextVersionId=s.toString()),r}((null===(i=u[l])||void 0===i?void 0:i.state)||c,c),h=u[l||t];if(l&&!h)throw new Error(`No resolution for commit ${l}`);const d=fv(h.content,`did:3:${r||t}`);return{didResolutionMetadata:{contentType:cv},didDocument:d,didDocumentMetadata:f}};var dv=Ti.default={getResolver:e=>({3:async(t,n,r,i)=>{const o=i.accept||cv;try{const t=function(e=""){const t=e.split("&").find((e=>e.includes("versionId")||e.includes("version-id"))),n=e.split("&").find((e=>e.includes("versionTime")));return{commit:t?t.split("=")[1]:void 0,timestamp:n?Math.floor(new Date(n.split("=")[1]).getTime()/1e3):void 0}}(n.query),r=await((e=>{try{return new uv.default(e),!0}catch(t){return!1}})(n.id)?(async(e,t,n)=>{const r=await ov.default(t),i={controllers:[r.keyDid],family:"3id",deterministic:!0},o=(await iv.TileDocument.create(e,null,i,{anchor:!1,publish:!1})).id,a=await hv(e,o.toString(),n,t);return null===a.didDocument&&(a.didDocument=fv(r,`did:3:${t}`)),a})(e,n.id,t):hv(e,n.id,t));return"application/did+ld+json"===o?(r.didDocument["@context"]="https://www.w3.org/ns/did/v1",r.didResolutionMetadata.contentType="application/did+ld+json"):o!==cv&&(r.didDocument=null,r.didDocumentMetadata={},delete r.didResolutionMetadata.contentType,r.didResolutionMetadata.error="representationNotSupported"),r}catch(a){return{didResolutionMetadata:{error:"invalidDid",message:a.toString()},didDocument:null,didDocumentMetadata:{}}}}})},pv={},vv={},yv=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vv,"__esModule",{value:!0}),vv.delay=vv.combineURLs=vv.typeStreamID=void 0;const bv=yv(Oo);vv.typeStreamID=function(e){return"string"==typeof e?bv.default.fromString(e):e},vv.combineURLs=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},vv.delay=async function(e){await new Promise((t=>setTimeout((()=>t()),e)))};var mv={},gv=function(e,t){return(gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}gv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function _v(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Ev(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function xv(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kv(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Sv(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function Av(e){return this instanceof Av?(this.v=e,this):new Av(e)}function Ov(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Av?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Pv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=xv(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function Iv(e){return"function"==typeof e}function Tv(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jv=Tv((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Nv(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Lv=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=xv(o),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(Iv(u))try{u()}catch(p){i=p instanceof jv?p.errors:[p]}var c=this._teardowns;if(c){this._teardowns=null;try{for(var l=xv(c),f=l.next();!f.done;f=l.next()){var h=f.value;try{Uv(h)}catch(v){i=null!=i?i:[],v instanceof jv?i=Sv(Sv([],kv(i)),kv(v.errors)):i.push(v)}}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new jv(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Uv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Nv(t,e)},e.prototype.remove=function(t){var n=this._teardowns;n&&Nv(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Cv=Lv.EMPTY;function Dv(e){return e instanceof Lv||e&&"closed"in e&&Iv(e.remove)&&Iv(e.add)&&Iv(e.unsubscribe)}function Uv(e){Iv(e)?e():e.unsubscribe()}var Rv={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mv={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mv.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,Sv([],kv(e)))},clearTimeout:function(e){var t=Mv.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Fv(e){Mv.setTimeout((function(){var t=Rv.onUnhandledError;if(!t)throw e;t(e)}))}function Bv(){}var zv=Hv("C",void 0,void 0);function Hv(e,t,n){return{kind:e,value:t,error:n}}var Gv=null;function $v(e){if(Rv.useDeprecatedSynchronousErrorHandling){var t=!Gv;if(t&&(Gv={errorThrown:!1,error:null}),e(),t){var n=Gv,r=n.errorThrown,i=n.error;if(Gv=null,r)throw i}}else e()}function qv(e){Rv.useDeprecatedSynchronousErrorHandling&&Gv&&(Gv.errorThrown=!0,Gv.error=e)}var Vv=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Dv(t)&&t.add(n)):n.destination=Xv,n}return wv(t,e),t.create=function(e,t,n){return new Kv(e,t,n)},t.prototype.next=function(e){this.isStopped?Yv(function(e){return Hv("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Yv(Hv("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Yv(zv,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Lv),Kv=function(e){function t(t,n,r){var i,o=e.call(this)||this;if(Iv(t))i=t;else if(t){var a;i=t.next,n=t.error,r=t.complete,o&&Rv.useDeprecatedNextContext?(a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()}:a=t,i=null==i?void 0:i.bind(a),n=null==n?void 0:n.bind(a),r=null==r?void 0:r.bind(a)}return o.destination={next:i?Wv(i):Bv,error:Wv(null!=n?n:Jv),complete:r?Wv(r):Bv},o}return wv(t,e),t}(Vv);function Wv(e,t){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{e.apply(void 0,Sv([],kv(t)))}catch(r){Rv.useDeprecatedSynchronousErrorHandling?qv(r):Fv(r)}}}function Jv(e){throw e}function Yv(e,t){var n=Rv.onStoppedNotification;n&&Mv.setTimeout((function(){return n(e,t)}))}var Xv={closed:!0,next:Bv,error:Jv,complete:Bv},Zv="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qv(e){return e}function ey(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ty(e)}function ty(e){return 0===e.length?Qv:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var ny=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof Vv||function(e){return e&&Iv(e.next)&&Iv(e.error)&&Iv(e.complete)}(r)&&Dv(r)?e:new Kv(e,t,n);return $v((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ry(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),null==i||i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Zv]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ty(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ry(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function ry(e){var t;return null!==(t=null!=e?e:Rv.Promise)&&void 0!==t?t:Promise}function iy(e){return Iv(null==e?void 0:e.lift)}function oy(e){return function(t){if(iy(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var ay=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.onFinalize=o,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(n){t.error(n)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return wv(t,e),t.prototype.unsubscribe=function(){var t,n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},t}(Vv);function sy(){return oy((function(e,t){var n=null;e._refCount++;var r=new ay(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));e.subscribe(r),r.closed||(n=e.connect())}))}var uy=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,iy(t)&&(r.lift=t.lift),r}return wv(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new Lv;var n=this.getSubject();t.add(this.source.subscribe(new ay(n,void 0,(function(){e._teardown(),n.complete()}),(function(t){e._teardown(),n.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=Lv.EMPTY)}return t},t.prototype.refCount=function(){return sy()(this)},t}(ny),cy={now:function(){return(cy.delegate||performance).now()},delegate:void 0},ly={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=ly.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new Lv((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ly.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,Sv([],kv(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ly.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Sv([],kv(e)))},delegate:void 0};function fy(e){var t=ly.schedule;return new ny((function(n){var r=new Lv,i=e||cy,o=i.now(),a=function(s){var u=i.now();n.next({timestamp:e?u:s,elapsed:u-o}),n.closed||r.add(t(a))};return r.add(t(a)),r}))}var hy,dy=fy(),py=Tv((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),vy=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return wv(t,e),t.prototype.lift=function(e){var t=new yy(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new py},t.prototype.next=function(e){var t=this;$v((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){var i=t.observers.slice();try{for(var o=xv(i),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;$v((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;$v((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=t.hasError,r=t.isStopped,i=t.observers;return n||r?Cv:(i.push(e),new Lv((function(){return Nv(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new ny;return e.source=this,e},t.create=function(e,t){return new yy(e,t)},t}(ny),yy=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return wv(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Cv},t}(vy),by=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return wv(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(vy),my={now:function(){return(my.delegate||Date).now()},delegate:void 0},gy=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=my);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return wv(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,s=n._windowTime;r||(i.push(t),!o&&i.push(a.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var a=n.now(),s=0,u=1;u<r.length&&r[u]<=a;u+=2)s=u;s&&r.splice(0,s+1)}},t}(vy),wy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return wv(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t._hasValue,i=t._value,o=t.thrownError,a=t.isStopped,s=t._isComplete;n?e.error(o):(a||s)&&(r&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,n=t._hasValue,r=t._value;t._isComplete||(this._isComplete=!0,n&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(vy),_y=function(e){function t(t,n){return e.call(this)||this}return wv(t,e),t.prototype.schedule=function(e,t){return this},t}(Lv),Ey={setInterval:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ey.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,Sv([],kv(e)))},clearInterval:function(e){var t=Ey.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},xy=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return wv(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Ey.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;Ey.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Nv(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(_y),ky=1,Sy={};function Ay(e){return e in Sy&&(delete Sy[e],!0)}var Oy=function(e){var t=ky++;return Sy[t]=!0,hy||(hy=Promise.resolve()),hy.then((function(){return Ay(t)&&e()})),t},Py=function(e){Ay(e)},Iy={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Iy.delegate;return((null==n?void 0:n.setImmediate)||Oy).apply(void 0,Sv([],kv(e)))},clearImmediate:function(e){var t=Iy.delegate;return((null==t?void 0:t.clearImmediate)||Py)(e)},delegate:void 0},Ty=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return wv(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Iy.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Iy.clearImmediate(n),t._scheduled=void 0)},t}(xy),jy=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=my.now,e}(),Ny=function(e){function t(t,n){void 0===n&&(n=jy.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return wv(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(jy),Ly=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wv(t,e),t.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var t,n=this.actions,r=-1;e=e||n.shift();var i=n.length;do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this._active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Ny))(Ty),Cy=Ly,Dy=new Ny(xy),Uy=Dy,Ry=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return wv(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(xy),My=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wv(t,e),t}(Ny))(Ry),Fy=My,By=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return wv(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=ly.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(ly.cancelAnimationFrame(n),t._scheduled=void 0)},t}(xy),zy=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wv(t,e),t.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var t,n=this.actions,r=-1;e=e||n.shift();var i=n.length;do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this._active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Ny))(By),Hy=zy,Gy=function(e){function t(t,n){void 0===t&&(t=$y),void 0===n&&(n=1/0);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return wv(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Ny),$y=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return wv(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}return Lv.EMPTY},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(xy),qy=new ny((function(e){return e.complete()}));function Vy(e,t){return new ny((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}var Ky=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Wy(e){return Iv(null==e?void 0:e.then)}var Jy,Yy="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Xy(e,t,n,r){void 0===r&&(r=0);var i=t.schedule((function(){try{n.call(this)}catch(t){e.error(t)}}),r);return e.add(i),i}function Zy(e,t){return new ny((function(n){var r;return n.add(t.schedule((function(){r=e[Yy](),Xy(n,t,(function(){var e=r.next(),t=e.value;e.done?n.complete():(n.next(t),this.schedule())}))}))),function(){return Iv(null==r?void 0:r.return)&&r.return()}}))}function Qy(e,t){if(!e)throw new Error("Iterable cannot be null");return new ny((function(n){var r=new Lv;return r.add(t.schedule((function(){var i=e[Symbol.asyncIterator]();r.add(t.schedule((function(){var e=this;i.next().then((function(t){t.done?n.complete():(n.next(t.value),e.schedule())}))})))}))),r}))}function eb(e){return Iv(e[Zv])}function tb(e){return Iv(null==e?void 0:e[Yy])}function nb(e){return Symbol.asyncIterator&&Iv(null==e?void 0:e[Symbol.asyncIterator])}function rb(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ib(e){return Ov(this,arguments,(function(){var t,n,r;return Ev(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Av(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Av(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Av(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ob(e){return Iv(null==e?void 0:e.getReader)}function ab(e,t){if(null!=e){if(eb(e))return function(e,t){return new ny((function(n){var r=new Lv;return r.add(t.schedule((function(){var i=e[Zv]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Ky(e))return Vy(e,t);if(Wy(e))return function(e,t){return new ny((function(n){return t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){n.next(e),n.add(t.schedule((function(){return n.complete()})))})))}),(function(e){n.add(t.schedule((function(){return n.error(e)})))}))}))}))}(e,t);if(nb(e))return Qy(e,t);if(tb(e))return Zy(e,t);if(ob(e))return function(e,t){return Qy(ib(e),t)}(e,t)}throw rb(e)}function sb(e,t){return t?ab(e,t):ub(e)}function ub(e){if(e instanceof ny)return e;if(null!=e){if(eb(e))return function(e){return new ny((function(t){var n=e[Zv]();if(Iv(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(Ky(e))return cb(e);if(Wy(e))return n=e,new ny((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Fv)}));if(nb(e))return lb(e);if(tb(e))return t=e,new ny((function(e){var n,r;try{for(var i=xv(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(ob(e))return lb(ib(e))}var t,n;throw rb(e)}function cb(e){return new ny((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}function lb(e){return new ny((function(t){(function(e,t){var n,r,i,o;return _v(this,void 0,void 0,(function(){var a,s;return Ev(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=Pv(e),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function fb(e,t){return t?Vy(e,t):cb(e)}function hb(e){return e&&Iv(e.schedule)}function db(e){return e[e.length-1]}function pb(e){return Iv(db(e))?e.pop():void 0}function vb(e){return hb(db(e))?e.pop():void 0}function yb(e,t){return"number"==typeof db(e)?e.pop():t}function bb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e);return n?Vy(e,n):fb(e)}function mb(e,t){var n=Iv(e)?e:function(){return e},r=function(e){return e.error(n())};return new ny(t?function(e){return t.schedule(r,0,e)}:r)}!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(Jy||(Jy={}));var gb=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){return wb(this,e)},e.prototype.do=function(e,t,n){var r=this,i=r.kind,o=r.value,a=r.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(a):null==n?void 0:n()},e.prototype.accept=function(e,t,n){var r;return Iv(null===(r=e)||void 0===r?void 0:r.next)?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this,t=e.kind,n=e.value,r=e.error,i="N"===t?bb(n):"E"===t?mb((function(){return r})):"C"===t?qy:0;if(!i)throw new TypeError("Unexpected notification kind "+t);return i},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function wb(e,t){var n,r,i,o=e,a=o.kind,s=o.value,u=o.error;if("string"!=typeof a)throw new TypeError('Invalid notification, missing "kind"');"N"===a?null===(n=t.next)||void 0===n||n.call(t,s):"E"===a?null===(r=t.error)||void 0===r||r.call(t,u):null===(i=t.complete)||void 0===i||i.call(t)}var _b=Tv((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));var Eb=Tv((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})),xb=Tv((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})),kb=Tv((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}));function Sb(e){return e instanceof Date&&!isNaN(e)}var Ab=Tv((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function Ob(e,t){var n=Sb(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,a=void 0===o?Pb:o,s=n.scheduler,u=void 0===s?null!=t?t:Dy:s,c=n.meta,l=void 0===c?null:c;if(null==r&&null==i)throw new TypeError("No timeout provided.");return oy((function(e,t){var n,o,s=null,c=0,f=function(e){o=Xy(t,u,(function(){n.unsubscribe(),ub(a({meta:l,lastValue:s,seen:c})).subscribe(t)}),e)};n=e.subscribe(new ay(t,(function(e){null==o||o.unsubscribe(),c++,t.next(s=e),i>0&&f(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),s=null}))),f(null!=r?"number"==typeof r?r:+r-u.now():i)}))}function Pb(e){throw new Ab(e)}function Ib(e,t){return void 0===t&&(t=0),oy((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Tb(e,t){return oy((function(n,r){var i=0;n.subscribe(new ay(r,(function(n){r.next(e.call(t,n,i++))})))}))}var jb=Array.isArray;function Nb(e){return Tb((function(t){return function(e,t){return jb(t)?e.apply(void 0,Sv([],kv(t))):e(t)}(e,t)}))}function Lb(e,t){return void 0===t&&(t=0),oy((function(n,r){n.subscribe(new ay(r,(function(n){return r.add(e.schedule((function(){return r.next(n)}),t))}),(function(){return r.add(e.schedule((function(){return r.complete()}),t))}),(function(n){return r.add(e.schedule((function(){return r.error(n)}),t))})))}))}function Cb(e,t,n,r){if(n){if(!hb(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Cb(e,t,r).apply(this,i).pipe(Nb(n))};r=n}return r?function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Cb(e,t).apply(this,n).pipe(Ib(r),Lb(r))}:function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new wy,a=!0;return new ny((function(i){var s=o.subscribe(i);if(a){a=!1;var u=!1,c=!1;t.apply(n,Sv(Sv([],kv(r)),[function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=t.shift();if(null!=r)return void o.error(r)}o.next(1<t.length?t:t[0]),c=!0,u&&o.complete()}])),c&&o.complete(),u=!0}return s}))}}var Db=Array.isArray,Ub=Object.getPrototypeOf,Rb=Object.prototype,Mb=Object.keys;function Fb(e){if(1===e.length){var t=e[0];if(Db(t))return{args:t,keys:null};if(function(e){return e&&"object"==typeof e&&Ub(e)===Rb}(t)){var n=Mb(t);return{args:n.map((function(e){return t[e]})),keys:n}}}return{args:e,keys:null}}function Bb(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}function zb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e),r=pb(e),i=Fb(e),o=i.args,a=i.keys;if(0===o.length)return sb([],n);var s=new ny(Hb(o,n,a?function(e){return Bb(a,e)}:Qv));return r?s.pipe(Nb(r)):s}function Hb(e,t,n){return void 0===n&&(n=Qv),function(r){Gb(t,(function(){for(var i=e.length,o=new Array(i),a=i,s=i,u=function(i){Gb(t,(function(){var u=sb(e[i],t),c=!1;u.subscribe(new ay(r,(function(e){o[i]=e,c||(c=!0,s--),s||r.next(n(o.slice()))}),(function(){--a||r.complete()})))}),r)},c=0;c<i;c++)u(c)}),r)}}function Gb(e,t,n){e?n.add(e.schedule(t)):t()}function $b(e,t,n,r,i,o,a,s){var u=[],c=0,l=0,f=!1,h=function(){!f||u.length||c||t.complete()},d=function(e){return c<r?p(e):u.push(e)},p=function(e){o&&t.next(e),c++;var s=!1;ub(n(e,l++)).subscribe(new ay(t,(function(e){null==i||i(e),o?d(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{c--;for(var e=function(){var e=u.shift();a?t.add(a.schedule((function(){return p(e)}))):p(e)};u.length&&c<r;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(new ay(t,d,(function(){f=!0,h()}))),function(){null==s||s()}}function qb(e,t,n){return void 0===n&&(n=1/0),Iv(t)?qb((function(n,r){return Tb((function(e,i){return t(n,e,r,i)}))(ub(e(n,r)))}),n):("number"==typeof t&&(n=t),oy((function(t,r){return $b(t,r,e,n)})))}function Vb(e){return void 0===e&&(e=1/0),qb(Qv,e)}function Kb(){return Vb(1)}function Wb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Kb()(fb(e,vb(e)))}function Jb(e){return new ny((function(t){ub(e()).subscribe(t)}))}var Yb={connector:function(){return new vy},resetOnDisconnect:!0};var Xb=["addListener","removeListener"],Zb=["addEventListener","removeEventListener"],Qb=["on","off"];function em(e,t){return function(n){return function(r){return e[n](t,r)}}}function tm(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Uy);var r=-1;return null!=t&&(hb(t)?n=t:r=t),new ny((function(t){var i=Sb(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule((function(){t.closed||(t.next(o++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}function nm(e,t){return void 0===e&&(e=0),void 0===t&&(t=Dy),e<0&&(e=0),tm(e,e,t)}var rm=new ny(Bv);var im=Array.isArray;function om(e){return 1===e.length&&im(e[0])?e[0]:e}function am(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=om(e);return oy((function(e,t){var r=Sv([e],kv(n)),i=function(){if(!t.closed)if(r.length>0){var e=void 0;try{e=ub(r.shift())}catch(o){return void i()}var n=new ay(t,void 0,Bv,Bv);t.add(e.subscribe(n)),n.add(i)}else t.complete()};i()}))}function sm(e,t){return function(n,r){return!e.call(t,n,r)}}function um(e,t){return oy((function(n,r){var i=0;n.subscribe(new ay(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}function cm(e){return function(t){for(var n=[],r=function(r){n.push(ub(e[r]).subscribe(new ay(t,(function(e){if(n){for(var i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(e)}))))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}function lm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=pb(e),r=om(e);return r.length?new ny((function(e){var t=r.map((function(){return[]})),i=r.map((function(){return!1}));e.add((function(){t=i=null}));for(var o=function(o){ub(r[o]).subscribe(new ay(e,(function(r){if(t[o].push(r),t.every((function(e){return e.length}))){var a=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,Sv([],kv(a))):a),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[o]=!0,!t[o].length&&e.complete()})))},a=0;!e.closed&&a<r.length;a++)o(a);return function(){t=i=null}})):qy}function fm(e){return oy((function(t,n){var r=!1,i=null,o=null,a=!1,s=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}a&&n.complete()},u=function(){o=null,a&&n.complete()};t.subscribe(new ay(n,(function(t){r=!0,i=t,o||ub(e(t)).subscribe(o=new ay(n,s,u))}),(function(){a=!0,(!r||!o||o.closed)&&n.complete()})))}))}function hm(e,t){return void 0===t&&(t=Uy),fm((function(){return tm(e,t)}))}function dm(e){return oy((function(t,n){var r=[];return t.subscribe(new ay(n,(function(e){return r.push(e)}),(function(){n.next(r),n.complete()}))),e.subscribe(new ay(n,(function(){var e=r;r=[],n.next(e)}),Bv)),function(){r=null}}))}function pm(e,t){return void 0===t&&(t=null),t=null!=t?t:e,oy((function(n,r){var i=[],o=0;n.subscribe(new ay(r,(function(n){var a,s,u,c,l=null;o++%t==0&&i.push([]);try{for(var f=xv(i),h=f.next();!h.done;h=f.next()){(v=h.value).push(n),e<=v.length&&(l=null!=l?l:[]).push(v)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}if(l)try{for(var d=xv(l),p=d.next();!p.done;p=d.next()){var v=p.value;Nv(i,v),r.next(v)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}}),(function(){var e,t;try{for(var n=xv(i),o=n.next();!o.done;o=n.next()){var a=o.value;r.next(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}r.complete()}),void 0,(function(){i=null})))}))}function vm(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=vb(r))&&void 0!==t?t:Dy,a=null!==(n=r[0])&&void 0!==n?n:null,s=r[1]||1/0;return oy((function(t,n){var r=[],i=!1,u=function(e){var t=e.buffer;e.subs.unsubscribe(),Nv(r,e),n.next(t),i&&c()},c=function(){if(r){var t=new Lv;n.add(t);var i={buffer:[],subs:t};r.push(i),t.add(o.schedule((function(){return u(i)}),e))}};null!==a&&a>=0?n.add(o.schedule((function(){c(),!this.closed&&n.add(this.schedule(null,a))}),a)):i=!0,c();var l=new ay(n,(function(e){var t,n,i=r.slice();try{for(var o=xv(i),a=o.next();!a.done;a=o.next()){var c=a.value,l=c.buffer;l.push(e),s<=l.length&&u(c)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;null==r?void 0:r.length;)n.next(r.shift().buffer);null==l||l.unsubscribe(),n.complete(),n.unsubscribe()}),void 0,(function(){return r=null}));t.subscribe(l)}))}function ym(e,t){return oy((function(n,r){var i=[];ub(e).subscribe(new ay(r,(function(e){var n=[];i.push(n);var o=new Lv;o.add(ub(t(e)).subscribe(new ay(r,(function(){Nv(i,n),r.next(n),o.unsubscribe()}),Bv)))}),Bv)),n.subscribe(new ay(r,(function(e){var t,n;try{for(var r=xv(i),o=r.next();!o.done;o=r.next()){o.value.push(e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}),(function(){for(;i.length>0;)r.next(i.shift());r.complete()})))}))}function bm(e){return oy((function(t,n){var r=null,i=null,o=function(){null==i||i.unsubscribe();var t=r;r=[],t&&n.next(t),ub(e()).subscribe(i=new ay(n,o,Bv))};o(),t.subscribe(new ay(n,(function(e){return null==r?void 0:r.push(e)}),(function(){r&&n.next(r),n.complete()}),void 0,(function(){return r=i=null})))}))}function mm(e){return oy((function(t,n){var r,i=null,o=!1;i=t.subscribe(new ay(n,void 0,void 0,(function(a){r=ub(e(a,mm(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):o=!0}))),o&&(i.unsubscribe(),i=null,r.subscribe(n))}))}function gm(e,t,n,r,i){return function(o,a){var s=n,u=t,c=0;o.subscribe(new ay(a,(function(t){var n=c++;u=s?e(u,t,n):(s=!0,t),r&&a.next(u)}),i&&function(){s&&a.next(u),a.complete()}))}}function wm(e,t){return oy(gm(e,t,arguments.length>=2,!1,!0))}var _m=function(e,t){return e.push(t),e};function Em(){return oy((function(e,t){wm(_m,[])(e).subscribe(t)}))}function xm(e,t){return ey(Em(),qb((function(t){return e(t)})),t?Nb(t):Qv)}function km(e){return xm(zb,e)}var Sm=km;function Am(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=pb(e);return n?ey(Am.apply(void 0,Sv([],kv(e))),Nb(n)):oy((function(t,n){Hb(Sv([t],kv(om(e))))(n)}))}function Om(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Am.apply(void 0,Sv([],kv(e)))}function Pm(e,t){return Iv(t)?qb(e,t,1):qb(e,1)}function Im(e,t){return Iv(t)?Pm((function(){return e}),t):Pm((function(){return e}))}function Tm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e);return oy((function(t,r){Kb()(fb(Sv([t],kv(e)),n)).subscribe(r)}))}function jm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Tm.apply(void 0,Sv([],kv(e)))}var Nm={connector:function(){return new vy}};function Lm(e,t){void 0===t&&(t=Nm);var n=t.connector;return oy((function(t,r){var i,o=n();sb(e((i=o,new ny((function(e){return i.subscribe(e)}))))).subscribe(r),r.add(t.subscribe(o))}))}function Cm(e){return wm((function(t,n,r){return!e||e(n,r)?t+1:t}),0)}function Dm(e){return oy((function(t,n){var r=!1,i=null,o=null,a=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}};t.subscribe(new ay(n,(function(t){null==o||o.unsubscribe(),r=!0,i=t,o=new ay(n,a,Bv),ub(e(t)).subscribe(o)}),(function(){a(),n.complete()}),void 0,(function(){i=o=null})))}))}function Um(e,t){return void 0===t&&(t=Dy),oy((function(n,r){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,r.next(e)}};function u(){var n=a+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);s()}n.subscribe(new ay(r,(function(n){o=n,a=t.now(),i||(i=t.schedule(u,e),r.add(i))}),(function(){s(),r.complete()}),void 0,(function(){o=i=null})))}))}function Rm(e){return oy((function(t,n){var r=!1;t.subscribe(new ay(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}function Mm(e){return e<=0?function(){return qy}:oy((function(t,n){var r=0;t.subscribe(new ay(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function Fm(){return oy((function(e,t){e.subscribe(new ay(t,Bv))}))}function Bm(e){return Tb((function(){return e}))}function zm(e,t){return t?function(n){return Wb(t.pipe(Mm(1),Fm()),n.pipe(zm(e)))}:qb((function(t,n){return e(t,n).pipe(Mm(1),Bm(t))}))}function Hm(e,t){void 0===t&&(t=Dy);var n=tm(e,t);return zm((function(){return n}))}function Gm(){return oy((function(e,t){e.subscribe(new ay(t,(function(e){return wb(e,t)})))}))}function $m(e,t){return oy((function(n,r){var i=new Set;n.subscribe(new ay(r,(function(t){var n=e?e(t):t;i.has(n)||(i.add(n),r.next(t))}))),null==t||t.subscribe(new ay(r,(function(){return i.clear()}),Bv))}))}function qm(e,t){return void 0===t&&(t=Qv),e=null!=e?e:Vm,oy((function(n,r){var i,o=!0;n.subscribe(new ay(r,(function(n){var a=t(n);!o&&e(i,a)||(o=!1,i=a,r.next(n))})))}))}function Vm(e,t){return e===t}function Km(e,t){return qm((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}function Wm(e){return void 0===e&&(e=Jm),oy((function(t,n){var r=!1;t.subscribe(new ay(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function Jm(){return new _b}function Ym(e,t){if(e<0)throw new Eb;var n=arguments.length>=2;return function(r){return r.pipe(um((function(t,n){return n===e})),Mm(1),n?Rm(t):Wm((function(){return new Eb})))}}function Xm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Wb(t,bb.apply(void 0,Sv([],kv(e))))}}function Zm(e,t){return oy((function(n,r){var i=0;n.subscribe(new ay(r,(function(o){e.call(t,o,i++,n)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}function Qm(){return oy((function(e,t){var n=!1,r=null;e.subscribe(new ay(t,(function(e){r||(r=ub(e).subscribe(new ay(t,void 0,(function(){r=null,n&&t.complete()}))))}),(function(){n=!0,!r&&t.complete()})))}))}var eg=Qm;function tg(e,t){return t?function(n){return n.pipe(tg((function(n,r){return ub(e(n,r)).pipe(Tb((function(e,i){return t(n,e,r,i)})))})))}:oy((function(t,n){var r=0,i=null,o=!1;t.subscribe(new ay(n,(function(t){i||(i=new ay(n,void 0,(function(){i=null,o&&n.complete()})),ub(e(t,r++)).subscribe(i))}),(function(){o=!0,!i&&n.complete()})))}))}function ng(e,t,n){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,oy((function(r,i){return $b(r,i,e,t,void 0,!0,n)}))}function rg(e){return oy((function(t,n){try{t.subscribe(n)}finally{n.add(e)}}))}function ig(e,t){return oy(og(e,t,"value"))}function og(e,t,n){var r="index"===n;return function(n,i){var o=0;n.subscribe(new ay(i,(function(a){var s=o++;e.call(t,a,s,n)&&(i.next(r?s:a),i.complete())}),(function(){i.next(r?-1:void 0),i.complete()})))}}function ag(e,t){return oy(og(e,t,"index"))}function sg(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?um((function(t,n){return e(t,n,r)})):Qv,Mm(1),n?Rm(t):Wm((function(){return new _b})))}}function ug(e,t,n,r){return oy((function(i,o){var a;t&&"function"!=typeof t?(n=t.duration,a=t.element,r=t.connector):a=t;var s=new Map,u=function(e){s.forEach(e),e(o)},c=function(e){return u((function(t){return t.error(e)}))},l=new cg(o,(function(t){try{var i=e(t),u=s.get(i);if(!u){s.set(i,u=r?r():new vy);var f=(d=i,p=u,(v=new ny((function(e){l.activeGroups++;var t=p.subscribe(e);return function(){t.unsubscribe(),0==--l.activeGroups&&l.teardownAttempted&&l.unsubscribe()}}))).key=d,v);if(o.next(f),n){var h=new ay(u,(function(){u.complete(),null==h||h.unsubscribe()}),void 0,void 0,(function(){return s.delete(i)}));l.add(ub(n(f)).subscribe(h))}}u.next(a?a(t):t)}catch(y){c(y)}var d,p,v}),(function(){return u((function(e){return e.complete()}))}),c,(function(){return s.clear()}));i.subscribe(l)}))}var cg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeGroups=0,t.teardownAttempted=!1,t}return wv(t,e),t.prototype.unsubscribe=function(){this.teardownAttempted=!0,0===this.activeGroups&&e.prototype.unsubscribe.call(this)},t}(ay);function lg(){return oy((function(e,t){e.subscribe(new ay(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}function fg(e){return e<=0?function(){return qy}:oy((function(t,n){var r=[];t.subscribe(new ay(n,(function(t){r.push(t),e<r.length&&r.shift()}),(function(){var e,t;try{for(var i=xv(r),o=i.next();!o.done;o=i.next()){var a=o.value;n.next(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){r=null})))}))}function hg(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?um((function(t,n){return e(t,n,r)})):Qv,fg(1),n?Rm(t):Wm((function(){return new _b})))}}function dg(){return oy((function(e,t){e.subscribe(new ay(t,(function(e){t.next(gb.createNext(e))}),(function(){t.next(gb.createComplete()),t.complete()}),(function(e){t.next(gb.createError(e)),t.complete()})))}))}function pg(e){return wm(Iv(e)?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}var vg=qb;function yg(e,t,n){return void 0===n&&(n=1/0),Iv(t)?qb((function(){return e}),t,n):("number"==typeof t&&(n=t),qb((function(){return e}),n))}function bg(e,t,n){return void 0===n&&(n=1/0),oy((function(r,i){var o=t;return $b(r,i,(function(t,n){return e(o,t,n)}),n,(function(e){o=e}),!1,void 0,(function(){return o=null}))}))}function mg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e),r=yb(e,1/0);return e=om(e),oy((function(t,i){Vb(r)(fb(Sv([t],kv(e)),n)).subscribe(i)}))}function gg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mg.apply(void 0,Sv([],kv(e)))}function wg(e){return wm(Iv(e)?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}function _g(e,t){var n=Iv(e)?e:function(){return e};return Iv(t)?Lm(t,{connector:n}):function(e){return new uy(e,n)}}function Eg(){return oy((function(e,t){var n,r=!1;e.subscribe(new ay(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))}function xg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return Tb((function(t){for(var r=t,i=0;i<n;i++){var o=null==r?void 0:r[e[i]];if(void 0===o)return;r=o}return r}))}function kg(e){return e?function(t){return Lm(e)(t)}:function(e){return _g(new vy)(e)}}function Sg(e){return function(t){var n=new by(e);return new uy(t,(function(){return n}))}}function Ag(){return function(e){var t=new wy;return new uy(e,(function(){return t}))}}function Og(e,t,n,r){n&&!Iv(n)&&(r=n);var i=Iv(n)?n:void 0;return function(n){return _g(new gy(e,t,r),i)(n)}}function Pg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?oy((function(t,n){cm(Sv([t],kv(e)))(n)})):Qv}function Ig(e){return void 0===e&&(e=1/0),e<=0?function(){return qy}:oy((function(t,n){var r,i=0,o=function(){var a=!1;r=t.subscribe(new ay(n,void 0,(function(){++i<e?r?(r.unsubscribe(),r=null,o()):a=!0:n.complete()}))),a&&(r.unsubscribe(),r=null,o())};o()}))}function Tg(e){return oy((function(t,n){var r,i,o=!1,a=!1,s=!1,u=function(){return s&&a&&(n.complete(),!0)},c=function(){s=!1,r=t.subscribe(new ay(n,void 0,(function(){s=!0,!u()&&(i||(i=new vy,e(i).subscribe(new ay(n,(function(){r?c():o=!0}),(function(){a=!0,u()})))),i).next()}))),o&&(r.unsubscribe(),r=null,o=!1,c())};c()}))}function jg(e){var t;void 0===e&&(e=1/0);var n=(t=e&&"object"==typeof e?e:{count:e}).count,r=void 0===n?1/0:n,i=t.delay,o=t.resetOnSuccess,a=void 0!==o&&o;return r<=0?Qv:oy((function(e,t){var n,o=0,s=function(){var u=!1;n=e.subscribe(new ay(t,(function(e){a&&(o=0),t.next(e)}),void 0,(function(e){if(o++<r){var a=function(){n?(n.unsubscribe(),n=null,s()):u=!0};if(null!=i){var c="number"==typeof i?tm(i):ub(i(e,o)),l=new ay(t,(function(){l.unsubscribe(),a()}),(function(){t.complete()}));c.subscribe(l)}else a()}else t.error(e)}))),u&&(n.unsubscribe(),n=null,s())};s()}))}function Ng(e){return oy((function(t,n){var r,i,o=!1,a=function(){r=t.subscribe(new ay(n,void 0,void 0,(function(t){i||(i=new vy,e(i).subscribe(new ay(n,(function(){return r?a():o=!0})))),i&&i.next(t)}))),o&&(r.unsubscribe(),r=null,o=!1,a())};a()}))}function Lg(e){return oy((function(t,n){var r=!1,i=null;t.subscribe(new ay(n,(function(e){r=!0,i=e})));e.subscribe(new ay(n,(function(){if(r){r=!1;var e=i;i=null,n.next(e)}}),Bv))}))}function Cg(e,t){return void 0===t&&(t=Dy),Lg(nm(e,t))}function Dg(e,t){return oy(gm(e,t,arguments.length>=2,!0))}function Ug(e,t){return void 0===t&&(t=function(e,t){return e===t}),oy((function(n,r){var i={buffer:[],complete:!1},o={buffer:[],complete:!1},a=function(e){r.next(e),r.complete()},s=function(e,n){var i=new ay(r,(function(r){var i=n.buffer,o=n.complete;0===i.length?o?a(!1):e.buffer.push(r):!t(r,i.shift())&&a(!1)}),(function(){e.complete=!0;var t=n.complete,r=n.buffer;t&&a(0===r.length),null==i||i.unsubscribe()}));return i};n.subscribe(s(i,o)),e.subscribe(s(o,i))}))}function Rg(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new vy}:t,r=e.resetOnError,i=void 0===r||r,o=e.resetOnComplete,a=void 0===o||o,s=e.resetOnRefCountZero,u=void 0===s||s;return function(e){var t=null,r=null,o=null,s=0,c=!1,l=!1,f=function(){null==r||r.unsubscribe(),r=null},h=function(){f(),t=o=null,c=l=!1},d=function(){var e=t;h(),null==e||e.unsubscribe()};return oy((function(e,p){s++,l||c||f();var v=o=null!=o?o:n();p.add((function(){0!==--s||l||c||(r=Mg(d,u))})),v.subscribe(p),t||(t=new Kv({next:function(e){return v.next(e)},error:function(e){l=!0,f(),r=Mg(h,i,e),v.error(e)},complete:function(){c=!0,f(),r=Mg(h,a),v.complete()}}),sb(e).subscribe(t))}))(e)}}function Mg(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return!0===t?(e(),null):!1===t?null:t.apply(void 0,Sv([],kv(n))).pipe(Mm(1)).subscribe((function(){return e()}))}function Fg(e,t,n){var r,i,o,a=!1;return e&&"object"==typeof e?(o=null!==(r=e.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=e.windowTime)&&void 0!==i?i:1/0,a=!!e.refCount,n=e.scheduler):o=null!=e?e:1/0,Rg({connector:function(){return new gy(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Bg(e){return oy((function(t,n){var r,i=!1,o=!1,a=0;t.subscribe(new ay(n,(function(s){o=!0,e&&!e(s,a++,t)||(i&&n.error(new kb("Too many matching values")),i=!0,r=s)}),(function(){i?(n.next(r),n.complete()):n.error(o?new xb("No matching values"):new _b)})))}))}function zg(e){return um((function(t,n){return e<=n}))}function Hg(e){return e<=0?Qv:oy((function(t,n){var r=new Array(e),i=0;return t.subscribe(new ay(n,(function(t){var o=i++;if(o<e)r[o]=t;else{var a=o%e,s=r[a];r[a]=t,n.next(s)}}))),function(){r=null}}))}function Gg(e){return oy((function(t,n){var r=!1,i=new ay(n,(function(){null==i||i.unsubscribe(),r=!0}),Bv);ub(e).subscribe(i),t.subscribe(new ay(n,(function(e){return r&&n.next(e)})))}))}function $g(e){return oy((function(t,n){var r=!1,i=0;t.subscribe(new ay(n,(function(t){return(r||(r=!e(t,i++)))&&n.next(t)})))}))}function qg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e);return oy((function(t,r){(n?Wb(e,t,n):Wb(e,t)).subscribe(r)}))}function Vg(e,t){return oy((function(n,r){var i=null,o=0,a=!1,s=function(){return a&&!i&&r.complete()};n.subscribe(new ay(r,(function(n){null==i||i.unsubscribe();var a=0,u=o++;ub(e(n,u)).subscribe(i=new ay(r,(function(e){return r.next(t?t(n,e,u,a++):e)}),(function(){i=null,s()})))}),(function(){a=!0,s()})))}))}function Kg(){return Vg(Qv)}function Wg(e,t){return Iv(t)?Vg((function(){return e}),t):Vg((function(){return e}))}function Jg(e,t){return oy((function(n,r){var i=t;return Vg((function(t,n){return e(i,t,n)}),(function(e,t){return i=t,t}))(n).subscribe(r),function(){i=null}}))}function Yg(e){return oy((function(t,n){ub(e).subscribe(new ay(n,(function(){return n.complete()}),Bv)),!n.closed&&t.subscribe(n)}))}function Xg(e,t){return void 0===t&&(t=!1),oy((function(n,r){var i=0;n.subscribe(new ay(r,(function(n){var o=e(n,i++);(o||t)&&r.next(n),!o&&r.complete()})))}))}function Zg(e,t,n){var r=Iv(e)||t||n?{next:e,error:t,complete:n}:e;return r?oy((function(e,t){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var i=!0;e.subscribe(new ay(t,(function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)}),(function(){var e;i=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()}),(function(e){var n;i=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)}),(function(){var e,t;i&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):Qv}var Qg={leading:!0,trailing:!1};function ew(e,t){var n=void 0===t?Qg:t,r=n.leading,i=n.trailing;return oy((function(t,n){var o=!1,a=null,s=null,u=!1,c=function(){null==s||s.unsubscribe(),s=null,i&&(h(),u&&n.complete())},l=function(){s=null,u&&n.complete()},f=function(t){return s=ub(e(t)).subscribe(new ay(n,c,l))},h=function(){if(o){o=!1;var e=a;a=null,n.next(e),!u&&f(e)}};t.subscribe(new ay(n,(function(e){o=!0,a=e,(!s||s.closed)&&(r?h():f(e))}),(function(){u=!0,(!(i&&o&&s)||s.closed)&&n.complete()})))}))}function tw(e,t,n){void 0===t&&(t=Dy),void 0===n&&(n=Qg);var r=tm(e,t);return ew((function(){return r}),n)}function nw(e){return void 0===e&&(e=Uy),function(t){return Jb((function(){return t.pipe(Dg((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Tb((function(e){var t=e.current,n=e.last,r=e.value;return new rw(r,t-n)})))}))}}var rw=function(e,t){this.value=e,this.interval=t};function iw(e,t,n){var r,i,o;if(n=null!=n?n:Uy,Sb(e)?r=e:"number"==typeof e&&(i=e),!t)throw new TypeError("No observable provided to switch to");if(o=function(){return t},null==r&&null==i)throw new TypeError("No timeout provided.");return Ob({first:r,each:i,scheduler:n,with:o})}function ow(e){return void 0===e&&(e=my),Tb((function(t){return{value:t,timestamp:e.now()}}))}function aw(e){return oy((function(t,n){var r=new vy;n.next(r.asObservable());var i=function(e){r.error(e),n.error(e)};return t.subscribe(new ay(n,(function(e){return null==r?void 0:r.next(e)}),(function(){r.complete(),n.complete()}),i)),e.subscribe(new ay(n,(function(){r.complete(),n.next(r=new vy)}),Bv,i)),function(){null==r||r.unsubscribe(),r=null}}))}function sw(e,t){void 0===t&&(t=0);var n=t>0?t:e;return oy((function(t,r){var i=[new vy],o=0;r.next(i[0].asObservable()),t.subscribe(new ay(r,(function(t){var a,s;try{for(var u=xv(i),c=u.next();!c.done;c=u.next()){c.value.next(t)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}var l=o-e+1;if(l>=0&&l%n==0&&i.shift().complete(),++o%n==0){var f=new vy;i.push(f),r.next(f.asObservable())}}),(function(){for(;i.length>0;)i.shift().complete();r.complete()}),(function(e){for(;i.length>0;)i.shift().error(e);r.error(e)}),(function(){null,i=null})))}))}function uw(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=vb(r))&&void 0!==t?t:Dy,a=null!==(n=r[0])&&void 0!==n?n:null,s=r[1]||1/0;return oy((function(t,n){var r=[],i=!1,u=function(e){var t=e.window,n=e.subs;t.complete(),n.unsubscribe(),Nv(r,e),i&&c()},c=function(){if(r){var t=new Lv;n.add(t);var i=new vy,a={window:i,subs:t,seen:0};r.push(a),n.next(i.asObservable()),t.add(o.schedule((function(){return u(a)}),e))}};null!==a&&a>=0?n.add(o.schedule((function(){c(),!this.closed&&n.add(this.schedule(null,a))}),a)):i=!0,c();var l=function(e){return r.slice().forEach(e)},f=function(e){l((function(t){var n=t.window;return e(n)})),e(n),n.unsubscribe()};return t.subscribe(new ay(n,(function(e){l((function(t){t.window.next(e),s<=++t.seen&&u(t)}))}),(function(){return f((function(e){return e.complete()}))}),(function(e){return f((function(t){return t.error(e)}))}))),function(){r=null}}))}function cw(e,t){return oy((function(n,r){var i=[],o=function(e){for(;0<i.length;)i.shift().error(e);r.error(e)};ub(e).subscribe(new ay(r,(function(e){var n=new vy;i.push(n);var a,s=new Lv;try{a=ub(t(e))}catch(u){return void o(u)}r.next(n.asObservable()),s.add(a.subscribe(new ay(r,(function(){Nv(i,n),n.complete(),s.unsubscribe()}),Bv,o)))}),Bv)),n.subscribe(new ay(r,(function(e){var t,n,r=i.slice();try{for(var o=xv(r),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<i.length;)i.shift().complete();r.complete()}),o,(function(){for(;0<i.length;)i.shift().unsubscribe()})))}))}function lw(e){return oy((function(t,n){var r,i,o=function(e){r.error(e),n.error(e)},a=function(){var t;null==i||i.unsubscribe(),null==r||r.complete(),r=new vy,n.next(r.asObservable());try{t=ub(e())}catch(s){return void o(s)}t.subscribe(i=new ay(n,a,a,o))};a(),t.subscribe(new ay(n,(function(e){return r.next(e)}),(function(){r.complete(),n.complete()}),o,(function(){null==i||i.unsubscribe(),r=null})))}))}function fw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=pb(e);return oy((function(t,r){for(var i=e.length,o=new Array(i),a=e.map((function(){return!1})),s=!1,u=function(t){ub(e[t]).subscribe(new ay(r,(function(e){o[t]=e,s||a[t]||(a[t]=!0,(s=a.every(Qv))&&(a=null))}),Bv))},c=0;c<i;c++)u(c);t.subscribe(new ay(r,(function(e){if(s){var t=Sv([e],kv(o));r.next(n?n.apply(void 0,Sv([],kv(t))):t)}})))}))}function hw(e){return xm(lm,e)}function dw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return oy((function(t,n){lm.apply(void 0,Sv([t],kv(e))).subscribe(n)}))}function pw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return dw.apply(void 0,Sv([],kv(e)))}var vw=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Observable:ny,ConnectableObservable:uy,observable:Zv,animationFrames:function(e){return e?fy(e):dy},Subject:vy,BehaviorSubject:by,ReplaySubject:gy,AsyncSubject:wy,asap:Cy,asapScheduler:Ly,async:Uy,asyncScheduler:Dy,queue:Fy,queueScheduler:My,animationFrame:Hy,animationFrameScheduler:zy,VirtualTimeScheduler:Gy,VirtualAction:$y,Scheduler:jy,Subscription:Lv,Subscriber:Vv,Notification:gb,get NotificationKind(){return Jy},pipe:ey,noop:Bv,identity:Qv,isObservable:function(e){return!!e&&(e instanceof ny||Iv(e.lift)&&Iv(e.subscribe))},lastValueFrom:function(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o,a=!1;e.subscribe({next:function(e){o=e,a=!0},error:i,complete:function(){a?r(o):n?r(t.defaultValue):i(new _b)}})}))},firstValueFrom:function(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o=new Kv({next:function(e){r(e),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new _b)}});e.subscribe(o)}))},ArgumentOutOfRangeError:Eb,EmptyError:_b,NotFoundError:xb,ObjectUnsubscribedError:py,SequenceError:kb,TimeoutError:Ab,UnsubscriptionError:jv,bindCallback:function(e,t,n){return Cb(!1,e,t,n)},bindNodeCallback:function(e,t,n){return Cb(!0,e,t,n)},combineLatest:zb,concat:Wb,connectable:function(e,t){void 0===t&&(t=Yb);var n=null,r=t.connector,i=t.resetOnDisconnect,o=void 0===i||i,a=r(),s=new ny((function(e){return a.subscribe(e)}));return s.connect=function(){return n&&!n.closed||(n=Jb((function(){return e})).subscribe(a),o&&n.add((function(){return a=r()}))),n},s},defer:Jb,empty:function(e){return e?function(e){return new ny((function(t){return e.schedule((function(){return t.complete()}))}))}(e):qy},forkJoin:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=pb(e),r=Fb(e),i=r.args,o=r.keys,a=new ny((function(e){var t=i.length;if(t)for(var n=new Array(t),r=t,a=t,s=function(t){var s=!1;ub(i[t]).subscribe(new ay(e,(function(e){s||(s=!0,a--),n[t]=e}),(function(){--r&&s||(a||e.next(o?Bb(o,n):n),e.complete())})))},u=0;u<t;u++)s(u);else e.complete()}));return n?a.pipe(Nb(n)):a},from:sb,fromEvent:function e(t,n,r,i){if(Iv(r)&&(i=r,r=void 0),i)return e(t,n,r).pipe(Nb(i));var o=kv(function(e){return Iv(e.addEventListener)&&Iv(e.removeEventListener)}(t)?Zb.map((function(e){return function(i){return t[e](n,i,r)}})):function(e){return Iv(e.addListener)&&Iv(e.removeListener)}(t)?Xb.map(em(t,n)):function(e){return Iv(e.on)&&Iv(e.off)}(t)?Qb.map(em(t,n)):[],2),a=o[0],s=o[1];if(!a&&Ky(t))return qb((function(t){return e(t,n,r)}))(fb(t));if(!a)throw new TypeError("Invalid event target");return new ny((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return s(t)}}))},fromEventPattern:function e(t,n,r){return r?e(t,n).pipe(Nb(r)):new ny((function(e){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1===t.length?t[0]:t)},i=t(r);return Iv(n)?function(){return n(r,i)}:void 0}))},generate:function(e,t,n,r,i){var o,a,s,u;function c(){var e;return Ev(this,(function(r){switch(r.label){case 0:e=u,r.label=1;case 1:return t&&!t(e)?[3,4]:[4,s(e)];case 2:r.sent(),r.label=3;case 3:return e=n(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(u=(o=e).initialState,t=o.condition,n=o.iterate,a=o.resultSelector,s=void 0===a?Qv:a,i=o.scheduler):(u=e,!r||hb(r)?(s=Qv,i=r):s=r),Jb(i?function(){return Zy(c(),i)}:c)},iif:function(e,t,n){return Jb((function(){return e()?t:n}))},interval:nm,merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vb(e),r=yb(e,1/0),i=e;return i.length?1===i.length?ub(i[0]):Vb(r)(fb(i,n)):qy},never:function(){return rm},of:bb,onErrorResumeNext:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return am(om(e))(qy)},pairs:function(e,t){return sb(Object.entries(e),t)},partition:function(e,t,n){return[um(t,n)(ub(e)),um(sm(t,n))(ub(e))]},race:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=om(e)).length?ub(e[0]):new ny(cm(e))},range:function(e,t,n){if(null==t&&(t=e,e=0),t<=0)return qy;var r=t+e;return new ny(n?function(t){var i=e;return n.schedule((function(){i<r?(t.next(i++),this.schedule()):t.complete()}))}:function(t){for(var n=e;n<r&&!t.closed;)t.next(n++);t.complete()})},throwError:mb,timer:tm,using:function(e,t){return new ny((function(n){var r=e(),i=t(r);return(i?ub(i):qy).subscribe(n),function(){r&&r.unsubscribe()}}))},zip:lm,scheduled:ab,EMPTY:qy,NEVER:rm,config:Rv,audit:fm,auditTime:hm,buffer:dm,bufferCount:pm,bufferTime:vm,bufferToggle:ym,bufferWhen:bm,catchError:mm,combineAll:Sm,combineLatestAll:km,combineLatestWith:Om,concatAll:Kb,concatMap:Pm,concatMapTo:Im,concatWith:jm,connect:Lm,count:Cm,debounce:Dm,debounceTime:Um,defaultIfEmpty:Rm,delay:Hm,delayWhen:zm,dematerialize:Gm,distinct:$m,distinctUntilChanged:qm,distinctUntilKeyChanged:Km,elementAt:Ym,endWith:Xm,every:Zm,exhaust:eg,exhaustAll:Qm,exhaustMap:tg,expand:ng,filter:um,finalize:rg,find:ig,findIndex:ag,first:sg,groupBy:ug,ignoreElements:Fm,isEmpty:lg,last:hg,map:Tb,mapTo:Bm,materialize:dg,max:pg,mergeAll:Vb,flatMap:vg,mergeMap:qb,mergeMapTo:yg,mergeScan:bg,mergeWith:gg,min:wg,multicast:_g,observeOn:Lb,pairwise:Eg,pluck:xg,publish:kg,publishBehavior:Sg,publishLast:Ag,publishReplay:Og,raceWith:Pg,reduce:wm,repeat:Ig,repeatWhen:Tg,retry:jg,retryWhen:Ng,refCount:sy,sample:Lg,sampleTime:Cg,scan:Dg,sequenceEqual:Ug,share:Rg,shareReplay:Fg,single:Bg,skip:zg,skipLast:Hg,skipUntil:Gg,skipWhile:$g,startWith:qg,subscribeOn:Ib,switchAll:Kg,switchMap:Vg,switchMapTo:Wg,switchScan:Jg,take:Mm,takeLast:fg,takeUntil:Yg,takeWhile:Xg,tap:Zg,throttle:ew,throttleTime:tw,throwIfEmpty:Wm,timeInterval:nw,timeout:Ob,timeoutWith:iw,timestamp:ow,toArray:Em,window:aw,windowCount:sw,windowTime:uw,windowToggle:cw,windowWhen:lw,withLatestFrom:fw,zipAll:hw,zipWith:pw}));var yw=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",audit:fm,auditTime:hm,buffer:dm,bufferCount:pm,bufferTime:vm,bufferToggle:ym,bufferWhen:bm,catchError:mm,combineAll:Sm,combineLatestAll:km,combineLatest:Am,combineLatestWith:Om,concat:Tm,concatAll:Kb,concatMap:Pm,concatMapTo:Im,concatWith:jm,connect:Lm,count:Cm,debounce:Dm,debounceTime:Um,defaultIfEmpty:Rm,delay:Hm,delayWhen:zm,dematerialize:Gm,distinct:$m,distinctUntilChanged:qm,distinctUntilKeyChanged:Km,elementAt:Ym,endWith:Xm,every:Zm,exhaust:eg,exhaustAll:Qm,exhaustMap:tg,expand:ng,filter:um,finalize:rg,find:ig,findIndex:ag,first:sg,groupBy:ug,ignoreElements:Fm,isEmpty:lg,last:hg,map:Tb,mapTo:Bm,materialize:dg,max:pg,merge:mg,mergeAll:Vb,flatMap:vg,mergeMap:qb,mergeMapTo:yg,mergeScan:bg,mergeWith:gg,min:wg,multicast:_g,observeOn:Lb,onErrorResumeNext:am,pairwise:Eg,partition:function(e,t){return function(n){return[um(e,t)(n),um(sm(e,t))(n)]}},pluck:xg,publish:kg,publishBehavior:Sg,publishLast:Ag,publishReplay:Og,race:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Pg.apply(void 0,Sv([],kv(om(e))))},raceWith:Pg,reduce:wm,repeat:Ig,repeatWhen:Tg,retry:jg,retryWhen:Ng,refCount:sy,sample:Lg,sampleTime:Cg,scan:Dg,sequenceEqual:Ug,share:Rg,shareReplay:Fg,single:Bg,skip:zg,skipLast:Hg,skipUntil:Gg,skipWhile:$g,startWith:qg,subscribeOn:Ib,switchAll:Kg,switchMap:Vg,switchMapTo:Wg,switchScan:Jg,take:Mm,takeLast:fg,takeUntil:Yg,takeWhile:Xg,tap:Zg,throttle:ew,throttleTime:tw,throwIfEmpty:Wm,timeInterval:nw,timeout:Ob,timeoutWith:iw,timestamp:ow,toArray:Em,window:aw,windowCount:sw,windowTime:uw,windowToggle:cw,windowWhen:lw,withLatestFrom:fw,zip:dw,zipAll:hw,zipWith:pw})),bw={},mw=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),gw=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},ww=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n};!function(e){const t=mw,n=N,r=gw,i=ww;function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function s(e,t){return t.decode?n(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function l(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!i&&s(n,e).includes(e.arrayFormatSeparator);n=o?s(n,e):n;const a=i||o?n.split(e.arrayFormatSeparator).map((t=>s(t,e))):null===n?n:s(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?s(n,e):n);const o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>s(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const o of e.split("&")){if(""===o)continue;let[e,a]=r(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:s(a,t),n(s(e,t),a,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=f(e[n],t);else i[r]=f(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=u(n):e[t]=n,e}),Object.create(null))}e.extract=l,e.parse=h,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[a(t,e),"[",i,"]"].join("")]:[...n,[a(t,e),"[",a(i,e),"]=",a(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[a(t,e),"[]"].join("")]:[...n,[a(t,e),"[]=",a(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[a(n,e),t,a(i,e)].join("")]:[[r,a(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,a(t,e)]:[...n,[a(t,e),"=",a(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map((n=>{const i=e[n];return void 0===i?"":null===i?a(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?a(n,t)+"[]":i.reduce(r(n),[]).join("&"):a(n,t)+"="+a(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:h(l(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:s(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),s=Object.assign(o,t.query);let u=e.stringify(s,n);u&&(u=`?${u}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(l=`#${a(t.fragmentIdentifier,n)}`),`${r}${u}${l}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:a,fragmentIdentifier:s}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(a,n),fragmentIdentifier:s},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(bw);var _w=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mv,"__esModule",{value:!0}),mv.Document=void 0;const Ew=vw,xw=yw,kw=wo,Sw=Oo,Aw=_w(bw);class Ow extends Ew.Observable{constructor(e,t,n){super((e=>{0===this.state$.observers.length&&(this.periodicSubscription=Ew.timer(0,n).pipe(xw.throttle((()=>this._syncState(this.id,{sync:kw.SyncOptions.PREFER_CACHE})))).subscribe()),this.state$.subscribe(e).add((()=>{var e;0===this.state$.observers.length&&(null===(e=this.periodicSubscription)||void 0===e||e.unsubscribe())}))})),this._apiUrl=t,this.state$=new kw.StreamStateSubject(e)}get value(){return this.state$.value}get state(){return this.state$.value}next(e){this.state$.next(e)}async _syncState(e,t){const n=await Ow._load(e,this._apiUrl,t);this.state$.next(kw.StreamUtils.deserializeState(n))}get id(){return new Sw.StreamID(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(e,t,n,r,i){const{state:o}=await kw.fetchJson(e+"/streams",{method:"post",body:{type:t,genesis:kw.StreamUtils.serializeCommit(n),opts:r}});return new Ow(kw.StreamUtils.deserializeState(o),e,i)}static async applyCommit(e,t,n,r,i){const{state:o}=await kw.fetchJson(e+"/commits",{method:"post",body:{streamId:t.toString(),commit:kw.StreamUtils.serializeCommit(n),opts:r}});return new Ow(kw.StreamUtils.deserializeState(o),e,i)}static async _load(e,t,n){const r=t+"/streams/"+e.toString()+"?"+Aw.default.stringify(n),{state:i}=await kw.fetchJson(r);return i}static async load(e,t,n,r){const i=await Ow._load(e,t,r);return new Ow(kw.StreamUtils.deserializeState(i),t,n)}static async loadStreamCommits(e,t){const{commits:n}=await kw.fetchJson(`${t}/commits/${e}`);return n.map((e=>({cid:e.cid,value:kw.StreamUtils.deserializeCommit(e.value)})))}complete(){this.state$.complete()}}mv.Document=Ow;var Pw,Iw={},Tw={},jw=f&&f.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.Caip10Link=void 0;const Nw=wo,Lw=Oo,Cw=Y,Dw=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},Uw={anchor:!1,publish:!0,sync:Nw.SyncOptions.PREFER_CACHE},Rw={anchor:!0,publish:!0},Mw={sync:Nw.SyncOptions.PREFER_CACHE};let Fw=Pw=class extends Nw.Stream{get did(){return this._getContent()}static async fromAccount(e,t,n={}){n=s(s({},Uw),n);const r=new Cw.AccountID(t),i=Pw.makeGenesis(r);return Pw.fromGenesis(e,i,n)}static async fromGenesis(e,t,n={}){return n=s(s({},Uw),n),e.createStreamFromGenesis(Pw.STREAM_TYPE_ID,t,n)}async setDid(e,t,n={}){n=s(s({},Rw),n);const r="string"==typeof e?e:e.id,i=await t.createLink(r);return this.setDidProof(i,n)}async setDidProof(e,t={}){t=s(s({},Rw),t);const n=this.makeCommit(e),r=await this.api.applyCommit(this.id,n,t);this.state$.next(r.state)}static async load(e,t,n={}){n=s(s({},Mw),n);const r=Lw.StreamRef.from(t);if(r.type!=Pw.STREAM_TYPE_ID)throw new Error(`StreamID ${r.toString()} does not refer to a '${Pw.STREAM_TYPE_NAME}' stream, but to a ${r.typeName}`);return e.loadStream(r,n)}static makeGenesis(e){return{header:{controllers:[e.toString()],family:`caip10-${e.chainId.toString()}`}}}makeCommit(e){return{data:e,prev:this.tip,id:this.state$.id.cid}}makeReadOnly(){this.setDidProof=Dw,this.setDid=Dw}};Fw.STREAM_TYPE_NAME="caip10-link",Fw.STREAM_TYPE_ID=1,Fw=Pw=jw([Nw.StreamStatic()],Fw),Tw.Caip10Link=Fw,function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Tw,e)}(Iw),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CLIENT_CONFIG=void 0;const t=vv,n=mv,r=wo,i=ji,o=Iw,a=Oo;e.DEFAULT_CLIENT_CONFIG={syncInterval:5e3};const u={anchor:!0,publish:!0,sync:r.SyncOptions.PREFER_CACHE},c={anchor:!0,publish:!0,sync:r.SyncOptions.PREFER_CACHE},l={sync:r.SyncOptions.PREFER_CACHE};e.default=class{constructor(n="http://localhost:7007",r={}){this._config=s(s({},e.DEFAULT_CLIENT_CONFIG),r),this._apiUrl=t.combineURLs(n,"/api/v0"),this._streamCache=new Map,this.context={api:this},this.pin=this._initPinApi(),this._streamConstructors={[i.TileDocument.STREAM_TYPE_ID]:i.TileDocument,[o.Caip10Link.STREAM_TYPE_ID]:o.Caip10Link}}get did(){return this.context.did}set did(e){this.context.did=e}_initPinApi(){return{add:async e=>{await r.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"post"})},rm:async e=>{await r.fetchJson(this._apiUrl+`/pins/${e.toString()}`,{method:"delete"})},ls:async e=>{let t=this._apiUrl+"/pins";e&&(t+=`/${e.toString()}`);const n=await r.fetchJson(t),{pinnedStreamIds:i}=n;return{[Symbol.asyncIterator](){let e=0;return{next:()=>e===i.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:i[e++],done:!1})}}}}}}async createStreamFromGenesis(e,t,i={}){i=s(s({},c),i);const o=await n.Document.createFromGenesis(this._apiUrl,e,t,i,this._config.syncInterval),a=this._streamCache.get(o.id.toString());return a?(r.StreamUtils.statesEqual(o.state,a.state)||a.next(o.state),this.buildStream(a)):(this._streamCache.set(o.id.toString(),o),this.buildStream(o))}async loadStream(e,t={}){t=s(s({},l),t);const r=a.StreamRef.from(e);let i=this._streamCache.get(r.baseID.toString());return i?await i._syncState(r,t):(i=await n.Document.load(r,this._apiUrl,this._config.syncInterval,t),this._streamCache.set(i.id.toString(),i)),this.buildStream(i)}async multiQuery(e){const t=e.map((e=>({streamId:"string"==typeof e.streamId?e.streamId:e.streamId.toString(),paths:e.paths,atTime:e.atTime}))),i=await r.fetchJson(this._apiUrl+"/multiqueries",{method:"post",body:{queries:t}});return Object.entries(i).reduce(((e,t)=>{const[i,o]=t,a=r.StreamUtils.deserializeState(o),s=new n.Document(a,this._apiUrl,this._config.syncInterval);return e[i]=this.buildStream(s),e}),{})}loadStreamCommits(e){const r=t.typeStreamID(e);return n.Document.loadStreamCommits(r,this._apiUrl)}async applyCommit(e,r,i={}){i=s(s({},u),i);const o=t.typeStreamID(e),a=await n.Document.applyCommit(this._apiUrl,o,r,i,this._config.syncInterval),c=this._streamCache.get(o.toString());return c?(c.next(a.state),this.buildStream(a)):(this._streamCache.set(o.toString(),a),this.buildStream(a))}addStreamHandler(e){this._streamConstructors[e.name]=e.stream_constructor}findStreamConstructor(e){const t=this._streamConstructors[e];if(t)return t;throw new Error(`Failed to find constructor for stream ${e}`)}buildStream(e){return new(this.findStreamConstructor(e.state.type))(e,this.context)}async setDID(e){this.context.did=e}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;const{supportedChains:e}=await r.fetchJson(this._apiUrl+"/node/chains");return this._supportedChains=e,e}async close(){Array.from(this._streamCache).map((([,e])=>{e.complete()})),this._streamCache.clear()}}}(pv);var Bw=p(pv),zw="ceramic://k3y52l7qbv1fry1fp4s0nwdarh0vahusarpposgevy0pemiykymd2ord6swtharcw",Hw="ceramic://k3y52l7qbv1fryjn62sggjh1lpn11c56qfofzmty190d62hwk1cal1c7qc5he54ow",Gw={alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic",cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",threeIdKeychain:"kjzl6cwe1jw14a50gupo0d433e9ojgmj9rd9ejxkc8vq6lw0fznsoohwzmejqs8"};function $w(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function qw(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$w(o,r,i,a,s,"next",e)}function s(e){$w(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Vw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kw(){return(Kw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ww(e,t){return e(t={exports:{}},t.exports),t.exports}var Jw=Ww((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=E.constructor=m,m.constructor=b,b.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}})),Yw=function(){function e(e){this._getPromise=null,this._queue=[],this._getRemote=e,this._createValuePromise()}var t=e.prototype;return t._createValuePromise=function(){var e=this;this._promiseValue=new Promise((function(t,n){e._deferValue={resolve:t,reject:n}}))},t.change=function(e){var t=this;return new Promise((function(n,r){var i=function(){var i=qw(Jw.mark((function i(o){var a;return Jw.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e(o);case 3:a=i.sent,n(),t._next(a),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),r(i.t0),t._next(o);case 12:case"end":return i.stop()}}),i,null,[[0,8]])})));return function(e){return i.apply(this,arguments)}}();t._queue.push({reject:r,run:i}),1===t._queue.length&&t._start()}))},t.changeContent=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=qw(Jw.mark((function e(n){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.update(t(n.content),n.metadata);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.change(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.get=function(){var e=qw(Jw.mark((function e(){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._queue.length){e.next=6;break}return e.next=3,this._getRemote();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this._promiseValue;case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._start=function(){var e=qw(Jw.mark((function e(){var t;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getRemote();case 3:t=e.sent,this._next(t),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),this._queue.forEach((function(t){t.reject(e.t0)})),this._queue=[],this._deferValue.reject(e.t0),this._createValuePromise();case 13:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t._next=function(e){var t=this._queue.shift();null==t?this._end(e):t.run(e)},t._end=function(e){this._deferValue.resolve(e),this._createValuePromise()},e}();function Xw(e){try{return Y.AccountID.parse(e),!0}catch(t){return!1}}var Zw=/^did:([A-Za-z0-9]+):([A-Za-z0-9.\-:_]+)$/;function Qw(e){if(!function(e){return Zw.test(e)}(e))throw new Error("Invalid DID: "+e)}var e_=function(){function e(e){var t=e.aliases,n=void 0===t?{}:t,r=e.autopin,i=e.ceramic;this._aliases=Kw({},Gw,n),this._autopin=!1!==r,this._ceramic=i,this._indexProxy=new Yw(this._getOwnIDXDoc.bind(this))}var t,n,r,i=e.prototype;return i.has=function(){var e=qw(Jw.mark((function e(t,n){var r,i;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._toIndexKey(t),e.next=3,this._getReference(r,n);case 3:return i=e.sent,e.abrupt("return",null!=i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.get=function(){var e=qw(Jw.mark((function e(t,n){var r;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._toIndexKey(t),e.next=3,this._getRecord(r,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.set=function(){var e=qw(Jw.mark((function e(t,n,r){var i;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._toIndexKey(t),e.next=3,this._setRecord(i,n,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.merge=function(){var e=qw(Jw.mark((function e(t,n,r){var i,o,a;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._toIndexKey(t),e.next=3,this._getRecord(i);case 3:return o=e.sent,a=o?Kw({},o,n):n,e.next=7,this._setRecord(i,a,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.setAll=function(){var e=qw(Jw.mark((function e(t,n){var r,i,o,a=this;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.entries(t).map(function(){var e=qw(Jw.mark((function e(t){var r,i,o,s,u,c;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[0],i=t[1],o=a._toIndexKey(r),e.next=4,a._setRecordOnly(o,i,n);case 4:return s=e.sent,u=s[0],c=s[1],e.abrupt("return",[u,o,c]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return i=e.sent,o=i.reduce((function(e,t){var n=t[0],r=t[1],i=t[2];return n&&(e[r]=i.toUrl()),e}),{}),e.next=7,this._setReferences(o);case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.setDefaults=function(){var e=qw(Jw.mark((function e(t,n){var r,i,o,a,s,u=this;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(e.t0=r=e.sent,null==e.t0){e.next=7;break}e.t1=r,e.next=8;break;case 7:e.t1={};case 8:return i=e.t1,o=Object.entries(t).map((function(e){var t=e[0],n=e[1];return[u._toIndexKey(t),n]})).filter((function(e){return null==i[e[0]]})).map(function(){var e=qw(Jw.mark((function e(t){var r,i,o,a,s;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t[0],o=t[1],e.next=3,u.getDefinition(i);case 3:return a=e.sent,e.next=6,u._createRecord(a,o,n);case 6:return s=e.sent,e.abrupt("return",((r={})[i]=s.toUrl(),r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(o);case 12:return a=e.sent,s=a.reduce((function(e,t){return Object.assign(e,t)}),{}),e.next=16,this._setReferences(s);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.remove=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._toIndexKey(t),e.next=3,this._removeReference(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i._toIndexKey=function(e){var t;return null!=(t=this._aliases[e])?t:e},i.getIndex=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.authenticated||t!==this.id&&null!=t){e.next=6;break}return e.next=3,this._indexProxy.get();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this._getIDXDoc(null!=t?t:this.id);case 8:e.t0=e.sent;case 9:return n=e.t0,e.abrupt("return",n?n.content:null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.iterator=function(e){var t,n,r,i=this,o=0;return(t={})[Symbol.asyncIterator]=function(){return this},t.next=(r=qw(Jw.mark((function t(){var r,a,s,u,c;return Jw.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n){t.next=5;break}return t.next=3,i.getIndex(e);case 3:r=t.sent,n=Object.entries(null!=r?r:{});case 5:if(o!==n.length){t.next=7;break}return t.abrupt("return",{done:!0,value:null});case 7:return a=n[o++],s=a[0],u=a[1],t.next=10,i._loadDocument(u);case 10:return c=t.sent,t.abrupt("return",{done:!1,value:{key:s,id:u,record:c.content}});case 12:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),t},i._createIDXDoc=function(){var e=qw(Jw.mark((function e(t){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xw(t)){e.next=4;break}return e.next=3,this.caip10ToDid(t);case 3:t=e.sent;case 4:return Qw(t),e.next=7,ji.TileDocument.create(this._ceramic,null,{deterministic:!0,controllers:[t],family:"IDX"},{anchor:!1,publish:!1});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i._getIDXDoc=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._createIDXDoc(t);case 2:if(null!=(n=e.sent).metadata.schema){e.next=5;break}return e.abrupt("return",null);case 5:if(n.metadata.schema===Hw){e.next=7;break}throw new Error("Invalid document: schema is not IdentityIndex");case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i._getOwnIDXDoc=function(){var e=qw(Jw.mark((function e(){var t;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._createIDXDoc(this.id);case 2:if(null!=(t=e.sent).metadata.schema){e.next=11;break}return e.next=6,t.update(null,Kw({},t.metadata,{schema:Hw}));case 6:if(!this._autopin){e.next=9;break}return e.next=9,this._ceramic.pin.add(t.id);case 9:e.next=13;break;case 11:if(t.metadata.schema===Hw){e.next=13;break}throw new Error("Invalid document: schema is not IdentityIndex");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getDefinition=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadDocument(t);case 2:if((n=e.sent).metadata.schema===zw){e.next=5;break}throw new Error("Invalid document: schema is not Definition");case 5:return e.abrupt("return",Kw({},n.content,{id:n.id}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.getRecordID=function(){var e=qw(Jw.mark((function e(t,n){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getReference(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.getRecordDocument=function(){var e=qw(Jw.mark((function e(t,n){var r,i;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecordID(t,n);case 2:if(null!=(i=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this._loadDocument(i);case 7:if(e.t0=r=e.sent,null==e.t0){e.next=12;break}e.t1=r,e.next=13;break;case 12:e.t1=null;case 13:return e.abrupt("return",e.t1);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i._getRecord=function(){var e=qw(Jw.mark((function e(t,n){var r;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecordDocument(t,n);case 2:return r=e.sent,e.abrupt("return",r?r.content:null);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i._setRecord=function(){var e=qw(Jw.mark((function e(t,n,r){var i,o,a;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._setRecordOnly(t,n,r);case 2:if(i=e.sent,o=i[0],a=i[1],!o){e.next=8;break}return e.next=8,this._setReference(t,a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i._setRecordOnly=function(){var e=qw(Jw.mark((function e(t,n,r){var i,o,a,s,u;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(void 0===r?{}:r).pin,e.next=3,this._getReference(t,this.id);case 3:if(null!=(o=e.sent)){e.next=14;break}return e.next=7,this.getDefinition(t);case 7:return a=e.sent,e.next=10,this._createRecord(a,n,{pin:i});case 10:return s=e.sent,e.abrupt("return",[!0,s]);case 14:return e.next=16,this._loadDocument(o);case 16:return u=e.sent,e.next=19,u.update(n);case 19:return e.abrupt("return",[!1,u.id]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i._loadDocument=function(e){return this._ceramic.loadStream(e)},i._createRecord=function(){var e=qw(Jw.mark((function e(t,n,r){var i,o,a,s;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(void 0===r?{}:r).pin,o={deterministic:!0,controllers:[this.id],family:t.id.toString()},e.next=4,ji.TileDocument.create(this._ceramic,null,o,{anchor:!1,publish:!1});case 4:if(a=e.sent,s=a.update(n,Kw({},o,{schema:t.schema})),!(null!=i?i:this._autopin)){e.next=11;break}return e.next=9,Promise.all([s,this._ceramic.pin.add(a.id)]);case 9:e.next=13;break;case 11:return e.next=13,s;case 13:return e.abrupt("return",a.id);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i._getReference=function(){var e=qw(Jw.mark((function e(t,n){var r,i;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex(null!=n?n:this.id);case 2:return i=e.sent,e.abrupt("return",null!=(r=null==i?void 0:i[t])?r:null);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i._setReference=function(){var e=qw(Jw.mark((function e(t,n){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._indexProxy.changeContent((function(e){var r;return Kw({},e,((r={})[t]=n.toUrl(),r))}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i._setReferences=function(){var e=qw(Jw.mark((function e(t){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===Object.keys(t).length){e.next=3;break}return e.next=3,this._indexProxy.changeContent((function(e){return Kw({},e,t)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i._removeReference=function(){var e=qw(Jw.mark((function e(t){return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._indexProxy.changeContent((function(e){return e&&delete e[t],e}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.caip10ToDid=function(){var e=qw(Jw.mark((function e(t){var n;return Jw.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iw.Caip10Link.fromAccount(this._ceramic,t);case 2:if(null!=(n=e.sent).did){e.next=5;break}throw new Error("No DID found for "+t);case 5:return e.abrupt("return",n.did);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t=e,(n=[{key:"authenticated",get:function(){return null!=this._ceramic.did}},{key:"ceramic",get:function(){return this._ceramic}},{key:"id",get:function(){if(null==this._ceramic.did)throw new Error("Ceramic instance is not authenticated");return this._ceramic.did.id}}])&&Vw(t.prototype,n),r&&Vw(t,r),e}(),t_={},n_={};Object.defineProperty(n_,"__esModule",{value:!0});var r_={};function i_(){return(i_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o_(){const e=new Map;return async(t,n)=>{var r;if(t.params&&"true"===t.params["no-cache"])return await n();const i=e.get(t.didUrl);if(void 0!==i)return i;const o=await n();return"notFound"!==(null==(r=o.didResolutionMetadata)?void 0:r.error)&&e.set(t.didUrl,o),o}}function a_(e,t){return t()}const s_=new RegExp("^did:([a-zA-Z0-9_]+):([a-zA-Z0-9_.%-]+(:[a-zA-Z0-9_.%-]+)*)((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$");function u_(e){if(""===e||!e)return null;const t=e.match(s_);if(t){const n={did:`did:${t[1]}:${t[2]}`,method:t[1],id:t[2],didUrl:e};if(t[4]){const e=t[4].slice(1).split(";");n.params={};for(const t of e){const e=t.split("=");n.params[e[0]]=e[1]}}return t[6]&&(n.path=t[6]),t[7]&&(n.query=t[7].slice(1)),t[8]&&(n.fragment=t[8].slice(1)),n}return null}const c_={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function l_(e){return async(t,n,r)=>{try{const i=await e(t,n,r);return i_({},c_,{didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:i})}catch(i){return i_({},c_,{didResolutionMetadata:{error:"notFound",message:i.toString()}})}}}var f_=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Resolver:class{constructor(e={},t={}){this.registry=e,this.cache=!0===t.cache?o_():t.cache||a_,t.legacyResolvers&&Object.keys(t.legacyResolvers).map((e=>{this.registry[e]||(this.registry[e]=l_(t.legacyResolvers[e]))}))}async resolve(e,t={}){const n=u_(e);if(null===n)return i_({},c_,{didResolutionMetadata:{error:"invalidDid"}});const r=this.registry[n.method];return r?this.cache(n,(()=>r(n.did,n,this,t))):i_({},c_,{didResolutionMetadata:{error:"unsupportedDidMethod"}})}},inMemoryCache:o_,noCache:a_,parse:u_,wrapLegacyResolver:l_})),h_={},d_={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=pe,n=Oe;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},r.prototype.update=function(t,n){if(void 0===n&&(n=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=n,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&n>0;)this._buffer[this._bufferLength++]=t[r++],n--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(n>=this.blockSize&&(r=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,r,n),n%=this.blockSize);n>0;)this._buffer[this._bufferLength++]=t[r++],n--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,i=n/536870912|0,a=n<<3,s=n%128<112?128:256;this._buffer[r]=128;for(var u=r+1;u<s-8;u++)this._buffer[u]=0;t.writeUint32BE(i,this._buffer,s-8),t.writeUint32BE(a,this._buffer,s-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(u=0;u<this.digestLength/8;u++)t.writeUint32BE(this._stateHi[u],e,8*u),t.writeUint32BE(this._stateLo[u],e,8*u+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.stateHi),n.wipe(e.stateLo),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA512=r;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(e,n,r,o,a,s,u){for(var c,l,f,h,d,p,v,y,b=r[0],m=r[1],g=r[2],w=r[3],_=r[4],E=r[5],x=r[6],k=r[7],S=o[0],A=o[1],O=o[2],P=o[3],I=o[4],T=o[5],j=o[6],N=o[7];u>=128;){for(var L=0;L<16;L++){var C=8*L+s;e[L]=t.readUint32BE(a,C),n[L]=t.readUint32BE(a,C+4)}for(L=0;L<80;L++){var D,U,R=b,M=m,F=g,B=w,z=_,H=E,G=x,$=S,q=A,V=O,K=P,W=I,J=T,Y=j;if(d=65535&(l=N),p=l>>>16,v=65535&(c=k),y=c>>>16,d+=65535&(l=(I>>>14|_<<18)^(I>>>18|_<<14)^(_>>>9|I<<23)),p+=l>>>16,v+=65535&(c=(_>>>14|I<<18)^(_>>>18|I<<14)^(I>>>9|_<<23)),y+=c>>>16,d+=65535&(l=I&T^~I&j),p+=l>>>16,v+=65535&(c=_&E^~_&x),y+=c>>>16,c=i[2*L],d+=65535&(l=i[2*L+1]),p+=l>>>16,v+=65535&c,y+=c>>>16,c=e[L%16],p+=(l=n[L%16])>>>16,v+=65535&c,y+=c>>>16,v+=(p+=(d+=65535&l)>>>16)>>>16,d=65535&(l=h=65535&d|p<<16),p=l>>>16,v=65535&(c=f=65535&v|(y+=v>>>16)<<16),y=c>>>16,d+=65535&(l=(S>>>28|b<<4)^(b>>>2|S<<30)^(b>>>7|S<<25)),p+=l>>>16,v+=65535&(c=(b>>>28|S<<4)^(S>>>2|b<<30)^(S>>>7|b<<25)),y+=c>>>16,p+=(l=S&A^S&O^A&O)>>>16,v+=65535&(c=b&m^b&g^m&g),y+=c>>>16,D=65535&(v+=(p+=(d+=65535&l)>>>16)>>>16)|(y+=v>>>16)<<16,U=65535&d|p<<16,d=65535&(l=K),p=l>>>16,v=65535&(c=B),y=c>>>16,p+=(l=h)>>>16,v+=65535&(c=f),y+=c>>>16,m=R,g=M,w=F,_=B=65535&(v+=(p+=(d+=65535&l)>>>16)>>>16)|(y+=v>>>16)<<16,E=z,x=H,k=G,b=D,A=$,O=q,P=V,I=K=65535&d|p<<16,T=W,j=J,N=Y,S=U,L%16==15)for(C=0;C<16;C++)c=e[C],d=65535&(l=n[C]),p=l>>>16,v=65535&c,y=c>>>16,c=e[(C+9)%16],d+=65535&(l=n[(C+9)%16]),p+=l>>>16,v+=65535&c,y+=c>>>16,f=e[(C+1)%16],d+=65535&(l=((h=n[(C+1)%16])>>>1|f<<31)^(h>>>8|f<<24)^(h>>>7|f<<25)),p+=l>>>16,v+=65535&(c=(f>>>1|h<<31)^(f>>>8|h<<24)^f>>>7),y+=c>>>16,f=e[(C+14)%16],p+=(l=((h=n[(C+14)%16])>>>19|f<<13)^(f>>>29|h<<3)^(h>>>6|f<<26))>>>16,v+=65535&(c=(f>>>19|h<<13)^(h>>>29|f<<3)^f>>>6),y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,e[C]=65535&v|y<<16,n[C]=65535&d|p<<16}d=65535&(l=S),p=l>>>16,v=65535&(c=b),y=c>>>16,c=r[0],p+=(l=o[0])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[0]=b=65535&v|y<<16,o[0]=S=65535&d|p<<16,d=65535&(l=A),p=l>>>16,v=65535&(c=m),y=c>>>16,c=r[1],p+=(l=o[1])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[1]=m=65535&v|y<<16,o[1]=A=65535&d|p<<16,d=65535&(l=O),p=l>>>16,v=65535&(c=g),y=c>>>16,c=r[2],p+=(l=o[2])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[2]=g=65535&v|y<<16,o[2]=O=65535&d|p<<16,d=65535&(l=P),p=l>>>16,v=65535&(c=w),y=c>>>16,c=r[3],p+=(l=o[3])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[3]=w=65535&v|y<<16,o[3]=P=65535&d|p<<16,d=65535&(l=I),p=l>>>16,v=65535&(c=_),y=c>>>16,c=r[4],p+=(l=o[4])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[4]=_=65535&v|y<<16,o[4]=I=65535&d|p<<16,d=65535&(l=T),p=l>>>16,v=65535&(c=E),y=c>>>16,c=r[5],p+=(l=o[5])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[5]=E=65535&v|y<<16,o[5]=T=65535&d|p<<16,d=65535&(l=j),p=l>>>16,v=65535&(c=x),y=c>>>16,c=r[6],p+=(l=o[6])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[6]=x=65535&v|y<<16,o[6]=j=65535&d|p<<16,d=65535&(l=N),p=l>>>16,v=65535&(c=k),y=c>>>16,c=r[7],p+=(l=o[7])>>>16,v+=65535&c,y+=c>>>16,y+=(v+=(p+=(d+=65535&l)>>>16)>>>16)>>>16,r[7]=k=65535&v|y<<16,o[7]=N=65535&d|p<<16,s+=128,u-=128}return s}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}}(d_),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=co,n=d_,r=Oe;function i(e){var t=new Float64Array(16);if(e)for(var n=0;n<e.length;n++)t[n]=e[n];return t}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32,new Uint8Array(32)[0]=9;var o=i(),a=i([1]),s=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(e,t){for(var n=0;n<16;n++)e[n]=0|t[n]}function d(e){for(var t=1,n=0;n<16;n++){var r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function p(e,t,n){for(var r=~(n-1),i=0;i<16;i++){var o=r&(e[i]^t[i]);e[i]^=o,t[i]^=o}}function v(e,t){for(var n=i(),r=i(),o=0;o<16;o++)r[o]=t[o];d(r),d(r),d(r);for(var a=0;a<2;a++){n[0]=r[0]-65517;for(o=1;o<15;o++)n[o]=r[o]-65535-(n[o-1]>>16&1),n[o-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);var s=n[15]>>16&1;n[14]&=65535,p(r,n,1-s)}for(o=0;o<16;o++)e[2*o]=255&r[o],e[2*o+1]=r[o]>>8}function y(e,t){for(var n=0,r=0;r<32;r++)n|=e[r]^t[r];return(1&n-1>>>8)-1}function b(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return v(n,e),v(r,t),y(n,r)}function m(e){var t=new Uint8Array(32);return v(t,e),1&t[0]}function g(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function w(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function _(e,t,n){var r,i,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,d=0,p=0,v=0,y=0,b=0,m=0,g=0,w=0,_=0,E=0,x=0,k=0,S=0,A=0,O=0,P=0,I=0,T=0,j=0,N=0,L=0,C=0,D=0,U=n[0],R=n[1],M=n[2],F=n[3],B=n[4],z=n[5],H=n[6],G=n[7],$=n[8],q=n[9],V=n[10],K=n[11],W=n[12],J=n[13],Y=n[14],X=n[15];o+=(r=t[0])*U,a+=r*R,s+=r*M,u+=r*F,c+=r*B,l+=r*z,f+=r*H,h+=r*G,d+=r*$,p+=r*q,v+=r*V,y+=r*K,b+=r*W,m+=r*J,g+=r*Y,w+=r*X,a+=(r=t[1])*U,s+=r*R,u+=r*M,c+=r*F,l+=r*B,f+=r*z,h+=r*H,d+=r*G,p+=r*$,v+=r*q,y+=r*V,b+=r*K,m+=r*W,g+=r*J,w+=r*Y,_+=r*X,s+=(r=t[2])*U,u+=r*R,c+=r*M,l+=r*F,f+=r*B,h+=r*z,d+=r*H,p+=r*G,v+=r*$,y+=r*q,b+=r*V,m+=r*K,g+=r*W,w+=r*J,_+=r*Y,E+=r*X,u+=(r=t[3])*U,c+=r*R,l+=r*M,f+=r*F,h+=r*B,d+=r*z,p+=r*H,v+=r*G,y+=r*$,b+=r*q,m+=r*V,g+=r*K,w+=r*W,_+=r*J,E+=r*Y,x+=r*X,c+=(r=t[4])*U,l+=r*R,f+=r*M,h+=r*F,d+=r*B,p+=r*z,v+=r*H,y+=r*G,b+=r*$,m+=r*q,g+=r*V,w+=r*K,_+=r*W,E+=r*J,x+=r*Y,k+=r*X,l+=(r=t[5])*U,f+=r*R,h+=r*M,d+=r*F,p+=r*B,v+=r*z,y+=r*H,b+=r*G,m+=r*$,g+=r*q,w+=r*V,_+=r*K,E+=r*W,x+=r*J,k+=r*Y,S+=r*X,f+=(r=t[6])*U,h+=r*R,d+=r*M,p+=r*F,v+=r*B,y+=r*z,b+=r*H,m+=r*G,g+=r*$,w+=r*q,_+=r*V,E+=r*K,x+=r*W,k+=r*J,S+=r*Y,A+=r*X,h+=(r=t[7])*U,d+=r*R,p+=r*M,v+=r*F,y+=r*B,b+=r*z,m+=r*H,g+=r*G,w+=r*$,_+=r*q,E+=r*V,x+=r*K,k+=r*W,S+=r*J,A+=r*Y,O+=r*X,d+=(r=t[8])*U,p+=r*R,v+=r*M,y+=r*F,b+=r*B,m+=r*z,g+=r*H,w+=r*G,_+=r*$,E+=r*q,x+=r*V,k+=r*K,S+=r*W,A+=r*J,O+=r*Y,P+=r*X,p+=(r=t[9])*U,v+=r*R,y+=r*M,b+=r*F,m+=r*B,g+=r*z,w+=r*H,_+=r*G,E+=r*$,x+=r*q,k+=r*V,S+=r*K,A+=r*W,O+=r*J,P+=r*Y,I+=r*X,v+=(r=t[10])*U,y+=r*R,b+=r*M,m+=r*F,g+=r*B,w+=r*z,_+=r*H,E+=r*G,x+=r*$,k+=r*q,S+=r*V,A+=r*K,O+=r*W,P+=r*J,I+=r*Y,T+=r*X,y+=(r=t[11])*U,b+=r*R,m+=r*M,g+=r*F,w+=r*B,_+=r*z,E+=r*H,x+=r*G,k+=r*$,S+=r*q,A+=r*V,O+=r*K,P+=r*W,I+=r*J,T+=r*Y,j+=r*X,b+=(r=t[12])*U,m+=r*R,g+=r*M,w+=r*F,_+=r*B,E+=r*z,x+=r*H,k+=r*G,S+=r*$,A+=r*q,O+=r*V,P+=r*K,I+=r*W,T+=r*J,j+=r*Y,N+=r*X,m+=(r=t[13])*U,g+=r*R,w+=r*M,_+=r*F,E+=r*B,x+=r*z,k+=r*H,S+=r*G,A+=r*$,O+=r*q,P+=r*V,I+=r*K,T+=r*W,j+=r*J,N+=r*Y,L+=r*X,g+=(r=t[14])*U,w+=r*R,_+=r*M,E+=r*F,x+=r*B,k+=r*z,S+=r*H,A+=r*G,O+=r*$,P+=r*q,I+=r*V,T+=r*K,j+=r*W,N+=r*J,L+=r*Y,C+=r*X,w+=(r=t[15])*U,a+=38*(E+=r*M),s+=38*(x+=r*F),u+=38*(k+=r*B),c+=38*(S+=r*z),l+=38*(A+=r*H),f+=38*(O+=r*G),h+=38*(P+=r*$),d+=38*(I+=r*q),p+=38*(T+=r*V),v+=38*(j+=r*K),y+=38*(N+=r*W),b+=38*(L+=r*J),m+=38*(C+=r*Y),g+=38*(D+=r*X),o=(r=(o+=38*(_+=r*R))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=h,e[8]=d,e[9]=p,e[10]=v,e[11]=y,e[12]=b,e[13]=m,e[14]=g,e[15]=w}function E(e,t){_(e,t,t)}function x(e,t){var n,r=i();for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)E(r,r),2!==n&&4!==n&&_(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}function k(e,t){var n=i(),r=i(),o=i(),a=i(),s=i(),c=i(),l=i(),f=i(),h=i();w(n,e[1],e[0]),w(h,t[1],t[0]),_(n,n,h),g(r,e[0],e[1]),g(h,t[0],t[1]),_(r,r,h),_(o,e[3],t[3]),_(o,o,u),_(a,e[2],t[2]),g(a,a,a),w(s,r,n),w(c,a,o),g(l,a,o),g(f,r,n),_(e[0],s,c),_(e[1],f,l),_(e[2],l,c),_(e[3],s,f)}function S(e,t,n){for(var r=0;r<4;r++)p(e[r],t[r],n)}function A(e,t){var n=i(),r=i(),o=i();x(o,t[2]),_(n,t[0],o),_(r,t[1],o),v(e,r),e[31]^=m(n)<<7}function O(e,t,n){h(e[0],o),h(e[1],a),h(e[2],a),h(e[3],o);for(var r=255;r>=0;--r){var i=n[r/8|0]>>(7&r)&1;S(e,t,i),k(t,e),k(e,e),S(e,t,i)}}function P(e,t){var n=[i(),i(),i(),i()];h(n[0],c),h(n[1],l),h(n[2],a),_(n[3],c,l),O(e,n,t)}function I(t){if(t.length!==e.SEED_LENGTH)throw new Error("ed25519: seed must be "+e.SEED_LENGTH+" bytes");var r=n.hash(t);r[0]&=248,r[31]&=127,r[31]|=64;var o=new Uint8Array(32),a=[i(),i(),i(),i()];P(a,r),A(o,a);var s=new Uint8Array(64);return s.set(t),s.set(o,32),{publicKey:o,secretKey:s}}e.generateKeyPairFromSeed=I,e.generateKeyPair=function(e){var n=t.randomBytes(32,e),i=I(n);return r.wipe(n),i},e.extractPublicKeyFromSecretKey=function(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error("ed25519: secret key must be "+e.SECRET_KEY_LENGTH+" bytes");return new Uint8Array(t.subarray(32))};var T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*T[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*T[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*T[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function N(e){for(var t=new Float64Array(64),n=0;n<64;n++)t[n]=e[n];for(n=0;n<64;n++)e[n]=0;j(e,t)}function L(e,t){var n=i(),r=i(),u=i(),c=i(),l=i(),d=i(),p=i();return h(e[2],a),function(e,t){for(var n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),E(u,e[1]),_(c,u,s),w(u,u,e[2]),g(c,e[2],c),E(l,c),E(d,l),_(p,d,l),_(n,p,u),_(n,n,c),function(e,t){var n,r=i();for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)E(r,r),1!==n&&_(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(n,n),_(n,n,u),_(n,n,c),_(n,n,c),_(e[0],n,c),E(r,e[0]),_(r,r,c),b(r,u)&&_(e[0],e[0],f),E(r,e[0]),_(r,r,c),b(r,u)?-1:(m(e[0])===t[31]>>7&&w(e[0],o,e[0]),_(e[3],e[0],e[1]),0)}e.sign=function(e,t){var r=new Float64Array(64),o=[i(),i(),i(),i()],a=n.hash(e.subarray(0,32));a[0]&=248,a[31]&=127,a[31]|=64;var s=new Uint8Array(64);s.set(a.subarray(32),32);var u=new n.SHA512;u.update(s.subarray(32)),u.update(t);var c=u.digest();u.clean(),N(c),P(o,c),A(s,o),u.reset(),u.update(s.subarray(0,32)),u.update(e.subarray(32)),u.update(t);var l=u.digest();N(l);for(var f=0;f<32;f++)r[f]=c[f];for(f=0;f<32;f++)for(var h=0;h<32;h++)r[f+h]+=l[f]*a[h];return j(s.subarray(32),r),s},e.verify=function(t,r,o){var a=new Uint8Array(32),s=[i(),i(),i(),i()],u=[i(),i(),i(),i()];if(o.length!==e.SIGNATURE_LENGTH)throw new Error("ed25519: signature must be "+e.SIGNATURE_LENGTH+" bytes");if(L(u,t))return!1;var c=new n.SHA512;c.update(o.subarray(0,32)),c.update(t),c.update(r);var l=c.digest();return N(l),O(s,u,l),P(u,o.subarray(32)),k(s,u),A(a,s),!y(o,a)},e.convertPublicKeyToX25519=function(e){var t=[i(),i(),i(),i()];if(L(t,e))throw new Error("Ed25519: invalid public key");var n=i(),r=i(),o=t[1];g(n,a,o),w(r,a,o),x(r,r),_(n,n,r);var s=new Uint8Array(32);return v(s,n),s},e.convertSecretKeyToX25519=function(e){var t=n.hash(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;var i=new Uint8Array(t.subarray(0,32));return r.wipe(t),i}}(h_);var p_=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,n,r)=>t+(0===r?"":",")+e(void 0===n||"symbol"==typeof n?null:n)),"")+"]":"{"+Object.keys(t).sort().reduce(((n,r,i)=>{if(void 0===t[r]||"symbol"==typeof t[r])return n;return n+(0===n.length?"":",")+e(r)+":"+e(t[r])}),"")+"}"},v_={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=co,n=Oe;function r(e){var t=new Float64Array(16);if(e)for(var n=0;n<e.length;n++)t[n]=e[n];return t}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;var i=new Uint8Array(32);i[0]=9;var o=r([56129,1]);function a(e){for(var t=1,n=0;n<16;n++){var r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function s(e,t,n){for(var r=~(n-1),i=0;i<16;i++){var o=r&(e[i]^t[i]);e[i]^=o,t[i]^=o}}function u(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function c(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function l(e,t,n){var r,i,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,d=0,p=0,v=0,y=0,b=0,m=0,g=0,w=0,_=0,E=0,x=0,k=0,S=0,A=0,O=0,P=0,I=0,T=0,j=0,N=0,L=0,C=0,D=0,U=n[0],R=n[1],M=n[2],F=n[3],B=n[4],z=n[5],H=n[6],G=n[7],$=n[8],q=n[9],V=n[10],K=n[11],W=n[12],J=n[13],Y=n[14],X=n[15];o+=(r=t[0])*U,a+=r*R,s+=r*M,u+=r*F,c+=r*B,l+=r*z,f+=r*H,h+=r*G,d+=r*$,p+=r*q,v+=r*V,y+=r*K,b+=r*W,m+=r*J,g+=r*Y,w+=r*X,a+=(r=t[1])*U,s+=r*R,u+=r*M,c+=r*F,l+=r*B,f+=r*z,h+=r*H,d+=r*G,p+=r*$,v+=r*q,y+=r*V,b+=r*K,m+=r*W,g+=r*J,w+=r*Y,_+=r*X,s+=(r=t[2])*U,u+=r*R,c+=r*M,l+=r*F,f+=r*B,h+=r*z,d+=r*H,p+=r*G,v+=r*$,y+=r*q,b+=r*V,m+=r*K,g+=r*W,w+=r*J,_+=r*Y,E+=r*X,u+=(r=t[3])*U,c+=r*R,l+=r*M,f+=r*F,h+=r*B,d+=r*z,p+=r*H,v+=r*G,y+=r*$,b+=r*q,m+=r*V,g+=r*K,w+=r*W,_+=r*J,E+=r*Y,x+=r*X,c+=(r=t[4])*U,l+=r*R,f+=r*M,h+=r*F,d+=r*B,p+=r*z,v+=r*H,y+=r*G,b+=r*$,m+=r*q,g+=r*V,w+=r*K,_+=r*W,E+=r*J,x+=r*Y,k+=r*X,l+=(r=t[5])*U,f+=r*R,h+=r*M,d+=r*F,p+=r*B,v+=r*z,y+=r*H,b+=r*G,m+=r*$,g+=r*q,w+=r*V,_+=r*K,E+=r*W,x+=r*J,k+=r*Y,S+=r*X,f+=(r=t[6])*U,h+=r*R,d+=r*M,p+=r*F,v+=r*B,y+=r*z,b+=r*H,m+=r*G,g+=r*$,w+=r*q,_+=r*V,E+=r*K,x+=r*W,k+=r*J,S+=r*Y,A+=r*X,h+=(r=t[7])*U,d+=r*R,p+=r*M,v+=r*F,y+=r*B,b+=r*z,m+=r*H,g+=r*G,w+=r*$,_+=r*q,E+=r*V,x+=r*K,k+=r*W,S+=r*J,A+=r*Y,O+=r*X,d+=(r=t[8])*U,p+=r*R,v+=r*M,y+=r*F,b+=r*B,m+=r*z,g+=r*H,w+=r*G,_+=r*$,E+=r*q,x+=r*V,k+=r*K,S+=r*W,A+=r*J,O+=r*Y,P+=r*X,p+=(r=t[9])*U,v+=r*R,y+=r*M,b+=r*F,m+=r*B,g+=r*z,w+=r*H,_+=r*G,E+=r*$,x+=r*q,k+=r*V,S+=r*K,A+=r*W,O+=r*J,P+=r*Y,I+=r*X,v+=(r=t[10])*U,y+=r*R,b+=r*M,m+=r*F,g+=r*B,w+=r*z,_+=r*H,E+=r*G,x+=r*$,k+=r*q,S+=r*V,A+=r*K,O+=r*W,P+=r*J,I+=r*Y,T+=r*X,y+=(r=t[11])*U,b+=r*R,m+=r*M,g+=r*F,w+=r*B,_+=r*z,E+=r*H,x+=r*G,k+=r*$,S+=r*q,A+=r*V,O+=r*K,P+=r*W,I+=r*J,T+=r*Y,j+=r*X,b+=(r=t[12])*U,m+=r*R,g+=r*M,w+=r*F,_+=r*B,E+=r*z,x+=r*H,k+=r*G,S+=r*$,A+=r*q,O+=r*V,P+=r*K,I+=r*W,T+=r*J,j+=r*Y,N+=r*X,m+=(r=t[13])*U,g+=r*R,w+=r*M,_+=r*F,E+=r*B,x+=r*z,k+=r*H,S+=r*G,A+=r*$,O+=r*q,P+=r*V,I+=r*K,T+=r*W,j+=r*J,N+=r*Y,L+=r*X,g+=(r=t[14])*U,w+=r*R,_+=r*M,E+=r*F,x+=r*B,k+=r*z,S+=r*H,A+=r*G,O+=r*$,P+=r*q,I+=r*V,T+=r*K,j+=r*W,N+=r*J,L+=r*Y,C+=r*X,w+=(r=t[15])*U,a+=38*(E+=r*M),s+=38*(x+=r*F),u+=38*(k+=r*B),c+=38*(S+=r*z),l+=38*(A+=r*H),f+=38*(O+=r*G),h+=38*(P+=r*$),d+=38*(I+=r*q),p+=38*(T+=r*V),v+=38*(j+=r*K),y+=38*(N+=r*W),b+=38*(L+=r*J),m+=38*(C+=r*Y),g+=38*(D+=r*X),o=(r=(o+=38*(_+=r*R))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),w=(r=w+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=h,e[8]=d,e[9]=p,e[10]=v,e[11]=y,e[12]=b,e[13]=m,e[14]=g,e[15]=w}function f(e,t){l(e,t,t)}function h(e,t){for(var n=new Uint8Array(32),i=new Float64Array(80),h=r(),d=r(),p=r(),v=r(),y=r(),b=r(),m=0;m<31;m++)n[m]=e[m];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(var n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(i,t);for(m=0;m<16;m++)d[m]=i[m];h[0]=v[0]=1;for(m=254;m>=0;--m){var g=n[m>>>3]>>>(7&m)&1;s(h,d,g),s(p,v,g),u(y,h,p),c(h,h,p),u(p,d,v),c(d,d,v),f(v,y),f(b,h),l(h,p,h),l(p,d,y),u(y,h,p),c(h,h,p),f(d,h),c(p,v,b),l(h,p,o),u(h,h,v),l(p,p,h),l(h,v,b),l(v,d,i),f(d,y),s(h,d,g),s(p,v,g)}for(m=0;m<16;m++)i[m+16]=h[m],i[m+32]=p[m],i[m+48]=d[m],i[m+64]=v[m];var w=i.subarray(32),_=i.subarray(16);!function(e,t){for(var n=r(),i=0;i<16;i++)n[i]=t[i];for(i=253;i>=0;i--)f(n,n),2!==i&&4!==i&&l(n,n,t);for(i=0;i<16;i++)e[i]=n[i]}(w,w),l(_,_,w);var E=new Uint8Array(32);return function(e,t){for(var n=r(),i=r(),o=0;o<16;o++)i[o]=t[o];a(i),a(i),a(i);for(var u=0;u<2;u++){for(n[0]=i[0]-65517,o=1;o<15;o++)n[o]=i[o]-65535-(n[o-1]>>16&1),n[o-1]&=65535;n[15]=i[15]-32767-(n[14]>>16&1);var c=n[15]>>16&1;n[14]&=65535,s(i,n,1-c)}for(o=0;o<16;o++)e[2*o]=255&i[o],e[2*o+1]=i[o]>>8}(E,_),E}function d(e){return h(e,i)}function p(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var n=new Uint8Array(t);return{publicKey:d(n),secretKey:n}}e.scalarMult=h,e.scalarMultBase=d,e.generateKeyPairFromSeed=p,e.generateKeyPair=function(e){var r=t.randomBytes(32,e),i=p(r);return n.wipe(r),i},e.sharedKey=function(t,n,r){if(void 0===r&&(r=!1),t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(n.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=h(t,n);if(r){for(var o=0,a=0;a<i.length;a++)o|=i[a];if(0===o)throw new Error("X25519: invalid shared key")}return i}}(v_);var y_={},b_={},m_={};Object.defineProperty(m_,"__esModule",{value:!0});var g_=pe,w_=Oe;function __(e,t,n){for(var r=1634760805,i=857760878,o=2036477234,a=1797285236,s=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],c=n[11]<<24|n[10]<<16|n[9]<<8|n[8],l=n[15]<<24|n[14]<<16|n[13]<<8|n[12],f=n[19]<<24|n[18]<<16|n[17]<<8|n[16],h=n[23]<<24|n[22]<<16|n[21]<<8|n[20],d=n[27]<<24|n[26]<<16|n[25]<<8|n[24],p=n[31]<<24|n[30]<<16|n[29]<<8|n[28],v=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],b=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],g=r,w=i,_=o,E=a,x=s,k=u,S=c,A=l,O=f,P=h,I=d,T=p,j=v,N=y,L=b,C=m,D=0;D<20;D+=2)x=(x^=O=O+(j=(j^=g=g+x|0)>>>16|j<<16)|0)>>>20|x<<12,k=(k^=P=P+(N=(N^=w=w+k|0)>>>16|N<<16)|0)>>>20|k<<12,S=(S^=I=I+(L=(L^=_=_+S|0)>>>16|L<<16)|0)>>>20|S<<12,A=(A^=T=T+(C=(C^=E=E+A|0)>>>16|C<<16)|0)>>>20|A<<12,S=(S^=I=I+(L=(L^=_=_+S|0)>>>24|L<<8)|0)>>>25|S<<7,A=(A^=T=T+(C=(C^=E=E+A|0)>>>24|C<<8)|0)>>>25|A<<7,k=(k^=P=P+(N=(N^=w=w+k|0)>>>24|N<<8)|0)>>>25|k<<7,x=(x^=O=O+(j=(j^=g=g+x|0)>>>24|j<<8)|0)>>>25|x<<7,k=(k^=I=I+(C=(C^=g=g+k|0)>>>16|C<<16)|0)>>>20|k<<12,S=(S^=T=T+(j=(j^=w=w+S|0)>>>16|j<<16)|0)>>>20|S<<12,A=(A^=O=O+(N=(N^=_=_+A|0)>>>16|N<<16)|0)>>>20|A<<12,x=(x^=P=P+(L=(L^=E=E+x|0)>>>16|L<<16)|0)>>>20|x<<12,A=(A^=O=O+(N=(N^=_=_+A|0)>>>24|N<<8)|0)>>>25|A<<7,x=(x^=P=P+(L=(L^=E=E+x|0)>>>24|L<<8)|0)>>>25|x<<7,S=(S^=T=T+(j=(j^=w=w+S|0)>>>24|j<<8)|0)>>>25|S<<7,k=(k^=I=I+(C=(C^=g=g+k|0)>>>24|C<<8)|0)>>>25|k<<7;g_.writeUint32LE(g+r|0,e,0),g_.writeUint32LE(w+i|0,e,4),g_.writeUint32LE(_+o|0,e,8),g_.writeUint32LE(E+a|0,e,12),g_.writeUint32LE(x+s|0,e,16),g_.writeUint32LE(k+u|0,e,20),g_.writeUint32LE(S+c|0,e,24),g_.writeUint32LE(A+l|0,e,28),g_.writeUint32LE(O+f|0,e,32),g_.writeUint32LE(P+h|0,e,36),g_.writeUint32LE(I+d|0,e,40),g_.writeUint32LE(T+p|0,e,44),g_.writeUint32LE(j+v|0,e,48),g_.writeUint32LE(N+y|0,e,52),g_.writeUint32LE(L+b|0,e,56),g_.writeUint32LE(C+m|0,e,60)}function E_(e,t,n,r,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<n.length)throw new Error("ChaCha: destination is shorter than source");var o,a;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=(o=new Uint8Array(16)).length-t.length,o.set(t,a)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,a=i}for(var s=new Uint8Array(64),u=0;u<n.length;u+=64){__(s,o,e);for(var c=u;c<u+64&&c<n.length;c++)r[c]=n[c]^s[c-u];x_(o,0,a)}return w_.wipe(s),0===i&&w_.wipe(o),r}function x_(e,t,n){for(var r=1;n--;)r=r+(255&e[t])|0,e[t]=255&r,r>>>=8,t++;if(r>0)throw new Error("ChaCha: counter overflow")}m_.streamXOR=E_,m_.stream=function(e,t,n,r){return void 0===r&&(r=0),w_.wipe(n),E_(e,t,n,n,r)},Object.defineProperty(b_,"__esModule",{value:!0});var k_=pe,S_=Oe,A_=m_;function O_(e,t,n,r){if(24!==t.length)throw new Error("XChaCha20 nonce must be 24 bytes");var i=P_(e,t.subarray(0,16),new Uint8Array(32)),o=new Uint8Array(12);o.set(t.subarray(16),4);var a=A_.streamXOR(i,o,n,r);return S_.wipe(i),a}function P_(e,t,n){for(var r=1634760805,i=857760878,o=2036477234,a=1797285236,s=e[3]<<24|e[2]<<16|e[1]<<8|e[0],u=e[7]<<24|e[6]<<16|e[5]<<8|e[4],c=e[11]<<24|e[10]<<16|e[9]<<8|e[8],l=e[15]<<24|e[14]<<16|e[13]<<8|e[12],f=e[19]<<24|e[18]<<16|e[17]<<8|e[16],h=e[23]<<24|e[22]<<16|e[21]<<8|e[20],d=e[27]<<24|e[26]<<16|e[25]<<8|e[24],p=e[31]<<24|e[30]<<16|e[29]<<8|e[28],v=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],b=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],g=0;g<20;g+=2)s=(s^=f=f+(v=(v^=r=r+s|0)>>>16|v<<16)|0)>>>20|s<<12,u=(u^=h=h+(y=(y^=i=i+u|0)>>>16|y<<16)|0)>>>20|u<<12,c=(c^=d=d+(b=(b^=o=o+c|0)>>>16|b<<16)|0)>>>20|c<<12,l=(l^=p=p+(m=(m^=a=a+l|0)>>>16|m<<16)|0)>>>20|l<<12,c=(c^=d=d+(b=(b^=o=o+c|0)>>>24|b<<8)|0)>>>25|c<<7,l=(l^=p=p+(m=(m^=a=a+l|0)>>>24|m<<8)|0)>>>25|l<<7,u=(u^=h=h+(y=(y^=i=i+u|0)>>>24|y<<8)|0)>>>25|u<<7,s=(s^=f=f+(v=(v^=r=r+s|0)>>>24|v<<8)|0)>>>25|s<<7,u=(u^=d=d+(m=(m^=r=r+u|0)>>>16|m<<16)|0)>>>20|u<<12,c=(c^=p=p+(v=(v^=i=i+c|0)>>>16|v<<16)|0)>>>20|c<<12,l=(l^=f=f+(y=(y^=o=o+l|0)>>>16|y<<16)|0)>>>20|l<<12,s=(s^=h=h+(b=(b^=a=a+s|0)>>>16|b<<16)|0)>>>20|s<<12,l=(l^=f=f+(y=(y^=o=o+l|0)>>>24|y<<8)|0)>>>25|l<<7,s=(s^=h=h+(b=(b^=a=a+s|0)>>>24|b<<8)|0)>>>25|s<<7,c=(c^=p=p+(v=(v^=i=i+c|0)>>>24|v<<8)|0)>>>25|c<<7,u=(u^=d=d+(m=(m^=r=r+u|0)>>>24|m<<8)|0)>>>25|u<<7;return k_.writeUint32LE(r,n,0),k_.writeUint32LE(i,n,4),k_.writeUint32LE(o,n,8),k_.writeUint32LE(a,n,12),k_.writeUint32LE(v,n,16),k_.writeUint32LE(y,n,20),k_.writeUint32LE(b,n,24),k_.writeUint32LE(m,n,28),n}b_.streamXOR=O_,b_.stream=function(e,t,n){return S_.wipe(n),O_(e,t,n,n)},b_.hchacha=P_;var I_={},T_={},j_={};function N_(e,t){if(e.length!==t.length)return 0;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 1&n-1>>>8}function L_(e){return S.toString(e,"base64url")}function C_(e){const t=e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return S.fromString(t,"base64url")}function D_(e){return S.fromString(e,"base58btc")}function U_(e){const t=e.startsWith("0x")?e.substring(2):e;return S.fromString(t.toLowerCase(),"base16")}function R_(e){return L_(S.fromString(e))}function M_(e){return S.toString(C_(e))}function F_(e){return S.toString(e,"base16")}function B_(e){return S.fromString(e)}function z_({r:e,s:t,recoveryParam:n},r){const i=new Uint8Array(r?65:64);if(i.set(S.fromString(e,"base16"),0),i.set(S.fromString(t,"base16"),32),r){if(void 0===n)throw new Error("Signer did not return a recoveryParam");i[64]=n}return L_(i)}function H_(e){const t=C_(e);if(t.length<64||t.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${t.length}`);return{r:F_(t.slice(0,32)),s:F_(t.slice(32,64)),recoveryParam:65===t.length?t[64]:void 0}}function G_(e,t){return S.concat([C_(e),C_(t)])}Object.defineProperty(j_,"__esModule",{value:!0}),j_.select=function(e,t,n){return~(e-1)&t|e-1&n},j_.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},j_.compare=N_,j_.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==N_(e,t)},function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=j_,n=Oe;e.DIGEST_LENGTH=16;var r=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=t[0]|t[1]<<8;this._r[0]=8191&n;var r=t[2]|t[3]<<8;this._r[1]=8191&(n>>>13|r<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(r>>>10|i<<6);var o=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|o<<9);var a=t[8]|t[9]<<8;this._r[4]=255&(o>>>4|a<<12),this._r[5]=a>>>1&8190;var s=t[10]|t[11]<<8;this._r[6]=8191&(a>>>14|s<<2);var u=t[12]|t[13]<<8;this._r[7]=8065&(s>>>11|u<<5);var c=t[14]|t[15]<<8;this._r[8]=8191&(u>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(e,t,n){for(var r=this._fin?0:2048,i=this._h[0],o=this._h[1],a=this._h[2],s=this._h[3],u=this._h[4],c=this._h[5],l=this._h[6],f=this._h[7],h=this._h[8],d=this._h[9],p=this._r[0],v=this._r[1],y=this._r[2],b=this._r[3],m=this._r[4],g=this._r[5],w=this._r[6],_=this._r[7],E=this._r[8],x=this._r[9];n>=16;){var k=e[t+0]|e[t+1]<<8;i+=8191&k;var S=e[t+2]|e[t+3]<<8;o+=8191&(k>>>13|S<<3);var A=e[t+4]|e[t+5]<<8;a+=8191&(S>>>10|A<<6);var O=e[t+6]|e[t+7]<<8;s+=8191&(A>>>7|O<<9);var P=e[t+8]|e[t+9]<<8;u+=8191&(O>>>4|P<<12),c+=P>>>1&8191;var I=e[t+10]|e[t+11]<<8;l+=8191&(P>>>14|I<<2);var T=e[t+12]|e[t+13]<<8;f+=8191&(I>>>11|T<<5);var j=e[t+14]|e[t+15]<<8,N=0,L=N;L+=i*p,L+=o*(5*x),L+=a*(5*E),L+=s*(5*_),N=(L+=u*(5*w))>>>13,L&=8191,L+=c*(5*g),L+=l*(5*m),L+=f*(5*b),L+=(h+=8191&(T>>>8|j<<8))*(5*y);var C=N+=(L+=(d+=j>>>5|r)*(5*v))>>>13;C+=i*v,C+=o*p,C+=a*(5*x),C+=s*(5*E),N=(C+=u*(5*_))>>>13,C&=8191,C+=c*(5*w),C+=l*(5*g),C+=f*(5*m),C+=h*(5*b),N+=(C+=d*(5*y))>>>13,C&=8191;var D=N;D+=i*y,D+=o*v,D+=a*p,D+=s*(5*x),N=(D+=u*(5*E))>>>13,D&=8191,D+=c*(5*_),D+=l*(5*w),D+=f*(5*g),D+=h*(5*m);var U=N+=(D+=d*(5*b))>>>13;U+=i*b,U+=o*y,U+=a*v,U+=s*p,N=(U+=u*(5*x))>>>13,U&=8191,U+=c*(5*E),U+=l*(5*_),U+=f*(5*w),U+=h*(5*g);var R=N+=(U+=d*(5*m))>>>13;R+=i*m,R+=o*b,R+=a*y,R+=s*v,N=(R+=u*p)>>>13,R&=8191,R+=c*(5*x),R+=l*(5*E),R+=f*(5*_),R+=h*(5*w);var M=N+=(R+=d*(5*g))>>>13;M+=i*g,M+=o*m,M+=a*b,M+=s*y,N=(M+=u*v)>>>13,M&=8191,M+=c*p,M+=l*(5*x),M+=f*(5*E),M+=h*(5*_);var F=N+=(M+=d*(5*w))>>>13;F+=i*w,F+=o*g,F+=a*m,F+=s*b,N=(F+=u*y)>>>13,F&=8191,F+=c*v,F+=l*p,F+=f*(5*x),F+=h*(5*E);var B=N+=(F+=d*(5*_))>>>13;B+=i*_,B+=o*w,B+=a*g,B+=s*m,N=(B+=u*b)>>>13,B&=8191,B+=c*y,B+=l*v,B+=f*p,B+=h*(5*x);var z=N+=(B+=d*(5*E))>>>13;z+=i*E,z+=o*_,z+=a*w,z+=s*g,N=(z+=u*m)>>>13,z&=8191,z+=c*b,z+=l*y,z+=f*v,z+=h*p;var H=N+=(z+=d*(5*x))>>>13;H+=i*x,H+=o*E,H+=a*_,H+=s*w,N=(H+=u*g)>>>13,H&=8191,H+=c*m,H+=l*b,H+=f*y,H+=h*v,i=L=8191&(N=(N=((N+=(H+=d*p)>>>13)<<2)+N|0)+(L&=8191)|0),o=C+=N>>>=13,a=D&=8191,s=U&=8191,u=R&=8191,c=M&=8191,l=F&=8191,f=B&=8191,h=z&=8191,d=H&=8191,t+=16,n-=16}this._h[0]=i,this._h[1]=o,this._h[2]=a,this._h[3]=s,this._h[4]=u,this._h[5]=c,this._h[6]=l,this._h[7]=f,this._h[8]=h,this._h[9]=d},t.prototype.finish=function(e,t){void 0===t&&(t=0);var n,r,i,o,a=new Uint16Array(10);if(this._leftover){for(o=this._leftover,this._buffer[o++]=1;o<16;o++)this._buffer[o]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,o=2;o<10;o++)this._h[o]+=n,n=this._h[o]>>>13,this._h[o]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,a[0]=this._h[0]+5,n=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this._h[o]+n,n=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,r=(1^n)-1,o=0;o<10;o++)a[o]&=r;for(r=~r,o=0;o<10;o++)this._h[o]=this._h[o]&r|a[o];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,o=1;o<8;o++)i=(this._h[o]+this._pad[o]|0)+(i>>>16)|0,this._h[o]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var t,n=0,r=e.length;if(this._leftover){(t=16-this._leftover)>r&&(t=r);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[n+i];if(r-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(t=r-r%16,this._blocks(e,n,t),n+=t,r-=t),r){for(i=0;i<r;i++)this._buffer[this._leftover+i]=e[n+i];this._leftover+=r}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=r,e.oneTimeAuth=function(e,t){var n=new r(e);n.update(t);var i=n.digest();return n.clean(),i},e.equal=function(n,r){return n.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&t.equal(n,r)}}(T_),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=m_,n=T_,r=Oe,i=pe,o=j_;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var a=new Uint8Array(16),s=function(){function s(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return s.prototype.seal=function(e,n,i,o){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var s=new Uint8Array(32);t.stream(this._key,a,s,4);var u,c=n.length+this.tagLength;if(o){if(o.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=o}else u=new Uint8Array(c);return t.streamXOR(this._key,a,n,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),s,u.subarray(0,u.length-this.tagLength),i),r.wipe(a),u},s.prototype.open=function(e,n,i,a){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(n.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var u=new Uint8Array(32);t.stream(this._key,s,u,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,u,n.subarray(0,n.length-this.tagLength),i),!o.equal(c,n.subarray(n.length-this.tagLength,n.length)))return null;var l,f=n.length-this.tagLength;if(a){if(a.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");l=a}else l=new Uint8Array(f);return t.streamXOR(this._key,s,n.subarray(0,n.length-this.tagLength),l,4),r.wipe(s),l},s.prototype.clean=function(){return r.wipe(this._key),this},s.prototype._authenticate=function(e,t,o,s){var u=new n.Poly1305(t);s&&(u.update(s),s.length%16>0&&u.update(a.subarray(s.length%16))),u.update(o),o.length%16>0&&u.update(a.subarray(o.length%16));var c=new Uint8Array(8);s&&i.writeUint64LE(s.length,c),u.update(c),i.writeUint64LE(o.length,c),u.update(c);for(var l=u.digest(),f=0;f<l.length;f++)e[f]=l[f];u.clean(),r.wipe(l),r.wipe(c)},s}();e.ChaCha20Poly1305=s}(I_),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=b_,n=I_,r=Oe;e.KEY_LENGTH=32,e.NONCE_LENGTH=24,e.TAG_LENGTH=16;var i=function(){function i(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return i.prototype.seal=function(e,i,o,a){if(24!==e.length)throw new Error("XChaCha20Poly1305: incorrect nonce length");var s=t.hchacha(this._key,e.subarray(0,16),new Uint8Array(32)),u=new Uint8Array(12);u.set(e.subarray(16),4);var c=new n.ChaCha20Poly1305(s),l=c.seal(u,i,o,a);return r.wipe(s),r.wipe(u),c.clean(),l},i.prototype.open=function(e,i,o,a){if(24!==e.length)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(i.length<this.tagLength)return null;var s=t.hchacha(this._key,e.subarray(0,16),new Uint8Array(32)),u=new Uint8Array(12);u.set(e.subarray(16),4);var c=new n.ChaCha20Poly1305(s),l=c.open(u,i,o,a);return r.wipe(s),r.wipe(u),c.clean(),l},i.prototype.clean=function(){return r.wipe(this._key),this},i}();e.XChaCha20Poly1305=i}(y_);const $_=/^(0x)?([a-fA-F0-9]{64}|[a-fA-F0-9]{128})$/,q_=/^([1-9A-HJ-NP-Za-km-z]{44}|[1-9A-HJ-NP-Za-km-z]{88})$/,V_=/^([0-9a-zA-Z=\-_+/]{43}|[0-9a-zA-Z=\-_+/]{86})(={0,2})$/;function K_(e){if("string"==typeof e){if($_.test(e))return U_(e);if(q_.test(e))return D_(e);if(V_.test(e))return C_(e);throw TypeError("bad_key: Invalid private key format")}if(e instanceof Uint8Array)return e;throw TypeError("bad_key: Invalid private key format")}function W_(e,t=64){return e.length===t?e:"0".repeat(t-e.length)+e}function J_(e){const t="string"==typeof e?S.fromString(e):e;return de.hash(t)}function Y_(e){const t=S.fromString(e.slice(2),"base16");return`0x${S.toString((n=t,new Uint8Array(C.exports.keccak_256.arrayBuffer(n))).slice(-20),"base16")}`;var n}function X_(e,t=new Uint8Array(4)){const n=S.fromString(e.toString(),"base10");return t.set(n,4-n.length),t}const Z_=e=>S.concat([X_(e.length),e]);function Q_(e,t,n,r,i){if(256!==t)throw new Error(`Unsupported key length: ${t}`);const o=S.concat([Z_(S.fromString(n)),Z_(void 0===r?new Uint8Array(0):r),Z_(void 0===i?new Uint8Array(0):i),X_(t)]);return de.hash(S.concat([X_(1),e,o]))}const eE=new L.ec("secp256k1");function tE(e,t=!1){const n=K_(e);if(32!==n.length)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${n.length}`);const r=eE.keyFromPrivate(n);return function(e){try{const{r:n,s:i,recoveryParam:o}=r.sign(J_(e));return Promise.resolve(z_({r:W_(n.toString("hex")),s:W_(i.toString("hex")),recoveryParam:o},t))}catch(n){return Promise.reject(n)}}}function nE(e){const t=K_(e);if(64!==t.length)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${t.length}`);return function(e){try{const n="string"==typeof e?B_(e):e,r=h_.sign(t,n);return Promise.resolve(L_(r))}catch(n){return Promise.reject(n)}}}function rE(e){return"object"==typeof e&&"r"in e&&"s"in e}function iE(e){return function(t,n){try{return Promise.resolve(n(t)).then((function(t){if(rE(t))return z_(t,e);if(e&&void 0===H_(t).recoveryParam)throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return t}))}catch(r){return Promise.reject(r)}}}function oE(){return function(e,t){try{return Promise.resolve(t(e)).then((function(e){if(rE(e))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return e}))}catch(n){return Promise.reject(n)}}}const aE={ES256K:iE(),"ES256K-R":iE(!0),Ed25519:oE(),EdDSA:oE()};const sE=new L.ec("secp256k1");function uE(e,t=!1){const n=C_(e);if(n.length!==(t?65:64))throw new Error("wrong signature length");const r={r:F_(n.slice(0,32)),s:F_(n.slice(32,64))};return t&&(r.recoveryParam=n[64]),r}function cE(e){return e.publicKeyBase58?D_(e.publicKeyBase58):e.publicKeyBase64?C_(e.publicKeyBase64):e.publicKeyHex?U_(e.publicKeyHex):e.publicKeyJwk&&"secp256k1"===e.publicKeyJwk.crv&&e.publicKeyJwk.x&&e.publicKeyJwk.y?U_(sE.keyFromPublic({x:F_(C_(e.publicKeyJwk.x)),y:F_(C_(e.publicKeyJwk.y))}).getPublic("hex")):new Uint8Array}function lE(e,t,n){let r;if(t.length>86)r=[uE(t,!0)];else{const e=uE(t,!1);r=[u(s({},e),{recoveryParam:0}),u(s({},e),{recoveryParam:1})]}const i=r.map((t=>{const r=J_(e),i=sE.recoverPubKey(r,t,t.recoveryParam),o=i.encode("hex"),a=i.encode("hex",!0),s=Y_(o);return n.find((e=>{var t,n,r;const i=F_(cE(e));return i===o||i===a||(null==(t=e.ethereumAddress)?void 0:t.toLowerCase())===s||(null==(n=e.blockchainAccountId)||null==(r=n.split("@eip155"))?void 0:r[0].toLowerCase())===s}))})).filter((e=>void 0!==e));if(0===i.length)throw new Error("invalid_signature: Signature invalid for JWT");return i[0]}function fE(e,t,n){const r=B_(e),i=C_(t),o=n.find((e=>h_.verify(cE(e),r,i)));if(!o)throw new Error("invalid_signature: Signature invalid for JWT");return o}const hE={ES256K:function(e,t,n){const r=J_(e),i=uE(t),o=n.filter((({ethereumAddress:e,blockchainAccountId:t})=>void 0===e&&void 0===t)),a=n.filter((({ethereumAddress:e,blockchainAccountId:t})=>void 0!==e||void 0!==typeof t));let s=o.find((e=>{try{const t=cE(e);return sE.keyFromPublic(t).verify(r,i)}catch(t){return!1}}));if(!s&&a.length>0&&(s=lE(e,t,a)),!s)throw new Error("invalid_signature: Signature invalid for JWT");return s},"ES256K-R":lE,Ed25519:fE,EdDSA:fE};function dE(e){const t=hE[e];if(!t)throw new Error(`not_supported: Unsupported algorithm ${e}`);return t}dE.toSignatureObject=uE;const pE=function(e,t,n={},r={}){try{n.alg||(n.alg=yE);const i="string"==typeof e?e:mE(e,r.canonicalize),o=[mE(n,r.canonicalize),i].join("."),a=function(e){const t=aE[e];if(!t)throw new Error(`not_supported: Unsupported algorithm ${e}`);return t}(n.alg);return Promise.resolve(a(o,t)).then((function(e){return[o,e].join(".")}))}catch(i){return Promise.reject(i)}},vE={ES256K:["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],"ES256K-R":["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1"],Ed25519:["ED25519SignatureVerification","Ed25519VerificationKey2018"],EdDSA:["ED25519SignatureVerification","Ed25519VerificationKey2018"]},yE="ES256K",bE="application/did+json";function mE(e,t=!1){return R_(t?p_(e):JSON.stringify(e))}const gE=300;function wE(e){const t=e.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(t)return{header:JSON.parse(M_(t[1])),payload:t[2],signature:t[3],data:`${t[1]}.${t[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function _E(e){if(!e)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{const t=wE(e);return Object.assign(t,{payload:JSON.parse(M_(t.payload))})}catch(t){throw new Error("invalid_argument: Incorrect format JWT")}}function EE({header:e,data:t,signature:n},r){Array.isArray(r)||(r=[r]);return dE(e.alg)(t,n,r)}const xE="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function kE(e,t,n){if(!e.s){if(n instanceof SE){if(!n.s)return void(n.o=kE.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(kE.bind(null,e,t),kE.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const SE=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{kE(r,1,e(this.v))}catch(o){kE(r,2,o)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?kE(r,1,t?t(i):i):n?kE(r,1,n(i)):kE(r,2,i)}catch(o){kE(r,2,o)}},r},e}();function AE(e){return e instanceof SE&&1&e.s}function OE(e,t,n){if("function"==typeof e[xE]){let u=function(e){try{for(;!((r=a.next()).done||n&&n());)if((e=t(r.value))&&e.then){if(!AE(e))return void e.then(u,o||(o=kE.bind(null,i=new SE,2)));e=e.v}i?kE(i,1,e):i=e}catch(s){kE(i||(i=new SE),2,s)}};var r,i,o,a=e[xE]();if(u(),a.return){var s=function(e){try{r.done||a.return()}catch(t){}return e};if(i&&i.then)return i.then(s,(function(e){throw s(e)}));s()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var u=[],c=0;c<e.length;c++)u.push(e[c]);return function(e,t,n){var r,i,o=-1;return function a(s){try{for(;++o<e.length&&(!n||!n());)if((s=t(o))&&s.then){if(!AE(s))return void s.then(a,i||(i=kE.bind(null,r=new SE,2)));s=s.v}r?kE(r,1,s):r=s}catch(u){kE(r||(r=new SE),2,u)}}(),r}(u,(function(e){return t(u[e])}),n)}function PE({ciphertext:e,tag:t,iv:n,protectedHeader:r,recipient:i},o){const a={protected:r,iv:L_(n),ciphertext:L_(e),tag:L_(t)};return o&&(a.aad=L_(o)),i&&(a.recipients=[i]),a}function IE(e){const t=new y_.XChaCha20Poly1305(e);return(e,n)=>{const r=co.randomBytes(t.nonceLength),i=t.seal(r,e,n);return{ciphertext:i.subarray(0,i.length-t.tagLength),tag:i.subarray(i.length-t.tagLength),iv:r}}}function TE(e){const t=IE(e),n="XC20P",r="dir";return{alg:r,enc:n,encrypt:function(e,i={},o){try{const a=R_(JSON.stringify(Object.assign({alg:r},i,{enc:n}))),c=new Uint8Array(Buffer.from(o?`${a}.${L_(o)}`:a));return Promise.resolve(u(s({},t(e,c)),{protectedHeader:a}))}catch(a){return Promise.reject(a)}}}}function jE(e){const t=new y_.XChaCha20Poly1305(e);return{alg:"dir",enc:"XC20P",decrypt:function(e,n,r){try{return Promise.resolve(t.open(n,e,r))}catch(i){return Promise.reject(i)}}}}function NE(e,t){const n=function(n){try{const a=v_.generateKeyPair(),s=v_.sharedKey(a.secretKey,e),u=IE(Q_(s,i,r))(n),c={encrypted_key:L_(u.ciphertext),header:{alg:r,iv:L_(u.iv),tag:L_(u.tag),epk:{kty:"OKP",crv:o,x:L_(a.publicKey)}}};return t&&(c.header.kid=t),Promise.resolve(c)}catch(a){return Promise.reject(a)}},r="ECDH-ES+XC20PKW",i=256,o="X25519";return{alg:r,enc:"XC20P",encrypt:function(e,t={},r){try{Object.assign(t,{alg:void 0});const i=co.randomBytes(32);return Promise.resolve(TE(i).encrypt(e,t,r)).then((function(e){return Promise.resolve(n(i)).then((function(t){return u(s({},e),{recipient:t,cek:i})}))}))}catch(i){return Promise.reject(i)}},encryptCek:n}}function LE(e,t,n={}){const r=function(r){try{let s=function(){const e=new Uint8Array(f.length+h.length);e.set(f),e.set(h,f.length);const t=IE(Q_(e,o,i,c,l))(r),s={encrypted_key:L_(t.ciphertext),header:{alg:i,iv:L_(t.iv),tag:L_(t.tag),epk:{kty:"OKP",crv:a,x:L_(u.publicKey)}}};return n.kid&&(s.header.kid=n.kid),n.apu&&(s.header.apu=n.apu),n.apv&&(s.header.apv=n.apv),s};const u=v_.generateKeyPair(),f=v_.sharedKey(u.secretKey,e);let h;const d=function(){if(!(t instanceof Uint8Array))return Promise.resolve(t(e)).then((function(e){h=e}));h=v_.sharedKey(t,e)}();return Promise.resolve(d&&d.then?d.then(s):s(d))}catch(s){return Promise.reject(s)}},i="ECDH-1PU+XC20PKW",o=256,a="X25519";let c,l;return void 0!==n.apu&&(c=C_(n.apu)),void 0!==n.apv&&(l=C_(n.apv)),{alg:i,enc:"XC20P",encrypt:function(e,t={},n){try{Object.assign(t,{alg:void 0});const i=co.randomBytes(32);return Promise.resolve(TE(i).encrypt(e,t,n)).then((function(e){return Promise.resolve(r(i)).then((function(t){return u(s({},e),{recipient:t,cek:i})}))}))}catch(i){return Promise.reject(i)}},encryptCek:r}}function CE(e){if(!(e&&e.epk&&e.iv&&e.tag))throw new Error("bad_jwe: malformed header")}function DE(e){const t="ECDH-ES+XC20PKW",n=256,r="X25519";return{alg:t,enc:"XC20P",decrypt:function(i,o,a,s){try{let l=function(){const e=Q_(h,n,t),r=G_(s.encrypted_key,s.header.tag);return Promise.resolve(jE(e).decrypt(r,C_(s.header.iv))).then((function(e){return null===e?null:jE(e).decrypt(i,o,a)}))};var u,c;if(CE(null==(u=s)?void 0:u.header),(null==(c=(s=s).header.epk)?void 0:c.crv)!==r||void 0===s.header.epk.x)return Promise.resolve(null);const f=C_(s.header.epk.x);let h;const d=function(){if(!(e instanceof Uint8Array))return Promise.resolve(e(f)).then((function(e){h=e}));h=v_.sharedKey(e,f)}();return Promise.resolve(d&&d.then?d.then(l):l(d))}catch(l){return Promise.reject(l)}}}}function UE(e,t){const n="ECDH-1PU+XC20PKW",r=256,i="X25519";return{alg:n,enc:"XC20P",decrypt:function(o,a,s,u){try{let l=function(){const e=new Uint8Array(h.length+d.length);let t,i;e.set(h),e.set(d,h.length),u.header.apu&&(t=C_(u.header.apu)),u.header.apv&&(i=C_(u.header.apv));const c=Q_(e,r,n,t,i),l=G_(u.encrypted_key,u.header.tag);return Promise.resolve(jE(c).decrypt(l,C_(u.header.iv))).then((function(e){return null===e?null:jE(e).decrypt(o,a,s)}))};var c;if(CE((u=u).header),(null==(c=u.header.epk)?void 0:c.crv)!==i||void 0===u.header.epk.x)return Promise.resolve(null);const f=C_(u.header.epk.x);let h,d;const p=function(){if(!(e instanceof Uint8Array))return Promise.resolve(e(f)).then((function(n){return h=n,Promise.resolve(e(t)).then((function(e){d=e}))}));h=v_.sharedKey(e,f),d=v_.sharedKey(e,t)}();return Promise.resolve(p&&p.then?p.then(l):l(p))}catch(l){return Promise.reject(l)}}}}var RE=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ES256KSigner:tE,EdDSASigner:nE,EllipticSigner:function(e){return tE(e)},NaclSigner:function(e){return nE(e)},SimpleSigner:function(e){const t=tE(e,!0);return function(e){try{return Promise.resolve(t(e)).then(H_)}catch(n){return Promise.reject(n)}}},createAnonDecrypter:function(e){return DE(e)},createAnonEncrypter:function(e,t={}){return NE(e,null==t?void 0:t.kid)},createAuthDecrypter:function(e,t){return UE(e,t)},createAuthEncrypter:function(e,t,n={}){return LE(e,t,n)},createJWE:function(e,t,n={},r){try{if("dir"===t[0].alg){if(t.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(t[0].encrypt(e,n,r)).then((function(e){return PE(e,r)}))}{const i=t[0].enc;if(!t.reduce(((e,t)=>e&&t.enc===i),!0))throw new Error("invalid_argument: Incompatible encrypters passed");let o,a;const s=OE(t,(function(t){const i=o?Promise.resolve(null==t.encryptCek?void 0:t.encryptCek(o)).then((function(e){var t,n;e&&(null==(t=a)||null==(n=t.recipients)||n.push(e))})):Promise.resolve(t.encrypt(e,n,r)).then((function(e){o=e.cek,a=PE(e,r)}));if(i&&i.then)return i.then((function(){}))}));return Promise.resolve(s&&s.then?s.then((function(){return a})):a)}}catch(i){return Promise.reject(i)}},createJWS:pE,createJWT:function(e,{issuer:t,signer:n,alg:r,expiresIn:i,canonicalize:o},a={}){try{if(!n)throw new Error("missing_signer: No Signer functionality has been configured");if(!t)throw new Error("missing_issuer: No issuing DID has been configured");a.typ||(a.typ="JWT"),a.alg||(a.alg=r);const c={iat:Math.floor(Date.now()/1e3),exp:void 0};if(i){if("number"!=typeof i)throw new Error("invalid_argument: JWT expiresIn is not a number");c.exp=(e.nbf||c.iat)+Math.floor(i)}const l=u(s(s({},c),e),{iss:t});return pE(l,n,a,{canonicalize:o})}catch(c){return Promise.reject(c)}},createX25519ECDH:function(e){if(32!==e.length)throw new Error("invalid_argument: incorrect secret key length for X25519");return function(t){try{if(32!==t.length)throw new Error("invalid_argument: incorrect publicKey key length for X25519");return Promise.resolve(v_.sharedKey(e,t))}catch(n){return Promise.reject(n)}}},decodeJWT:_E,decryptJWE:function(e,t){try{let n=function(e){if(null===a)throw new Error("failure: Failed to decrypt");return a};!function(e){if(!(e.protected&&e.iv&&e.ciphertext&&e.tag))throw new Error("bad_jwe: missing properties");e.recipients&&e.recipients.map((e=>{if(!e.header||!e.encrypted_key)throw new Error("bad_jwe: malformed recipients")}))}(e);const r=JSON.parse(M_(e.protected));if(r.enc!==t.enc)throw new Error(`not_supported: Decrypter does not supported: '${r.enc}'`);const i=G_(e.ciphertext,e.tag),o=new Uint8Array(Buffer.from(e.aad?`${e.protected}.${e.aad}`:e.protected));let a=null;const s="dir"===r.alg&&"dir"===t.alg?Promise.resolve(t.decrypt(i,C_(e.iv),o)).then((function(e){a=e})):function(){if(e.recipients&&0!==e.recipients.length){let n=0;return function(e,t,n){for(var r;;){var i=e();if(AE(i)&&(i=i.v),!i)return o;if(i.then){r=0;break}var o=n();if(o&&o.then){if(!AE(o)){r=1;break}o=o.s}if(t){var a=t();if(a&&a.then&&!AE(a)){r=2;break}}}var s=new SE,u=kE.bind(null,s,2);return(0===r?i.then(l):1===r?o.then(c):a.then(f)).then(void 0,u),s;function c(r){o=r;do{if(t&&(a=t())&&a.then&&!AE(a))return void a.then(f).then(void 0,u);if(!(i=e())||AE(i)&&!i.v)return void kE(s,1,o);if(i.then)return void i.then(l).then(void 0,u);AE(o=n())&&(o=o.v)}while(!o||!o.then);o.then(c).then(void 0,u)}function l(e){e?(o=n())&&o.then?o.then(c).then(void 0,u):c(o):kE(s,1,o)}function f(){(i=e())?i.then?i.then(l).then(void 0,u):l(i):kE(s,1,o)}}((function(){return!a&&n<e.recipients.length}),(function(){return n++}),(function(){const s=e.recipients[n];Object.assign(s.header,r);const u=function(){if(s.header.alg===t.alg)return Promise.resolve(t.decrypt(i,C_(e.iv),o,s)).then((function(e){a=e}))}();if(u&&u.then)return u.then((function(){}))}))}throw new Error("bad_jwe: missing recipients")}();return Promise.resolve(s&&s.then?s.then(n):n(s))}catch(n){return Promise.reject(n)}},resolveX25519Encrypters:function(e,t){try{const n=function(e){try{return Promise.resolve(t.resolve(e)).then((function({didResolutionMetadata:t,didDocument:n}){var r;if(null!=t&&t.error||null==n)throw new Error(`resolver_error: Could not resolve ${e}: ${t.error}, ${t.message}`);if(!n.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${e}`);const i=(null==(r=n.keyAgreement)?void 0:r.map((e=>"string"==typeof e?[...n.publicKey||[],...n.verificationMethod||[]].find((t=>t.id===e)):e)).filter((e=>void 0!==e))).filter((e=>"X25519KeyAgreementKey2019"===e.type&&Boolean(e.publicKeyBase58)));if(!i.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${e}`);return i.map((e=>NE(D_(e.publicKeyBase58),e.id)))}))}catch(n){return Promise.reject(n)}},r=e.map((e=>n(e)));return Promise.resolve(Promise.all(r)).then((function(e){return[].concat(...e)}))}catch(n){return Promise.reject(n)}},toEthereumAddress:Y_,verifyJWS:function(e,t){return EE(wE(e),t)},verifyJWT:function(e,t={resolver:void 0,auth:void 0,audience:void 0,callbackUrl:void 0,skewTime:void 0,proofPurpose:void 0}){try{if(!t.resolver)throw new Error("missing_resolver: No DID resolver has been configured");const{payload:n,header:r,signature:i,data:o}=_E(e),a=Object.prototype.hasOwnProperty.call(t,"auth")?t.auth?"authentication":void 0:t.proofPurpose;return Promise.resolve(function(e,t,n,r){try{const i=vE[t];if(!i||0===i.length)throw new Error(`not_supported: No supported signature types for algorithm ${t}`);let o;return Promise.resolve(e.resolve(n,{accept:bE})).then((function(e){var a,u,c,l,f;if(o=-1===Object.getOwnPropertyNames(e).indexOf("didDocument")?{didDocument:e,didDocumentMetadata:{},didResolutionMetadata:{contentType:bE}}:e,null!=(a=o.didResolutionMetadata)&&a.error||null==o.didDocument){const{error:e,message:t}=o.didResolutionMetadata;throw new Error(`resolver_error: Unable to resolve DID document for ${n}: ${e}, ${t||""}`)}const h=(e,t)=>{const n=e.filter((({id:e})=>t===e));return n.length>0?n[0]:null};let d=[...(null==(u=o)||null==(c=u.didDocument)?void 0:c.verificationMethod)||[],...(null==(l=o)||null==(f=l.didDocument)?void 0:f.publicKey)||[]];var p;"string"==typeof r&&(r.startsWith("assertion")&&!Object.getOwnPropertyNames(null==(p=o)?void 0:p.didDocument).includes("assertionMethod")&&(o.didDocument=s({},o.didDocument),o.didDocument.assertionMethod=[...d.map((e=>e.id))]),d=(o.didDocument[r]||[]).map((e=>"string"==typeof e?h(d,e):"string"==typeof e.publicKey?h(d,e.publicKey):e)).filter((e=>null!=e)));const v=d.filter((({type:e})=>i.find((t=>t===e))));if("string"==typeof r&&(!v||0===v.length))throw new Error(`no_suitable_keys: DID document for ${n} does not have public keys suitable for ${t} with ${r} purpose`);if(!v||0===v.length)throw new Error(`no_suitable_keys: DID document for ${n} does not have public keys for ${t}`);return{authenticators:v,issuer:n,didResolutionResult:o}}))}catch(i){return Promise.reject(i)}}(t.resolver,r.alg,n.iss||"",a)).then((function({didResolutionResult:a,authenticators:s,issuer:u}){return Promise.resolve(EE({header:r,data:o,signature:i},s)).then((function(r){const i=Math.floor(Date.now()/1e3),o=void 0!==t.skewTime&&t.skewTime>=0?t.skewTime:gE;if(r){const s=i+o;if(n.nbf){if(n.nbf>s)throw new Error(`invalid_jwt: JWT not valid before nbf: ${n.nbf}`)}else if(n.iat&&n.iat>s)throw new Error(`invalid_jwt: JWT not valid yet (issued in the future) iat: ${n.iat}`);if(n.exp&&n.exp<=i-o)throw new Error(`invalid_jwt: JWT has expired: exp: ${n.exp} < now: ${i}`);if(n.aud){if(!t.audience&&!t.callbackUrl)throw new Error("invalid_config: JWT audience is required but your app address has not been configured");if(void 0===(Array.isArray(n.aud)?n.aud:[n.aud]).find((e=>t.audience===e||t.callbackUrl===e)))throw new Error("invalid_config: JWT audience does not match your DID or callback url")}return{payload:n,didResolutionResult:a,issuer:u,signer:r,jwt:e}}throw new Error("invalid_signature: JWT not valid. issuer DID document does not contain a verificationMethod that matches the signature.")}))}))}catch(n){return Promise.reject(n)}},x25519Decrypter:DE,x25519Encrypter:NE,xc20pAuthDecrypterEcdh1PuV3x25519WithXc20PkwV2:UE,xc20pAuthEncrypterEcdh1PuV3x25519WithXc20PkwV2:LE,xc20pDirDecrypter:jE,xc20pDirEncrypter:TE})),ME={},FE={},BE={},zE=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,HE=Math.ceil,GE=Math.floor,$E="[BigNumber Error] ",qE=$E+"Number primitive has more than 15 significant digits: ",VE=1e14,KE=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],WE=1e9;function JE(e){var t=0|e;return e>0||e===t?t:t-1}function YE(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function XE(e,t){var n,r,i=e.c,o=t.c,a=e.s,s=t.s,u=e.e,c=t.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=u==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(s=(u=i.length)<(c=o.length)?u:c,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return u==c?0:u>c^n?1:-1}function ZE(e,t,n,r){if(e<t||e>n||e!==GE(e))throw Error($E+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function QE(e){var t=e.c.length-1;return JE(e.e/14)==t&&e.c[t]%2!=0}function ex(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function tx(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var nx=function e(t){var n,r,i,o,a,s,u,c,l,f,h=S.prototype={constructor:S,toString:null,valueOf:null},d=new S(1),p=20,v=4,y=-7,b=21,m=-1e7,g=1e7,w=!1,_=1,E=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz";function S(e,t){var n,o,a,s,u,c,l,f,h=this;if(!(h instanceof S))return new S(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>g?h.c=h.e=null:e.e<m?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((c="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,u=e;u>=10;u/=10,s++);return void(s>g?h.c=h.e=null:(h.e=s,h.c=[e]))}f=String(e)}else{if(!zE.test(f=String(e)))return i(h,f,c);h.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(s=f.indexOf("."))>-1&&(f=f.replace(".","")),(u=f.search(/e/i))>0?(s<0&&(s=u),s+=+f.slice(u+1),f=f.substring(0,u)):s<0&&(s=f.length)}else{if(ZE(t,2,k.length,"Base"),10==t)return I(h=new S(e),p+h.e+1,v);if(f=String(e),c="number"==typeof e){if(0*e!=0)return i(h,f,c,t);if(h.s=1/e<0?(f=f.slice(1),-1):1,S.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(qE+e)}else h.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(n=k.slice(0,t),s=u=0,l=f.length;u<l;u++)if(n.indexOf(o=f.charAt(u))<0){if("."==o){if(u>s){s=l;continue}}else if(!a&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){a=!0,u=-1,s=0;continue}return i(h,String(e),c,t)}c=!1,(s=(f=r(f,t,10,h.s)).indexOf("."))>-1?f=f.replace(".",""):s=f.length}for(u=0;48===f.charCodeAt(u);u++);for(l=f.length;48===f.charCodeAt(--l););if(f=f.slice(u,++l)){if(l-=u,c&&S.DEBUG&&l>15&&(e>9007199254740991||e!==GE(e)))throw Error(qE+h.s*e);if((s=s-u-1)>g)h.c=h.e=null;else if(s<m)h.c=[h.e=0];else{if(h.e=s,h.c=[],u=(s+1)%14,s<0&&(u+=14),u<l){for(u&&h.c.push(+f.slice(0,u)),l-=14;u<l;)h.c.push(+f.slice(u,u+=14));u=14-(f=f.slice(u)).length}else u-=l;for(;u--;f+="0");h.c.push(+f)}}else h.c=[h.e=0]}function A(e,t,n,r){var i,o,a,s,u;if(null==n?n=v:ZE(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)u=YE(e.c),u=1==r||2==r&&(a<=y||a>=b)?ex(u,a):tx(u,a,"0");else if(o=(e=I(new S(e),t,n)).e,s=(u=YE(e.c)).length,1==r||2==r&&(t<=o||o<=y)){for(;s<t;u+="0",s++);u=ex(u,o)}else if(t-=a,u=tx(u,o,"0"),o+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-s)>0)for(o+1==s&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function O(e,t){for(var n,r=1,i=new S(e[0]);r<e.length;r++){if(!(n=new S(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function P(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+14*n-1)>g?e.c=e.e=null:n<m?e.c=[e.e=0]:(e.e=n,e.c=t),e}function I(e,t,n,r){var i,o,a,s,u,c,l,f=e.c,h=KE;if(f){e:{for(i=1,s=f[0];s>=10;s/=10,i++);if((o=t-i)<0)o+=14,a=t,l=(u=f[c=0])/h[i-a-1]%10|0;else if((c=HE((o+1)/14))>=f.length){if(!r)break e;for(;f.length<=c;f.push(0));u=l=0,i=1,a=(o%=14)-14+1}else{for(u=s=f[c],i=1;s>=10;s/=10,i++);l=(a=(o%=14)-14+i)<0?0:u/h[i-a-1]%10|0}if(r=r||t<0||null!=f[c+1]||(a<0?u:u%h[i-a-1]),r=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?u/h[i-a]:0:f[c-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=h[(14-t%14)%14],e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=c,s=1,c--):(f.length=c+1,s=h[14-o],f[c]=a>0?GE(u/h[i-a]%h[a])*s:0),r)for(;;){if(0==c){for(o=1,a=f[0];a>=10;a/=10,o++);for(a=f[0]+=s,s=1;a>=10;a/=10,s++);o!=s&&(e.e++,f[0]==VE&&(f[0]=1));break}if(f[c]+=s,f[c]!=VE)break;f[c--]=0,s=1}for(o=f.length;0===f[--o];f.pop());}e.e>g?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var t,n=e.e;return null===n?e.toString():(t=YE(e.c),t=n<=y||n>=b?ex(t,n):tx(t,n,"0"),e.s<0?"-"+t:t)}return S.clone=e,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error($E+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(ZE(n=e[t],0,WE,t),p=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(ZE(n=e[t],0,8,t),v=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(ZE(n[0],-WE,0,t),ZE(n[1],0,WE,t),y=n[0],b=n[1]):(ZE(n,-WE,WE,t),y=-(b=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)ZE(n[0],-WE,-1,t),ZE(n[1],1,WE,t),m=n[0],g=n[1];else{if(ZE(n,-WE,WE,t),!n)throw Error($E+t+" cannot be zero: "+n);m=-(g=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error($E+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error($E+"crypto unavailable");w=n}else w=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(ZE(n=e[t],0,9,t),_=n),e.hasOwnProperty(t="POW_PRECISION")&&(ZE(n=e[t],0,WE,t),E=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error($E+t+" not an object: "+n);x=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error($E+t+" invalid: "+n);k=n}}return{DECIMAL_PLACES:p,ROUNDING_MODE:v,EXPONENTIAL_AT:[y,b],RANGE:[m,g],CRYPTO:w,MODULO_MODE:_,POW_PRECISION:E,FORMAT:x,ALPHABET:k}},S.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!S.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-WE&&i<=WE&&i===GE(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=VE||n!==GE(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error($E+"Invalid BigNumber: "+e)},S.maximum=S.max=function(){return O(arguments,h.lt)},S.minimum=S.min=function(){return O(arguments,h.gt)},S.random=(o=9007199254740992,a=Math.random()*o&2097151?function(){return GE(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,o,s=0,u=[],c=new S(d);if(null==e?e=p:ZE(e,0,WE),i=HE(e/14),w)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));s<i;)(o=131072*t[s]+(t[s+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[s]=n[0],t[s+1]=n[1]):(u.push(o%1e14),s+=2);s=i/2}else{if(!crypto.randomBytes)throw w=!1,Error($E+"crypto unavailable");for(t=crypto.randomBytes(i*=7);s<i;)(o=281474976710656*(31&t[s])+1099511627776*t[s+1]+4294967296*t[s+2]+16777216*t[s+3]+(t[s+4]<<16)+(t[s+5]<<8)+t[s+6])>=9e15?crypto.randomBytes(7).copy(t,s):(u.push(o%1e14),s+=7);s=i/7}if(!w)for(;s<i;)(o=a())<9e15&&(u[s++]=o%1e14);for(e%=14,(i=u[--s])&&e&&(o=KE[14-e],u[s]=GE(i/o)*o);0===u[s];u.pop(),s--);if(s<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=14);for(s=1,o=u[0];o>=10;o/=10,s++);s<14&&(r-=14-s)}return c.e=r,c.c=u,c}),S.sum=function(){for(var e=1,t=arguments,n=new S(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var i,o,a=[0],s=0,u=e.length;s<u;){for(o=a.length;o--;a[o]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,o,a,s){var u,c,l,f,h,d,y,b,m=r.indexOf("."),g=p,w=v;for(m>=0&&(f=E,E=0,r=r.replace(".",""),d=(b=new S(i)).pow(r.length-m),E=f,b.c=t(tx(YE(d.c),d.e,"0"),10,o,e),b.e=b.c.length),l=f=(y=t(r,i,o,s?(u=k,e):(u=e,k))).length;0==y[--f];y.pop());if(!y[0])return u.charAt(0);if(m<0?--l:(d.c=y,d.e=l,d.s=a,y=(d=n(d,b,g,w,o)).c,h=d.r,l=d.e),m=y[c=l+g+1],f=o/2,h=h||c<0||null!=y[c+1],h=w<4?(null!=m||h)&&(0==w||w==(d.s<0?3:2)):m>f||m==f&&(4==w||h||6==w&&1&y[c-1]||w==(d.s<0?8:7)),c<1||!y[0])r=h?tx(u.charAt(1),-g,u.charAt(0)):u.charAt(0);else{if(y.length=c,h)for(--o;++y[--c]>o;)y[c]=0,c||(++l,y=[1].concat(y));for(f=y.length;!y[--f];);for(m=0,r="";m<=f;r+=u.charAt(y[m++]));r=tx(r,l,u.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,i,o,a,s=0,u=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();u--;)s=((i=c*(o=e[u]%1e7)+(r=l*o+(a=e[u]/1e7|0)*c)%1e7*1e7+s)/n|0)+(r/1e7|0)+l*a,e[u]=i%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,a,s){var u,c,l,f,h,d,p,v,y,b,m,g,w,_,E,x,k,A=r.s==i.s?1:-1,O=r.c,P=i.c;if(!(O&&O[0]&&P&&P[0]))return new S(r.s&&i.s&&(O?!P||O[0]!=P[0]:P)?O&&0==O[0]||!P?0*A:A/0:NaN);for(y=(v=new S(A)).c=[],A=o+(c=r.e-i.e)+1,s||(s=VE,c=JE(r.e/14)-JE(i.e/14),A=A/14|0),l=0;P[l]==(O[l]||0);l++);if(P[l]>(O[l]||0)&&c--,A<0)y.push(1),f=!0;else{for(_=O.length,x=P.length,l=0,A+=2,(h=GE(s/(P[0]+1)))>1&&(P=e(P,h,s),O=e(O,h,s),x=P.length,_=O.length),w=x,m=(b=O.slice(0,x)).length;m<x;b[m++]=0);k=P.slice(),k=[0].concat(k),E=P[0],P[1]>=s/2&&E++;do{if(h=0,(u=t(P,b,x,m))<0){if(g=b[0],x!=m&&(g=g*s+(b[1]||0)),(h=GE(g/E))>1)for(h>=s&&(h=s-1),p=(d=e(P,h,s)).length,m=b.length;1==t(d,b,p,m);)h--,n(d,x<p?k:P,p,s),p=d.length,u=1;else 0==h&&(u=h=1),p=(d=P.slice()).length;if(p<m&&(d=[0].concat(d)),n(b,d,m,s),m=b.length,-1==u)for(;t(P,b,x,m)<1;)h++,n(b,x<m?k:P,m,s),m=b.length}else 0===u&&(h++,b=[0]);y[l++]=h,b[0]?b[m++]=O[w]||0:(b=[O[w]],m=1)}while((w++<_||null!=b[0])&&A--);f=null!=b[0],y[0]||y.splice(0,1)}if(s==VE){for(l=1,A=y[0];A>=10;A/=10,l++);I(v,o+(v.e=l+14*c-1)+1,a,f)}else v.e=c,v.r=+f;return v}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,c=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,f=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,n,r){var i,o=n?t:t.replace(f,"");if(l.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(s,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,o=o.replace(u,"$1").replace(c,"0.$1")),t!=o))return new S(o,i);if(S.DEBUG)throw Error($E+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new S(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return XE(this,new S(e,t))},h.decimalPlaces=h.dp=function(e,t){var n,r,i,o=this;if(null!=e)return ZE(e,0,WE),null==t?t=v:ZE(t,0,8),I(new S(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=14*((i=n.length-1)-JE(this.e/14)),i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},h.dividedBy=h.div=function(e,t){return n(this,new S(e,t),p,v)},h.dividedToIntegerBy=h.idiv=function(e,t){return n(this,new S(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var n,r,i,o,a,s,u,c,l=this;if((e=new S(e)).c&&!e.isInteger())throw Error($E+"Exponent not an integer: "+T(e));if(null!=t&&(t=new S(t)),a=e.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!e.c||!e.c[0])return c=new S(Math.pow(+T(l),a?2-QE(e):+T(e))),t?c.mod(t):c;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new S(NaN);(r=!s&&l.isInteger()&&t.isInteger())&&(l=l.mod(t))}else{if(e.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||a&&l.c[1]>=24e7:l.c[0]<8e13||a&&l.c[0]<=9999975e7)))return o=l.s<0&&QE(e)?-0:0,l.e>-1&&(o=1/o),new S(s?1/o:o);E&&(o=HE(E/14+2))}for(a?(n=new S(.5),s&&(e.s=1),u=QE(e)):u=(i=Math.abs(+T(e)))%2,c=new S(d);;){if(u){if(!(c=c.times(l)).c)break;o?c.c.length>o&&(c.c.length=o):r&&(c=c.mod(t))}if(i){if(0===(i=GE(i/2)))break;u=i%2}else if(I(e=e.times(n),e.e+1,1),e.e>14)u=QE(e);else{if(0===(i=+T(e)))break;u=i%2}l=l.times(l),o?l.c&&l.c.length>o&&(l.c.length=o):r&&(l=l.mod(t))}return r?c:(s&&(c=d.div(c)),t?c.mod(t):o?I(c,E,v,undefined):c)},h.integerValue=function(e){var t=new S(this);return null==e?e=v:ZE(e,0,8),I(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===XE(this,new S(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return XE(this,new S(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=XE(this,new S(e,t)))||0===t},h.isInteger=function(){return!!this.c&&JE(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return XE(this,new S(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=XE(this,new S(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var n,r,i,o,a=this,s=a.s;if(t=(e=new S(e,t)).s,!s||!t)return new S(NaN);if(s!=t)return e.s=-t,a.plus(e);var u=a.e/14,c=e.e/14,l=a.c,f=e.c;if(!u||!c){if(!l||!f)return l?(e.s=-t,e):new S(f?a:NaN);if(!l[0]||!f[0])return f[0]?(e.s=-t,e):new S(l[0]?a:3==v?-0:0)}if(u=JE(u),c=JE(c),l=l.slice(),s=u-c){for((o=s<0)?(s=-s,i=l):(c=u,i=f),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(r=(o=(s=l.length)<(t=f.length))?s:t,s=t=0;t<r;t++)if(l[t]!=f[t]){o=l[t]<f[t];break}if(o&&(i=l,l=f,f=i,e.s=-e.s),(t=(r=f.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=VE-1;r>s;){if(l[--r]<f[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=VE}l[r]-=f[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?P(e,l,c):(e.s=3==v?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var r,i,o=this;return e=new S(e,t),!o.c||!e.s||e.c&&!e.c[0]?new S(NaN):!e.c||o.c&&!o.c[0]?new S(o):(9==_?(i=e.s,e.s=1,r=n(o,e,0,3),e.s=i,r.s*=i):r=n(o,e,0,_),(e=o.minus(r.times(e))).c[0]||1!=_||(e.s=o.s),e)},h.multipliedBy=h.times=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,d,p,v,y,b=this,m=b.c,g=(e=new S(e,t)).c;if(!(m&&g&&m[0]&&g[0]))return!b.s||!e.s||m&&!m[0]&&!g||g&&!g[0]&&!m?e.c=e.e=e.s=null:(e.s*=b.s,m&&g?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=JE(b.e/14)+JE(e.e/14),e.s*=b.s,(u=m.length)<(f=g.length)&&(p=m,m=g,g=p,i=u,u=f,f=i),i=u+f,p=[];i--;p.push(0));for(v=VE,y=1e7,i=f;--i>=0;){for(n=0,h=g[i]%y,d=g[i]/y|0,o=i+(a=u);o>i;)n=((c=h*(c=m[--a]%y)+(s=d*c+(l=m[a]/y|0)*h)%y*y+p[o]+n)/v|0)+(s/y|0)+d*l,p[o--]=c%v;p[o]=n}return n?++r:p.splice(0,1),P(e,p,r)},h.negated=function(){var e=new S(this);return e.s=-e.s||null,e},h.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new S(e,t)).s,!i||!t)return new S(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/14,a=e.e/14,s=r.c,u=e.c;if(!o||!a){if(!s||!u)return new S(i/0);if(!s[0]||!u[0])return u[0]?e:new S(s[0]?r:0*i)}if(o=JE(o),a=JE(a),s=s.slice(),i=o-a){for(i>0?(a=o,n=u):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(t=u.length)<0&&(n=u,u=s,s=n,t=i),i=0;t;)i=(s[--t]=s[t]+u[t]+i)/VE|0,s[t]=VE===s[t]?0:s[t]%VE;return i&&(s=[i].concat(s),++a),P(e,s,a)},h.precision=h.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return ZE(e,1,WE),null==t?t=v:ZE(t,0,8),I(new S(o),e,t);if(!(n=o.c))return null;if(r=14*(i=n.length-1)+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},h.shiftedBy=function(e){return ZE(e,-9007199254740991,9007199254740991),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,r,i,o,a=this,s=a.c,u=a.s,c=a.e,l=p+4,f=new S("0.5");if(1!==u||!s||!s[0])return new S(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(u=Math.sqrt(+T(a)))||u==1/0?(((t=YE(s)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=JE((c+1)/2)-(c<0||c%2),r=new S(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new S(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(o=r,r=f.times(o.plus(n(a,o,l,1))),YE(o.c).slice(0,u)===(t=YE(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(I(r,r.e+p+2,1),e=!r.times(r).eq(a));break}if(!i&&(I(o,o.e+p+2,0),o.times(o).eq(a))){r=o;break}l+=4,u+=4,i=1}return I(r,r.e+p+1,v,e)},h.toExponential=function(e,t){return null!=e&&(ZE(e,0,WE),e++),A(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(ZE(e,0,WE),e=e+this.e+1),A(this,e,t)},h.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=x;else if("object"!=typeof n)throw Error($E+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,a=r.split("."),s=+n.groupSize,u=+n.secondaryGroupSize,c=n.groupSeparator||"",l=a[0],f=a[1],h=i.s<0,d=h?l.slice(1):l,p=d.length;if(u&&(o=s,s=u,u=o,p-=o),s>0&&p>0){for(o=p%s||s,l=d.substr(0,o);o<p;o+=s)l+=c+d.substr(o,s);u>0&&(l+=c+d.slice(o)),h&&(l="-"+l)}r=f?l+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):l}return(n.prefix||"")+r+(n.suffix||"")},h.toFraction=function(e){var t,r,i,o,a,s,u,c,l,f,h,p,y=this,b=y.c;if(null!=e&&(!(u=new S(e)).isInteger()&&(u.c||1!==u.s)||u.lt(d)))throw Error($E+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+T(u));if(!b)return new S(y);for(t=new S(d),l=r=new S(d),i=c=new S(d),p=YE(b),a=t.e=p.length-y.e-1,t.c[0]=KE[(s=a%14)<0?14+s:s],e=!e||u.comparedTo(t)>0?a>0?t:l:u,s=g,g=1/0,u=new S(p),c.c[0]=0;f=n(u,t,0,1),1!=(o=r.plus(f.times(i))).comparedTo(e);)r=i,i=o,l=c.plus(f.times(o=l)),c=o,t=u.minus(f.times(o=t)),u=o;return o=n(e.minus(r),i,0,1),c=c.plus(o.times(l)),r=r.plus(o.times(i)),c.s=l.s=y.s,h=n(l,i,a*=2,v).minus(y).abs().comparedTo(n(c,r,a,v).minus(y).abs())<1?[l,i]:[c,r],g=s,h},h.toNumber=function(){return+T(this)},h.toPrecision=function(e,t){return null!=e&&ZE(e,1,WE),A(this,e,t,2)},h.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=y||o>=b?ex(YE(n.c),o):tx(YE(n.c),o,"0"):10===e?t=tx(YE((n=I(new S(n),p+o+1,v)).c),n.e,"0"):(ZE(e,2,k.length,"Base"),t=r(tx(YE(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return T(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&S.set(t),S}(),rx=d(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BigNumber:nx,default:nx})),ix={},ox={};const ax=rx.BigNumber;ox.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},ox.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},ox.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},ox.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},ox.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},ox.SHIFT32=Math.pow(2,32),ox.SHIFT16=Math.pow(2,16),ox.MAX_SAFE_HIGH=2097151,ox.NEG_ONE=new ax(-1),ox.TEN=new ax(10),ox.TWO=new ax(2),ox.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},function(e){const{Buffer:t}=D,n=rx.BigNumber,r=ox,i=r.SHIFT32,o=r.SHIFT16;e.parseHalf=function(e){var t,n,r;return r=128&e[0]?-1:1,t=(124&e[0])>>2,n=(3&e[0])<<8|e[1],t?31===t?r*(n?NaN:1/0):r*Math.pow(2,t-25)*(1024+n):5.960464477539063e-8*r*n},e.arrayBufferToBignumber=function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=(i=e[n])<16?"0"+i.toString(16):i.toString(16);var i;return new n(r,16)},e.buildMap=e=>{const t=new Map,n=Object.keys(e),r=n.length;for(let i=0;i<r;i++)t.set(n[i],e[n[i]]);return t},e.buildInt32=(e,t)=>e*o+t,e.buildInt64=(t,r,o,a)=>{const s=e.buildInt32(t,r),u=e.buildInt32(o,a);return s>2097151?new n(s).times(i).plus(u):s*i+u},e.writeHalf=function(e,n){const r=t.allocUnsafe(4);r.writeFloatBE(n,0);const i=r.readUInt32BE(0);if(0!=(8191&i))return!1;var o=i>>16&32768;const a=i>>23&255,s=8388607&i;if(a>=113&&a<=142)o+=(a-112<<10)+(s>>13);else{if(!(a>=103&&a<113))return!1;if(s&(1<<126-a)-1)return!1;o+=s+8388608>>126-a}return e.writeUInt16BE(o,0),!0},e.keySorter=function(e,t){var n=e[0].byteLength,r=t[0].byteLength;return n>r?1:r>n?-1:e[0].compare(t[0])},e.isNegativeZero=e=>0===e&&1/e<0,e.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}(ix);const sx=ox,ux=sx.MT,cx=sx.SIMPLE,lx=sx.SYMS;class fx{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,ux.SIMPLE_FLOAT)}static isSimple(e){return e instanceof fx}static decode(e,t){switch(null==t&&(t=!0),e){case cx.FALSE:return!1;case cx.TRUE:return!0;case cx.NULL:return t?null:lx.NULL;case cx.UNDEFINED:return t?void 0:lx.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return lx.BREAK;default:return new fx(e)}}}var hx=fx;class dx{constructor(e,t,n){if(this.tag=e,this.value=t,this.err=n,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,n;if("function"!=typeof(n=null!=e?e[this.tag]:void 0)&&"function"!=typeof(n=dx["_tag"+this.tag]))return this;try{return n.call(dx,this.value)}catch(r){return t=r,this.err=t,this}}}var px=dx;const vx=self.location?self.location.protocol+"//"+self.location.host:"",yx=self.URL;var bx={URLWithLegacySupport:class{constructor(e="",t=vx){this.super=new yx(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:vx,format:function(e){if("string"==typeof e){return new yx(e).toString()}if(!(e instanceof yx)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",o=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),u=e.hash||"",c=e.pathname||"";return`${i}${t||n}${o||a+r}${e.path||c+s}${u}`}}};const{URLWithLegacySupport:mx,format:gx}=bx;const{URLWithLegacySupport:wx,format:_x,URLSearchParams:Ex,defaultBase:xx}=bx;var kx={URL:wx,URLSearchParams:Ex,format:_x,relative:(e,t={},n={},r)=>{let i,o=t.protocol?t.protocol.replace(":",""):"http";o=(n[o]||r||o)+":";try{i=new mx(e)}catch(s){i={}}const a=Object.assign({},t,{protocol:o||i.protocol,host:t.host||i.host});return new mx(e,gx(a)).toString()},defaultBase:xx};const{Buffer:Sx}=D,Ax=U,Ox=rx.BigNumber,Px=function(e,t,n){var r=new e.Uint8Array(n),i=t.pushInt,o=t.pushInt32,a=t.pushInt32Neg,s=t.pushInt64,u=t.pushInt64Neg,c=t.pushFloat,l=t.pushFloatSingle,f=t.pushFloatDouble,h=t.pushTrue,d=t.pushFalse,p=t.pushUndefined,v=t.pushNull,y=t.pushInfinity,b=t.pushInfinityNeg,m=t.pushNaN,g=t.pushNaNNeg,w=t.pushArrayStart,_=t.pushArrayStartFixed,E=t.pushArrayStartFixed32,x=t.pushArrayStartFixed64,k=t.pushObjectStart,S=t.pushObjectStartFixed,A=t.pushObjectStartFixed32,O=t.pushObjectStartFixed64,P=t.pushByteString,I=t.pushByteStringStart,T=t.pushUtf8String,j=t.pushUtf8StringStart,N=t.pushSimpleUnassigned,L=t.pushTagStart,C=t.pushTagStart4,D=t.pushTagStart8,U=(t.pushTagUnassigned,t.pushBreak),R=e.Math.pow,M=0,F=0,B=0;function z(e){return((0|M)+(0|(e|=0))|0)<(0|F)?0:1}function H(e){return r[0|(e|=0)]<<8|r[e+1|0]|0}function G(e){return r[0|(e|=0)]<<24|r[e+1|0]<<16|r[e+2|0]<<8|r[e+3|0]|0}function $(e){return i(0|(e|=0)),M=M+1|0,0}function q(e){return i(-1-((e|=0)-32|0)|0),M=M+1|0,0}function V(e){var t,n;return 0|z(0|(n=(e|=0)-64|0))?1:(P(0|(M+1|0),0|(t=(M+1|0)+(0|n)|0)),M=0|t,0)}function K(e){var t,n;return 0|z(0|(n=(e|=0)-96|0))?1:(T(0|(M+1|0),0|(t=(M+1|0)+(0|n)|0)),M=0|t,0)}function W(e){return _((e|=0)-128|0),M=M+1|0,0}function J(e){var t;return 0|z(0|(t=(e|=0)-160|0))?1:(S(0|t),M=M+1|0,0)}function Y(e){return L(0|(e|=0)-192),M=M+1|0,0}function X(e){return L(0|(e|=0)-192),M=M+1|0,0}function Z(e){return N((0|(e|=0))-224|0),M=M+1|0,0}function Q(e){return 0,1}var ee=[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,function(e){return 0,0|z(1)?1:(i(0|r[M+1|0]),M=M+2|0,0)},function(e){return 0,0|z(2)?1:(i(0|H(M+1|0)),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(o(0|H(M+1|0),0|H(M+3|0)),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(s(0|H(M+1|0),0|H(M+3|0),0|H(M+5|0),0|H(M+7|0)),M=M+9|0,0)},Q,Q,Q,Q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,function(e){return 0,0|z(1)?1:(i(-1-(0|r[M+1|0])|0),M=M+2|0,0)},function(e){var t;return 0|z(2)?1:(t=0|H(M+1|0),i(-1-(0|t)|0),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(a(0|H(M+1|0),0|H(M+3|0)),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(u(0|H(M+1|0),0|H(M+3|0),0|H(M+5|0),0|H(M+7|0)),M=M+9|0,0)},Q,Q,Q,Q,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,function(e){var t,n,i;return 0|z(1)?1:(i=0|r[M+1|0],t=M+2|0,n=(M+2|0)+(0|i)|0,0|z(i+1|0)?1:(P(0|t,0|n),M=0|n,0))},function(e){var t,n,r;return 0|z(2)?1:(r=0|H(M+1|0),t=M+3|0,n=(M+3|0)+(0|r)|0,0|z(r+2|0)?1:(P(0|t,0|n),M=0|n,0))},function(e){var t,n,r;return 0|z(4)?1:(r=0|G(M+1|0),t=M+5|0,n=(M+5|0)+(0|r)|0,0|z(r+4|0)?1:(P(0|t,0|n),M=0|n,0))},function(e){return 0,1},Q,Q,Q,function(e){return 0,I(),M=M+1|0,0},K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,function(e){var t,n,i;return 0|z(1)?1:(i=0|r[M+1|0],t=M+2|0,n=(M+2|0)+(0|i)|0,0|z(i+1|0)?1:(T(0|t,0|n),M=0|n,0))},function(e){var t,n,r;return 0|z(2)?1:(r=0|H(M+1|0),t=M+3|0,n=(M+3|0)+(0|r)|0,0|z(r+2|0)?1:(T(0|t,0|n),M=0|n,0))},function(e){var t,n,r;return 0|z(4)?1:(r=0|G(M+1|0),t=M+5|0,n=(M+5|0)+(0|r)|0,0|z(r+4|0)?1:(T(0|t,0|n),M=0|n,0))},function(e){return 0,1},Q,Q,Q,function(e){return 0,j(),M=M+1|0,0},W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,function(e){return 0,0|z(1)?1:(_(0|r[M+1|0]),M=M+2|0,0)},function(e){return 0,0|z(2)?1:(_(0|H(M+1|0)),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(E(0|H(M+1|0),0|H(M+3|0)),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(x(0|H(M+1|0),0|H(M+3|0),0|H(M+5|0),0|H(M+7|0)),M=M+9|0,0)},Q,Q,Q,function(e){return 0,w(),M=M+1|0,0},J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,function(e){return 0,0|z(1)?1:(S(0|r[M+1|0]),M=M+2|0,0)},function(e){return 0,0|z(2)?1:(S(0|H(M+1|0)),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(A(0|H(M+1|0),0|H(M+3|0)),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(O(0|H(M+1|0),0|H(M+3|0),0|H(M+5|0),0|H(M+7|0)),M=M+9|0,0)},Q,Q,Q,function(e){return 0,k(),M=M+1|0,0},Y,Y,Y,Y,Y,Y,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,function(e){return 0,0|z(1)?1:(L(0|r[M+1|0]),M=M+2|0,0)},function(e){return 0,0|z(2)?1:(L(0|H(M+1|0)),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(C(0|H(M+1|0),0|H(M+3|0)),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(D(0|H(M+1|0),0|H(M+3|0),0|H(M+5|0),0|H(M+7|0)),M=M+9|0,0)},Q,Q,Q,Q,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,function(e){return 0,d(),M=M+1|0,0},function(e){return 0,h(),M=M+1|0,0},function(e){return 0,v(),M=M+1|0,0},function(e){return 0,p(),M=M+1|0,0},function(e){return 0,0|z(1)?1:(N(0|r[M+1|0]),M=M+2|0,0)},function(e){var t,n,i,o=1;return 0|z(2)?1:(128&(0|(t=0|r[M+1|0]))&&(o=-1),i=+((3&(0|t))<<8|(0|r[M+2|0])),0==+(n=+((124&(0|t))>>2))?c(5.960464477539063e-8*+o*+i):31==+n?1==+o?+i>0?m():y():+i>0?g():b():c(+ +o*R(2,+(+n-25))*+(1024+i)),M=M+3|0,0)},function(e){return 0,0|z(4)?1:(l(0|r[M+1|0],0|r[M+2|0],0|r[M+3|0],0|r[M+4|0]),M=M+5|0,0)},function(e){return 0,0|z(8)?1:(f(0|r[M+1|0],0|r[M+2|0],0|r[M+3|0],0|r[M+4|0],0|r[M+5|0],0|r[M+6|0],0|r[M+7|0],0|r[M+8|0]),M=M+9|0,0)},Q,Q,Q,function(e){return 0,U(),M=M+1|0,0}];return{parse:function(e){for(M=0,F=e|=0;(0|M)<(0|F)&&!((0|(B=0|ee[255&r[M]](0|r[M])))>0););return 0|B}}},Ix=ix,Tx=ox,jx=hx,Nx=px,{URL:Lx}=kx;class Cx{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=Ix.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Sx.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>Ix.arrayBufferToBignumber(e),3:e=>Tx.NEG_ONE.minus(Ix.arrayBufferToBignumber(e)),4:e=>Tx.TEN.pow(e[0]).times(e[1]),5:e=>Tx.TWO.pow(e[0]).times(e[1]),32:e=>new Lx(e),35:e=>new RegExp(e)},e.tags),this.parser=Px(f,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Tx.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Tx.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Tx.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Tx.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Tx.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Tx.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===Tx.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const n=this._currentParent;switch(n.values++,n.type){case Tx.PARENT.ARRAY:case Tx.PARENT.BYTE_STRING:case Tx.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Tx.PARENT.OBJECT:null!=n.tmpKey?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,"string"!=typeof n.tmpKey&&(n.type=Tx.PARENT.MAP,n.ref=Ix.buildMap(n.ref)));break;case Tx.PARENT.MAP:null!=n.tmpKey?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Tx.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,n){this._parents[this._depth]={type:t,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Tx.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const n=this._knownTags[e];return n?n(t):new Nx(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return Sx.concat(e)}createByteStringFromHeap(e,t){return e===t?Sx.alloc(0):Sx.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return Ix.buildInt32(e,t)}createInt64(e,t,n,r){return Ix.buildInt64(e,t,n,r)}createFloat(e){return e}createFloatSingle(e,t,n,r){return Ax.read([e,t,n,r],0,!1,23,4)}createFloatDouble(e,t,n,r,i,o,a,s){return Ax.read([e,t,n,r,i,o,a,s],0,!1,52,8)}createInt32Neg(e,t){return-1-Ix.buildInt32(e,t)}createInt64Neg(e,t,n,r){const i=Ix.buildInt32(e,t),o=Ix.buildInt32(n,r);return i>Tx.MAX_SAFE_HIGH?Tx.NEG_ONE.minus(new Ox(i).times(Tx.SHIFT32).plus(o)):-1-(i*Tx.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new jx(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,n,r){this._push(this.createInt64(e,t,n,r))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,n,r){this._push(this.createFloatSingle(e,t,n,r))}pushFloatDouble(e,t,n,r,i,o,a,s){this._push(this.createFloatDouble(e,t,n,r,i,o,a,s))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,n,r){this._push(this.createInt64Neg(e,t,n,r))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Tx.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const n=Ix.buildInt32(e,t);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,t,n,r){const i=Ix.buildInt64(e,t,n,r);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const n=Ix.buildInt32(e,t);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,t,n,r){const i=Ix.buildInt64(e,t,n,r);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:Tx.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:Tx.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Tx.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(Ix.buildInt32(e,t))}pushTagStart8(e,t,n,r){this.pushTagStart(Ix.buildInt64(e,t,n,r))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},Tx.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),Tx.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){"string"==typeof e&&(e=Sx.from(e,t||"hex"));return new Cx({size:e.length}).decodeFirst(e)}static decodeAll(e,t){"string"==typeof e&&(e=Sx.from(e,t||"hex"));return new Cx({size:e.length}).decodeAll(e)}}Cx.decodeFirst=Cx.decode;var Dx=Cx;const{Buffer:Ux}=D,Rx=Dx,Mx=ix;class Fx extends Rx{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,n,r){return super.createInt64(e,t,n,r).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,n,r){return super.createInt64Neg(e,t,n,r).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return Mx.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,n,r){return`${super.createFloatSingle(e,t,n,r)}_2`}createFloatDouble(e,t,n,r,i,o,a,s){return`${super.createFloatDouble(e,t,n,r,i,o,a,s)}_3`}createByteString(e,t){const n=e.join(", ");return-1===t?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,t){return`h'${Ux.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const n=super.createArray(e,t);return-1===t?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,t){const n=super.createMap(e),r=Array.from(n.keys()).reduce(zx(n),"");return-1===t?`{_ ${r}}`:`{${r}}`}createObject(e,t){const n=super.createObject(e),r=Object.keys(n).reduce(zx(n),"");return-1===t?`{_ ${r}}`:`{${r}}`}createUtf8String(e,t){const n=e.join(", ");return-1===t?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,t){return`"${Ux.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){"string"==typeof e&&(e=Ux.from(e,t||"hex"));return(new Fx).decodeFirst(e)}}var Bx=Fx;function zx(e){return(t,n)=>t?`${t}, ${n}: ${e[n]}`:`${n}: ${e[n]}`}const{Buffer:Hx}=D,{URL:Gx}=kx,$x=rx.BigNumber,qx=ix,Vx=ox,Kx=Vx.MT,Wx=Vx.NUMBYTES,Jx=Vx.SHIFT32,Yx=Vx.SYMS,Xx=Vx.TAG,Zx=Vx.MT.SIMPLE_FLOAT<<5|Vx.NUMBYTES.TWO,Qx=Vx.MT.SIMPLE_FLOAT<<5|Vx.NUMBYTES.FOUR,ek=Vx.MT.SIMPLE_FLOAT<<5|Vx.NUMBYTES.EIGHT,tk=Vx.MT.SIMPLE_FLOAT<<5|Vx.SIMPLE.TRUE,nk=Vx.MT.SIMPLE_FLOAT<<5|Vx.SIMPLE.FALSE,rk=Vx.MT.SIMPLE_FLOAT<<5|Vx.SIMPLE.UNDEFINED,ik=Vx.MT.SIMPLE_FLOAT<<5|Vx.SIMPLE.NULL,ok=new $x("0x20000000000000"),ak=Hx.from("f97e00","hex"),sk=Hx.from("f9fc00","hex"),uk=Hx.from("f97c00","hex");class ck{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[Gx,this._pushUrl],[$x,this._pushBigNumber]];const t=e.genTypes||[],n=t.length;for(let r=0;r<n;r++)this.addSemanticType(t[r][0],t[r][1]);this._reset()}addSemanticType(e,t){const n=this.semanticTypes.length;for(let r=0;r<n;r++){if(this.semanticTypes[r][0]===e){const e=this.semanticTypes[r][1];return this.semanticTypes[r][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(ak)}_pushInfinity(e){const t=e<0?sk:uk;return this.push(t)}_pushFloat(e){const t=Hx.allocUnsafe(2);if(qx.writeHalf(t,e)&&qx.parseHalf(t)===e)return this._pushUInt8(Zx)&&this.push(t);const n=Hx.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(Qx)&&this.push(n):this._pushUInt8(ek)&&this._pushDoubleBE(e)}_pushInt(e,t,n){const r=t<<5;return e<24?this._pushUInt8(r|e):e<=255?this._pushUInt8(r|Wx.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(r|Wx.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(r|Wx.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(r|Wx.EIGHT)&&this._pushUInt32BE(Math.floor(e/Jx))&&this._pushUInt32BE(e%Jx):t===Kx.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,Kx.NEG_INT,e):this._pushInt(e,Kx.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=Hx.byteLength(e,"utf8");return this._pushInt(t,Kx.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?tk:nk)}_pushUndefined(e){return this._pushUInt8(rk)}_pushArray(e,t){const n=t.length;if(!e._pushInt(n,Kx.ARRAY))return!1;for(let r=0;r<n;r++)if(!e.pushAny(t[r]))return!1;return!0}_pushTag(e){return this._pushInt(e,Kx.TAG)}_pushDate(e,t){return e._pushTag(Xx.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,Kx.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(Xx.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,Kx.ARRAY))return!1;for(const n of t)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,t){return e._pushTag(Xx.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=Xx.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=Xx.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const r=Hx.from(n,"hex");return this._pushTag(t)&&this._pushBuffer(this,r)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(Xx.DECIMAL_FRAC)||!e._pushInt(2,Kx.ARRAY))return!1;const n=t.decimalPlaces(),r=t.multipliedBy(new $x(10).pow(n));return!!e._pushIntNum(-n)&&(r.abs().isLessThan(ok)?e._pushIntNum(r.toNumber()):e._pushBigint(r))}_pushMap(e,t){return!!e._pushInt(t.size,Kx.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(ik);for(var t=this.semanticTypes.length,n=0;n<t;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var r=e.encodeCBOR;if("function"==typeof r)return r.call(e,this);var i=Object.keys(e),o=i.length;return!!this._pushInt(o,Kx.MAP)&&this._pushRawMap(o,i.map((t=>[t,e[t]])))}_pushRawMap(e,t){t=t.map((function(e){return e[0]=ck.encode(e[0]),e})).sort(qx.keySorter);for(var n=0;n<e;n++){if(!this.push(t[n][0]))return!1;if(!this.pushAny(t[n][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){switch(function(e){return{}.toString.call(e).slice(8,-1)}(e)){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Hx.isBuffer(e)?e:Hx.from(e));case"Null":return this._pushUInt8(ik);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Yx.NULL:return this._pushObject(null);case Yx.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,n=this.resultMethod,r=this.offset,i=0,o=0;o<r;o++)i+=t[o];var a=Hx.allocUnsafe(i),s=0,u=0;for(o=0;o<r;o++){switch(u=t[o],n[o]){case 0:e[o].copy(a,s);break;case 1:a.writeUInt8(e[o],s,!0);break;case 2:a.writeUInt16BE(e[o],s,!0);break;case 3:a.writeUInt32BE(e[o],s,!0);break;case 4:a.writeDoubleBE(e[o],s,!0);break;case 5:a.write(e[o],s,u,"utf8");break;default:throw new Error("unkown method")}s+=u}var c=a;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new ck;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}var lk=ck;!function(e){e.Diagnose=Bx,e.Decoder=Dx,e.Encoder=lk,e.Simple=hx,e.Tagged=px,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}}(BE);const fk=ba,hk=self.crypto||self.msCrypto,dk=async(e,t)=>{if("undefined"==typeof self||!hk)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(t){case"sha1":return new Uint8Array(await hk.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await hk.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await hk.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await hk.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await hk.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var pk={factory:e=>async t=>dk(t,e),digest:dk,multihashing:async(e,t,n)=>{const r=await dk(e,t);return fk.encode(r,t,n)}};var vk={fromNumberTo32BitBuf:e=>{const t=new Uint8Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return t}};function yk(e){return(4294967296+e).toString(16).substring(1)}var bk={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else if(e instanceof Buffer)t=new Uint8Array(e);else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=new Uint8Array(Buffer.from(e,"utf8"))}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,n){let r="\n"+e+" = ";for(let i=0;i<t.length;i+=2){if(32===n)r+=yk(t[i]).toUpperCase(),r+=" ",r+=yk(t[i+1]).toUpperCase();else{if(64!==n)throw new Error("Invalid size "+n);r+=yk(t[i+1]).toUpperCase(),r+=yk(t[i]).toUpperCase()}i%6==4?r+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)},testSpeed:function(e,t,n){let r=(new Date).getTime();const i=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=a%256;const o=(new Date).getTime();console.log("Generated random input in "+(o-r)+"ms"),r=o;for(let a=0;a<n;a++){const n=e(i),o=(new Date).getTime(),a=o-r;r=o,console.log("Hashed in "+a+"ms: "+n.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}};const mk=bk;function gk(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function wk(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let o=e[t+1]+r;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function _k(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ek(e,t,n,r,i,o){const a=Ak[i],s=Ak[i+1],u=Ak[o],c=Ak[o+1];gk(Sk,e,t),wk(Sk,e,a,s);let l=Sk[r]^Sk[e],f=Sk[r+1]^Sk[e+1];Sk[r]=f,Sk[r+1]=l,gk(Sk,n,r),l=Sk[t]^Sk[n],f=Sk[t+1]^Sk[n+1],Sk[t]=l>>>24^f<<8,Sk[t+1]=f>>>24^l<<8,gk(Sk,e,t),wk(Sk,e,u,c),l=Sk[r]^Sk[e],f=Sk[r+1]^Sk[e+1],Sk[r]=l>>>16^f<<16,Sk[r+1]=f>>>16^l<<16,gk(Sk,n,r),l=Sk[t]^Sk[n],f=Sk[t+1]^Sk[n+1],Sk[t]=f>>>31^l<<1,Sk[t+1]=l>>>31^f<<1}const xk=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),kk=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),Sk=new Uint32Array(32),Ak=new Uint32Array(32);function Ok(e,t){let n=0;for(n=0;n<16;n++)Sk[n]=e.h[n],Sk[n+16]=xk[n];for(Sk[24]=Sk[24]^e.t,Sk[25]=Sk[25]^e.t/4294967296,t&&(Sk[28]=~Sk[28],Sk[29]=~Sk[29]),n=0;n<32;n++)Ak[n]=_k(e.b,4*n);for(n=0;n<12;n++)Ek(0,8,16,24,kk[16*n+0],kk[16*n+1]),Ek(2,10,18,26,kk[16*n+2],kk[16*n+3]),Ek(4,12,20,28,kk[16*n+4],kk[16*n+5]),Ek(6,14,22,30,kk[16*n+6],kk[16*n+7]),Ek(0,10,20,30,kk[16*n+8],kk[16*n+9]),Ek(2,12,22,24,kk[16*n+10],kk[16*n+11]),Ek(4,14,16,26,kk[16*n+12],kk[16*n+13]),Ek(6,8,18,28,kk[16*n+14],kk[16*n+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^Sk[n]^Sk[n+16]}function Pk(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");const n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};for(let i=0;i<16;i++)n.h[i]=xk[i];const r=t?t.length:0;return n.h[0]^=16842752^r<<8^e,t&&(Ik(n,t),n.c=128),n}function Ik(e,t){for(let n=0;n<t.length;n++)128===e.c&&(e.t+=e.c,Ok(e,!1),e.c=0),e.b[e.c++]=t[n]}function Tk(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;Ok(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n);return t}function jk(e,t,n){n=n||64,e=mk.normalizeInput(e);const r=Pk(n,t);return Ik(r,e),Tk(r)}var Nk={blake2b:jk,blake2bHex:function(e,t,n){const r=jk(e,t,n);return mk.toHex(r)},blake2bInit:Pk,blake2bUpdate:Ik,blake2bFinal:Tk};const Lk=bk;function Ck(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Dk(e,t,n,r,i,o){Fk[e]=Fk[e]+Fk[t]+i,Fk[r]=Uk(Fk[r]^Fk[e],16),Fk[n]=Fk[n]+Fk[r],Fk[t]=Uk(Fk[t]^Fk[n],12),Fk[e]=Fk[e]+Fk[t]+o,Fk[r]=Uk(Fk[r]^Fk[e],8),Fk[n]=Fk[n]+Fk[r],Fk[t]=Uk(Fk[t]^Fk[n],7)}function Uk(e,t){return e>>>t^e<<32-t}const Rk=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mk=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Fk=new Uint32Array(16),Bk=new Uint32Array(16);function zk(e,t){let n=0;for(n=0;n<8;n++)Fk[n]=e.h[n],Fk[n+8]=Rk[n];for(Fk[12]^=e.t,Fk[13]^=e.t/4294967296,t&&(Fk[14]=~Fk[14]),n=0;n<16;n++)Bk[n]=Ck(e.b,4*n);for(n=0;n<10;n++)Dk(0,4,8,12,Bk[Mk[16*n+0]],Bk[Mk[16*n+1]]),Dk(1,5,9,13,Bk[Mk[16*n+2]],Bk[Mk[16*n+3]]),Dk(2,6,10,14,Bk[Mk[16*n+4]],Bk[Mk[16*n+5]]),Dk(3,7,11,15,Bk[Mk[16*n+6]],Bk[Mk[16*n+7]]),Dk(0,5,10,15,Bk[Mk[16*n+8]],Bk[Mk[16*n+9]]),Dk(1,6,11,12,Bk[Mk[16*n+10]],Bk[Mk[16*n+11]]),Dk(2,7,8,13,Bk[Mk[16*n+12]],Bk[Mk[16*n+13]]),Dk(3,4,9,14,Bk[Mk[16*n+14]],Bk[Mk[16*n+15]]);for(n=0;n<8;n++)e.h[n]^=Fk[n]^Fk[n+8]}function Hk(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Rk),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(Gk(r,t),r.c=64),r}function Gk(e,t){for(let n=0;n<t.length;n++)64===e.c&&(e.t+=e.c,zk(e,!1),e.c=0),e.b[e.c++]=t[n]}function $k(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;zk(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n)&255;return t}function qk(e,t,n){n=n||32,e=Lk.normalizeInput(e);const r=Hk(n,t);return Gk(r,e),$k(r)}var Vk={blake2s:qk,blake2sHex:function(e,t,n){const r=qk(e,t,n);return Lk.toHex(r)},blake2sInit:Hk,blake2sUpdate:Gk,blake2sFinal:$k};var Kk={blake2b:Nk.blake2b,blake2bHex:Nk.blake2bHex,blake2bInit:Nk.blake2bInit,blake2bUpdate:Nk.blake2bUpdate,blake2bFinal:Nk.blake2bFinal,blake2s:Vk.blake2s,blake2sHex:Vk.blake2sHex,blake2sInit:Vk.blake2sInit,blake2sUpdate:Vk.blake2sUpdate,blake2sFinal:Vk.blake2sFinal};const Wk={init:Kk.blake2bInit,update:Kk.blake2bUpdate,digest:Kk.blake2bFinal},Jk={init:Kk.blake2sInit,update:Kk.blake2sUpdate,digest:Kk.blake2sFinal},Yk=(e,t)=>async n=>{const r=t.init(e,null);return t.update(r,n),t.digest(r)};const Xk=C.exports,Zk=R,{factory:Qk}=pk,{fromNumberTo32BitBuf:eS}=vk,tS=P,nS=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(Xk.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(Xk.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(Xk.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(Xk.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(Xk.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(Xk.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(Xk.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(Xk.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(Xk.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(Xk.keccak512.arrayBuffer(t));case"murmur3-128":return tS(Zk.x64.hash128(t),"base16");case"murmur3-32":return eS(Zk.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};var rS={identity:e=>e,sha1:Qk("sha1"),sha2256:Qk("sha2-256"),sha2512:Qk("sha2-512"),dblSha2256:Qk("dbl-sha2-256"),sha3224:nS("sha3-224"),sha3256:nS("sha3-256"),sha3384:nS("sha3-384"),sha3512:nS("sha3-512"),shake128:nS("shake-128"),shake256:nS("shake-256"),keccak224:nS("keccak-224"),keccak256:nS("keccak-256"),keccak384:nS("keccak-384"),keccak512:nS("keccak-512"),murmur3128:nS("murmur3-128"),murmur332:nS("murmur3-32"),addBlake:e=>{for(let t=0;t<64;t++)e[45569+t]=Yk(t+1,Wk);for(let t=0;t<32;t++)e[45633+t]=Yk(t+1,Jk)}};const iS=M,oS=ba,aS=rS,sS=j;async function uS(e,t,n){const r=await uS.digest(e,t,n);return oS.encode(r,t,n)}uS.multihash=oS,uS.digest=async(e,t,n)=>{const r=uS.createHash(t),i=await r(e);return n?i.slice(0,n):i},uS.createHash=function(e){if(!e){throw iS(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED")}const t=oS.coerceCode(e);if(!uS.functions[t])throw iS(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return uS.functions[t]},uS.functions={0:aS.identity,17:aS.sha1,18:aS.sha2256,19:aS.sha2512,20:aS.sha3512,21:aS.sha3384,22:aS.sha3256,23:aS.sha3224,24:aS.shake128,25:aS.shake256,26:aS.keccak224,27:aS.keccak256,28:aS.keccak384,29:aS.keccak512,34:aS.murmur3128,35:aS.murmur332,86:aS.dblSha2256},aS.addBlake(uS.functions),uS.validate=async(e,t)=>{const n=await uS(e,oS.decode(t).name);return sS(t,n)};var cS=uS,lS=fS;function fS(e,t){this.value=e,this.next=t}fS.prototype.contains=function(e){for(var t=this;t;){if(t.value===e)return!0;t=t.next}return!1};var hS=lS;function dS(e,t){for(var n in t=new hS(e,t),e){var r=e[n];if(r instanceof Object&&(t.contains(r)||dS(r,t)))return!0}return!1}const pS=BE,vS=is,yS=cS,bS=bs,mS=function(e){if(!(e instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return dS(e)},gS=I,wS=P;function _S(e){let t;try{t=mS(e)}catch(n){t=!1}if(t)throw new Error("The object passed has circular references");return function e(t){if(!t||t instanceof Uint8Array||"string"==typeof t)return t;if(Array.isArray(t))return t.map(e);if(bS.isCID(t))return"string"==typeof(n=t)?n=new bS(n).bytes:bS.isCID(n)&&(n=n.bytes),new pS.Tagged(42,gS([wS("00","base16"),n],1+n.length));var n;const r=Object.keys(t);if(r.length>0){const n={};return r.forEach((r=>{"object"==typeof t[r]?n[r]=e(t[r]):n[r]=t[r]})),n}return t}(e)}const ES=vS.DAG_CBOR,xS=vS.SHA2_256,kS={42:e=>(e=e.slice(1),new bS(e))};let SS=65536;let AS=67108864,OS=null;function PS(e){let t=kS;e?("number"==typeof e.size&&(SS=e.size),"number"==typeof e.maxSize&&(AS=e.maxSize),e.tags&&(t=Object.assign({},kS,e&&e.tags))):(SS=65536,AS=67108864);const n={tags:t,size:SS};OS=new pS.Decoder(n),SS=n.size}PS();var IS={codec:ES,defaultHashAlg:xS,configureDecoder:PS,serialize:function(e){const t=_S(e);return pS.encode(t)},deserialize:function(e){if(e.length>SS&&e.length<=AS&&PS({size:e.length}),e.length>SS)throw new Error("Data is too large to deserialize with current decoder");const t=OS.decodeAll(e);if(1!==t.length)throw new Error("Extraneous CBOR data found beyond initial top-level object");return t[0]},cid:async function(e,t){const n={cidVersion:1,hashAlg:xS},r=Object.assign(n,t),i=await yS(e,r.hashAlg),o=vS.getNameFromCode(ES);return new bS(r.cidVersion,o,i)}},TS={};const jS=bs,NS=IS;TS.resolve=(e,t)=>{let n=NS.deserialize(e);const r=t.split("/").filter(Boolean);for(;r.length;){const e=r.shift();if(void 0===n[e])throw new Error(`Object has no property '${e}'`);if(n=n[e],jS.isCID(n))return{value:n,remainderPath:r.join("/")}}return{value:n,remainderPath:""}};const LS=function*(e,t){if(!(e instanceof Uint8Array||jS.isCID(e)||"string"==typeof e||null===e))for(const n of Object.keys(e)){const r=void 0===t?n:t+"/"+n;yield r,yield*LS(e[n],r)}};TS.tree=function*(e){const t=NS.deserialize(e);yield*LS(t)},function(e){e.util=IS,e.resolver=TS,e.codec=e.util.codec,e.defaultHashAlg=e.util.defaultHashAlg}(FE);var CS=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),DS=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),US=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&CS(t,e,n);return DS(t,e),t},RS=f&&f.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},MS=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ME,"__esModule",{value:!0}),ME.decodeCleartext=ME.prepareCleartext=ME.decodeIdentityCID=ME.encodeIdentityCID=ME.encodePayload=void 0;const FS=MS(FE),BS=MS(bs),zS=MS(ba),HS=US(S),GS=MS(T);function $S(e){const t=FS.default.util.serialize(e),n=zS.default.encode(t,0);return new BS.default(1,113,n)}function qS(e){if(BS.default.validateCID(e),113!==e.code)throw new Error("CID codec must be dag-cbor");const{code:t,digest:n}=zS.default.decode(e.multihash);if(0!==t)throw new Error("CID must use identity multihash");return FS.default.util.deserialize(n)}ME.encodePayload=function(e){return RS(this,void 0,void 0,(function*(){const t=new Uint8Array(FS.default.util.serialize(e));return{cid:yield FS.default.util.cid(t),linkedBlock:t}}))},ME.encodeIdentityCID=$S,ME.decodeIdentityCID=qS,ME.prepareCleartext=function(e,t){return function(e,t=24){const n=(t-e.length%t)%t;return HS.concat([e,new Uint8Array(n)])}($S(e).bytes,t)},ME.decodeCleartext=function(e){return qS(function(e){let t,n=0;for(let r=0;r<4;r++)t=GS.default.decode(e,n),n+=GS.default.decode.bytes;return new BS.default(e.slice(0,n+t))}(e))};var VS=d(gn),KS={},WS=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),JS=f&&f.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),YS=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&WS(t,e,n);return JS(t,e),t};Object.defineProperty(KS,"__esModule",{value:!0}),KS.extractControllers=KS.didWithTime=KS.fromDagJWS=KS.randomString=KS.base64urlToJSON=KS.decodeBase64=KS.encodeBase64Url=KS.encodeBase64=void 0;const XS=YS(S),ZS=co;KS.encodeBase64=function(e){return XS.toString(e,"base64pad")},KS.encodeBase64Url=function(e){return XS.toString(e,"base64url")},KS.decodeBase64=function(e){return XS.fromString(e,"base64pad")},KS.base64urlToJSON=function(e){return JSON.parse(XS.toString(XS.fromString(e,"base64url")))},KS.randomString=function(){return XS.toString(ZS.randomBytes(16),"base64")},KS.fromDagJWS=function(e){if(e.signatures.length>1)throw new Error("Cant convert to compact jws");return`${e.signatures[0].protected}.${e.payload}.${e.signatures[0].signature}`},KS.didWithTime=function(e,t){if(t){return`${e}?versionTime=${new Date(t).toISOString().split(".")[0]+"Z"}`}return e},KS.extractControllers=function(e){return e?Array.isArray(e)?e:[e]:[]};var QS=f&&f.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(r_,"__esModule",{value:!0}),r_.DID=void 0;const eA=f_,tA=RE,nA=ME,rA=VS,iA=KS;r_.DID=class{constructor({provider:e,resolver:t={},resolverOptions:n}={}){null!=e&&(this._client=new rA.RPCClient(e)),this.setResolver(t,n)}get authenticated(){return null!=this._id}get id(){if(null==this._id)throw new Error("DID is not authenticated");return this._id}setProvider(e){if(null==this._client)this._client=new rA.RPCClient(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,t){this._resolver=function(e){return"registry"in e&&"cache"in e}(e)?e:new eA.Resolver(e,t)}authenticate({provider:e,paths:t=[],aud:n}={}){return QS(this,void 0,void 0,(function*(){if(null!=e&&this.setProvider(e),null==this._client)throw new Error("No provider available");const r=iA.randomString(),i=yield this._client.request("did_authenticate",{nonce:r,aud:n,paths:t}),{kid:o}=yield this.verifyJWS(i),a=iA.base64urlToJSON(i.payload);if(!o.includes(a.did))throw new Error("Invalid authencation response, kid mismatch");if(a.nonce!==r)throw new Error("Invalid authencation response, wrong nonce");if(a.aud!==n)throw new Error("Invalid authencation response, wrong aud");if(a.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=a.did,this._id}))}createJWS(e,t={}){return QS(this,void 0,void 0,(function*(){if(null==this._client)throw new Error("No provider available");if(null==this._id)throw new Error("DID is not authenticated");const{jws:n}=yield this._client.request("did_createJWS",Object.assign(Object.assign({did:this._id},t),{payload:e}));return n}))}createDagJWS(e,t={}){return QS(this,void 0,void 0,(function*(){const{cid:n,linkedBlock:r}=yield nA.encodePayload(e),i=iA.encodeBase64Url(n.bytes);Object.assign(t,{linkedBlock:iA.encodeBase64(r)});const o=yield this.createJWS(i,t);return o.link=n,{jws:o,linkedBlock:r}}))}verifyJWS(e,t={}){var n,r,i,o,a;return QS(this,void 0,void 0,(function*(){"string"!=typeof e&&(e=iA.fromDagJWS(e));const s=iA.base64urlToJSON(e.split(".")[0]).kid;if(!s)throw new Error('No "kid" found in jws');const u=yield this.resolve(s);if(!t.disableTimecheck){const e=null===(n=u.didDocumentMetadata)||void 0===n?void 0:n.nextUpdate;if(e){if(!(t.atTime&&t.atTime<new Date(e).valueOf()))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${s}`)}const i=null===(r=u.didDocumentMetadata)||void 0===r?void 0:r.updated;if(i&&t.atTime&&t.atTime<new Date(i).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${s}`)}const c=null===(i=u.didDocument)||void 0===i?void 0:i.id;if(t.issuer&&t.issuer!==c){const e=iA.didWithTime(t.issuer,t.atTime),n=yield this.resolve(e),r=null===(o=n.didDocument)||void 0===o?void 0:o.controller,i=iA.extractControllers(r);if(!(!!c&&i.includes(c)))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${s}`)}const l=(null===(a=u.didDocument)||void 0===a?void 0:a.verificationMethod)||[];let f;tA.verifyJWS(e,l);try{f=iA.base64urlToJSON(e.split(".")[1])}catch(h){}return{kid:s,payload:f,didResolutionResult:u}}))}createJWE(e,t,n={}){return QS(this,void 0,void 0,(function*(){const r=yield tA.resolveX25519Encrypters(t,this._resolver);return tA.createJWE(e,r,n.protectedHeader,n.aad)}))}createDagJWE(e,t,n={}){return QS(this,void 0,void 0,(function*(){return this.createJWE(nA.prepareCleartext(e),t,n)}))}decryptJWE(e,t={}){return QS(this,void 0,void 0,(function*(){if(null==this._client)throw new Error("No provider available");if(null==this._id)throw new Error("DID is not authenticated");const{cleartext:n}=yield this._client.request("did_decryptJWE",Object.assign(Object.assign({did:this._id},t),{jwe:e}));return iA.decodeBase64(n)}))}decryptDagJWE(e){return QS(this,void 0,void 0,(function*(){const t=yield this.decryptJWE(e);return nA.decodeCleartext(t)}))}resolve(e){return QS(this,void 0,void 0,(function*(){const t=yield this._resolver.resolve(e);if(t.didResolutionMetadata.error){const{error:n,message:r}=t.didResolutionMetadata;throw new Error(`Failed to resolve ${e}: ${n}${r?`, ${r}`:""}`)}return t}))}},function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(n_,e),n(r_,e)}(t_);const oA=({isOpen:e})=>{const[t,n]=l.exports.useState(""),[r,i]=l.exports.useState(""),[o,a]=l.exports.useState(""),[f,h]=l.exports.useState(""),{updateUserState:d,userState:p}=m(),v=e=>{"name"===e.target.id?n(e.target.value):"birthDate"===e.target.id?i(e.target.value):"residenceCountry"===e.target.id?a(e.target.value):"description"===e.target.id&&h(e.target.value)},y=()=>""!==t&&""!==r&&""!==o&&""!==f,b=y();return c.createElement(c.Fragment,null,c.createElement(w,{open:e,onClose:function(){},className:"fixed z-10 inset-0 overflow-y-auto lobbyview"},c.createElement("div",{className:"flex items-center justify-center min-h-screen z-20"},c.createElement(w.Overlay,{className:"fixed inset-0 opacity-100"}),c.createElement("div",{className:"lobbyview__modal rounded max-w-sm mx-auto shadow-lg drop-shadow-lg opacity-100 z-30"},c.createElement("form",{className:"lobbyview_modal rounded px-8 pt-6 pb-8 mb-4 text-screen text-white opacity-100 z-40"},c.createElement(w.Title,{className:"text-2xl font-bold mb-4"},"Create Profile"),c.createElement("div",{className:"mb-4"},c.createElement("label",{className:"block  text-sm font-bold mb-2",htmlFor:"name"},"Name"),c.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3  leading-tight focus:outline-none focus:shadow-outline text-black",id:"name",type:"text",placeholder:"Name",onChange:e=>v(e)})),c.createElement("div",{className:"mb-4"},c.createElement("label",{className:"block  text-sm font-bold mb-2",htmlFor:"residenceCountry"},"Residence Country"),c.createElement("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3  mb-3 leading-tight focus:outline-none focus:shadow-outline text-black",id:"residenceCountry",type:"text",placeholder:"CA",onChange:e=>v(e),maxLength:2}),c.createElement("p",{className:"text-red-500 text-xs italic"},"Please choose a valid country.")),c.createElement("div",{className:"mb-4"},c.createElement("label",{className:"block  text-sm font-bold mb-2",htmlFor:"birthDate"},"Birth Date"),c.createElement("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3  mb-3 leading-tight focus:outline-none focus:shadow-outline text-black",id:"birthDate",type:"text",placeholder:"yyyy-mm-dd",onChange:e=>v(e)}),c.createElement("p",{className:"text-red-500 text-xs italic"},"Please choose a valid date.")),c.createElement("div",{className:"mb-6"},c.createElement("label",{className:"block  text-sm font-bold mb-2",htmlFor:"birthDate"},"Description"),c.createElement("input",{className:"shadow appearance-none border border-red-500 rounded w-full py-2 px-3  mb-3 leading-tight focus:outline-none focus:shadow-outline text-black",id:"description",type:"text",placeholder:"Description",onChange:e=>v(e)}),c.createElement("p",{className:"text-red-500 text-xs italic"},"Please write a valid description.")),c.createElement("div",{className:"flex items-center justify-between"},c.createElement("button",{className:"lobbyview__button font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>(()=>{var e;if(y()){const n={name:t,description:f,birthDate:r,residenceCountry:o};null==(e=p.idx)||e.set("basicProfile",n).then((()=>d(u(s({},p),{profile:n}))))}})(),disabled:!b},"Create Profile")))))))},aA=new F({network:"mainnet",cacheProvider:!0}),sA=new Ii,uA=()=>{const{updateUserState:e}=m(),{profile:t,loggedIn:n}=m((e=>e.userState)),r=async(e,t,n)=>{if(!t.did)throw Error("No DID set in Ceramic");const r=await e.accountId(),i=await n.get("cryptoAccounts",t.did.id);if(null===i){const i=await Iw.Caip10Link.fromAccount(t,r);await i.setDid(t.did.id,e);const o=i.id.toUrl(),a={[r.toString()]:o};return await n.set("cryptoAccounts",a),a}return i},i=()=>{(async()=>{const t=await aA.connect(),n=await t.enable(),i=new K.EthereumAuthProvider(t,n[0]);await sA.connect(i);const o=new Bw("https://ceramic-clay.3boxlabs.com/"),a=sA.getDidProvider(),s=new t_.DID({provider:a,resolver:dv.getResolver(o)});o.did=s,await o.did.authenticate(),await s.authenticate();const u=new e_({ceramic:o}),c=await u.get("basicProfile",s.id)||void 0,l=await r(i,o,u);e({loggedIn:!0,cryptoAccounts:l,profile:c,did:s,ceramic:o,idx:u})})()};return c.createElement(c.Fragment,null,c.createElement("div",{className:"lobbyview h-screen"},c.createElement("div",{className:"grid grid-cols-j gap-4"},c.createElement("div",{className:"lobbyview__lpanel p-4 br-2 text-white rounded-xl m-8"},c.createElement("div",{className:"w-100 m-4"}),c.createElement("div",{className:"w-100 m-4"},c.createElement("button",{className:"lobbyview__button text-2xl font-bold p-4 br-4 rounded-md",onClick:()=>i()},"Login")))),c.createElement(oA,{isOpen:n&&void 0===t})))};var cA=()=>{const{loggedIn:e,profile:t}=m((e=>e.userState));if(e&&void 0!==t){const e={name:t.name,description:t.description,residenceCountry:t.residenceCountry,age:18};return c.createElement(c.Fragment,null,c.createElement("div",{className:"lobbyview h-screen"},c.createElement("div",{className:"grid grid-cols-3 gap-4"},c.createElement("div",{className:"col-span-2"},c.createElement(z,s({},e))),c.createElement("div",{className:"col-span-1"},c.createElement(V,null)))))}return c.createElement(uA,null)};export{cA as default};
